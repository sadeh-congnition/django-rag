<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Django Software Foundation" />
    <meta name="keywords" content="Python, Django, framework, open-source" />
    <meta name="description" content="" />
    <meta name="fediverse:creator" content="@django@fosstodon.org" />
    
  
    
      
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/en/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="el"
          href="https://docs.djangoproject.com/el/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="en"
          href="https://docs.djangoproject.com/en/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="es"
          href="https://docs.djangoproject.com/es/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="fr"
          href="https://docs.djangoproject.com/fr/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="id"
          href="https://docs.djangoproject.com/id/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="it"
          href="https://docs.djangoproject.com/it/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="ja"
          href="https://docs.djangoproject.com/ja/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="ko"
          href="https://docs.djangoproject.com/ko/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="pl"
          href="https://docs.djangoproject.com/pl/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="pt-br"
          href="https://docs.djangoproject.com/pt-br/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="sv"
          href="https://docs.djangoproject.com/sv/6.0/releases/4.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="zh-hans"
          href="https://docs.djangoproject.com/zh-hans/6.0/releases/4.0/">
  

  <link rel="search"
        type="application/opensearchdescription+xml"
        href="https://docs.djangoproject.com/en/6.0/search/description/"
        title="Django documentation">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="https://static.djangoproject.com/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="https://static.djangoproject.com/img/icon-tile.b01ac0ef9f67.png">
    <meta name="theme-color" content="#0C4B33">

    
      <meta property="og:title" content="Django 4.0 release notes | Django documentation" />
      <meta property="og:description" content="The web framework for perfectionists with deadlines." />
      <meta property="og:image" content="https://static.djangoproject.com/img/logos/django-logo-negative.1d528e2cb5fb.png" />
      <meta property="og:image:alt" content="Django logo" />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="546" />
      <meta property="og:image:type" content="image/png"/>
      <meta property="og:url" content="https://docs.djangoproject.com/en/6.0/releases/4.0/" />
      <meta property="og:site_name" content="Django Project" />

      <meta property="twitter:creator" content="djangoproject" />
      <meta property="twitter:site" content="djangoproject" />
      <meta property="twitter:card" content="summary">
    

    <title>Django 4.0 release notes | Django documentation | Django</title>

    <link rel="stylesheet" href="https://static.djangoproject.com/css/output.7f12b704d16e.css" >

    <script src="https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"></script>
    
  </head>

  <body id="generic" class="">

    <a href="#main-content" class="skip-link">Skip to main content</a>
    

<header id="top">
  <div class="container container--flex--wrap--mobile">
    <a class="logo" href="https://www.djangoproject.com/">Django</a>
    <p class="meta">The web framework for perfectionists with deadlines.</p>
    <div class="header-mobile-only">
      
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

      <div class="light-dark-mode-toggle">
        

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

      </div>
    </div>
    <button class="menu-button">
      <i class="icon icon-reorder"></i>
      <span class="visuallyhidden">Menu</span>
    </button>
    <nav aria-labelledby="navigation-header">
      <span id="navigation-header" class="visuallyhidden">Main navigation</span>
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/">Overview</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/">Download</a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/">Documentation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/">News</a>
        </li>
        <li>
          <a href="https://github.com/django/django" target="_blank" rel="noopener">Code</a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/">Issues</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/">Community</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/">Foundation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/">&#9829; Donate</a>
        </li>
        <li>
          
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

        </li>
        <li>
          

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

        </li>
      </ul>
    </nav>
  </div>
</header>

    

    <section class="copy-banner">
      <div class="container 
  container--flex container--flex--wrap--mobile
">
        
  <p><a href="https://docs.djangoproject.com/en/6.0/">Documentation</a></p>

      </div>
    </section>

    <div id="billboard">
      
    </div>

    <div class="container sidebar-right">
      <main id="main-content">

        
          
        

        
  <div id="version-switcher">
    <ul id="faq-link">
      <li class="current-link">
        <a href="https://docs.djangoproject.com/en/6.0/faq/help/">
          <span>Getting Help</span>
        </a>
      </li>
    </ul>
    <ul id="doc-languages" class="language-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/el/6.0/releases/4.0/">el</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/es/6.0/releases/4.0/">es</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/fr/6.0/releases/4.0/">fr</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/id/6.0/releases/4.0/">id</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/it/6.0/releases/4.0/">it</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ja/6.0/releases/4.0/">ja</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ko/6.0/releases/4.0/">ko</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pl/6.0/releases/4.0/">pl</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pt-br/6.0/releases/4.0/">pt-br</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/sv/6.0/releases/4.0/">sv</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/zh-hans/6.0/releases/4.0/">zh-hans</a>
          </li>
        
      
      <li class="current"
          title="Click on the links on the left to switch to another language.">
        <span>Language: <strong>en</strong></span>
      </li>
    </ul>

    
    <ul id="doc-versions" class="version-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.0/releases/4.0/">4.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.1/releases/4.0/">4.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.2/releases/4.0/">4.2</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.0/releases/4.0/">5.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.1/releases/4.0/">5.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.2/releases/4.0/">5.2</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/dev/releases/4.0/">dev</a>
          </li>
        
      
      <li class="current"
          title="This document describes Django 6.0. Click on the links on the left to see other versions.">
        <span>Documentation version:
          <strong>6.0</strong>
        </span>
      </li>
    </ul>
    <ul id="backtotop-link">
      <li class="current-link">
        <a href="#top" aria-label="Back to top" class="icon-chevron-up-align"><i class="icon icon-chevron-up"></i></a>
      </li>
    </ul>
  </div>

  
    <article id="docs-content">
      <section id="s-django-4-0-release-notes">
<span id="django-4-0-release-notes"></span><h1>Django 4.0 release notes<a class="headerlink" href="#django-4-0-release-notes" title="Link to this heading">¶</a></h1>
<p><em>December 7, 2021</em></p>
<p>Welcome to Django 4.0!</p>
<p>These release notes cover the <a class="reference internal" href="#whats-new-4-0"><span class="std std-ref">new features</span></a>, as well as
some <a class="reference internal" href="#backwards-incompatible-4-0"><span class="std std-ref">backwards incompatible changes</span></a> you’ll
want to be aware of when upgrading from Django 3.2 or earlier. We’ve
<a class="reference internal" href="#deprecated-features-4-0"><span class="std std-ref">begun the deprecation process for some features</span></a>.</p>
<p>See the <a class="reference internal" href="../../howto/upgrade-version/"><span class="doc">How to upgrade Django to a newer version</span></a> guide if you’re updating an existing
project.</p>
<section id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python compatibility<a class="headerlink" href="#python-compatibility" title="Link to this heading">¶</a></h2>
<p>Django 4.0 supports Python 3.8, 3.9, and 3.10. We <strong>highly recommend</strong> and only
officially support the latest release of each series.</p>
<p>The Django 3.2.x series is the last to support Python 3.6 and 3.7.</p>
</section>
<section id="s-what-s-new-in-django-4-0">
<span id="s-whats-new-4-0"></span><span id="what-s-new-in-django-4-0"></span><span id="whats-new-4-0"></span><h2>What’s new in Django 4.0<a class="headerlink" href="#what-s-new-in-django-4-0" title="Link to this heading">¶</a></h2>
<section id="s-zoneinfo-default-timezone-implementation">
<span id="zoneinfo-default-timezone-implementation"></span><h3><code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> default timezone implementation<a class="headerlink" href="#zoneinfo-default-timezone-implementation" title="Link to this heading">¶</a></h3>
<p>The Python standard library’s <a class="reference external" href="https://docs.python.org/3/library/zoneinfo.html#module-zoneinfo" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> is now the default timezone
implementation in Django.</p>
<p>This is the next step in the migration from using <code class="docutils literal notranslate"><span class="pre">pytz</span></code> to using
<a class="reference external" href="https://docs.python.org/3/library/zoneinfo.html#module-zoneinfo" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a>. Django 3.2 allowed the use of non-<code class="docutils literal notranslate"><span class="pre">pytz</span></code> time zones. Django
4.0 makes <code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> the default implementation. Support for <code class="docutils literal notranslate"><span class="pre">pytz</span></code> is now
deprecated and will be removed in Django 5.0.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/zoneinfo.html#module-zoneinfo" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> is part of the Python standard library from Python 3.9. The
<code class="docutils literal notranslate"><span class="pre">backports.zoneinfo</span></code> package is automatically installed alongside Django if
you are using Python 3.8.</p>
<p>The move to <code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> should be largely transparent. Selection of the
current timezone, conversion of datetime instances to the current timezone in
forms and templates, as well as operations on aware datetimes in UTC are
unaffected.</p>
<p>However, if you are working with non-UTC time zones, and using the <code class="docutils literal notranslate"><span class="pre">pytz</span></code>
<code class="docutils literal notranslate"><span class="pre">normalize()</span></code> and <code class="docutils literal notranslate"><span class="pre">localize()</span></code> APIs, possibly with the <a class="reference internal" href="../../ref/settings/#std-setting-DATABASE-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> setting, you will need to audit your code, since <code class="docutils literal notranslate"><span class="pre">pytz</span></code>
and <code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> are not entirely equivalent.</p>
<p>To give time for such an audit, the transitional <code class="docutils literal notranslate"><span class="pre">USE_DEPRECATED_PYTZ</span></code>
setting allows continued use of <code class="docutils literal notranslate"><span class="pre">pytz</span></code> during the 4.x release cycle. This
setting will be removed in Django 5.0.</p>
<p>In addition, a <a class="reference external" href="https://pytz-deprecation-shim.readthedocs.io/en/latest/index.html">pytz_deprecation_shim</a> package, created by the <code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code>
author, can be used to assist with the migration from <code class="docutils literal notranslate"><span class="pre">pytz</span></code>. This package
provides shims to help you safely remove <code class="docutils literal notranslate"><span class="pre">pytz</span></code>, and has a detailed
<a class="reference external" href="https://pytz-deprecation-shim.readthedocs.io/en/latest/migration.html">migration guide</a> showing how to move to the new <code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> APIs.</p>
<p>Using <a class="reference external" href="https://pytz-deprecation-shim.readthedocs.io/en/latest/index.html">pytz_deprecation_shim</a> and the <code class="docutils literal notranslate"><span class="pre">USE_DEPRECATED_PYTZ</span></code>
transitional setting is recommended if you need a gradual update path.</p>
</section>
<section id="s-functional-unique-constraints">
<span id="functional-unique-constraints"></span><h3>Functional unique constraints<a class="headerlink" href="#functional-unique-constraints" title="Link to this heading">¶</a></h3>
<p>The new <a class="reference internal" href="../../ref/models/constraints/#django.db.models.UniqueConstraint.expressions" title="django.db.models.UniqueConstraint.expressions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">*expressions</span></code></a>
positional argument of
<a class="reference internal" href="../../ref/models/constraints/#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint()</span></code></a> enables
creating functional unique constraints on expressions and database functions.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">UniqueConstraint</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models.functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Lower</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">UniqueConstraint</span><span class="p">(</span>
                <span class="n">Lower</span><span class="p">(</span><span class="s2">&quot;first_name&quot;</span><span class="p">),</span>
                <span class="n">Lower</span><span class="p">(</span><span class="s2">&quot;last_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">(),</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;first_last_name_unique&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</div>
<p>Functional unique constraints are added to models using the
<a class="reference internal" href="../../ref/models/options/#django.db.models.Options.constraints" title="django.db.models.Options.constraints"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.constraints</span></code></a> option.</p>
</section>
<section id="s-scrypt-password-hasher">
<span id="scrypt-password-hasher"></span><h3><code class="docutils literal notranslate"><span class="pre">scrypt</span></code> password hasher<a class="headerlink" href="#scrypt-password-hasher" title="Link to this heading">¶</a></h3>
<p>The new <a class="reference internal" href="../../topics/auth/passwords/#scrypt-usage"><span class="std std-ref">scrypt password hasher</span></a> is more secure and
recommended over PBKDF2. However, it’s not the default as it requires OpenSSL
1.1+ and more memory.</p>
</section>
<section id="s-redis-cache-backend">
<span id="redis-cache-backend"></span><h3>Redis cache backend<a class="headerlink" href="#redis-cache-backend" title="Link to this heading">¶</a></h3>
<p>The new <code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.redis.RedisCache</span></code> cache backend provides
built-in support for caching with Redis. <a class="extlink-pypi reference external" href="https://pypi.org/project/redis/">redis-py</a> 3.0.0 or
higher is required. For more details, see the <a class="reference internal" href="../../topics/cache/#redis"><span class="std std-ref">documentation on caching
with Redis in Django</span></a>.</p>
</section>
<section id="s-template-based-form-rendering">
<span id="template-based-form-rendering"></span><h3>Template based form rendering<a class="headerlink" href="#template-based-form-rendering" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../ref/forms/api/#django.forms.Form" title="django.forms.Form"><code class="xref py py-class docutils literal notranslate"><span class="pre">Forms</span></code></a>, <a class="reference internal" href="../../topics/forms/formsets/"><span class="doc">Formsets</span></a>,
and <a class="reference internal" href="../../ref/forms/api/#django.forms.ErrorList" title="django.forms.ErrorList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ErrorList</span></code></a> are now rendered using the template engine
to enhance customization. See the new <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.render" title="django.forms.Form.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">render()</span></code></a>,
<a class="reference internal" href="../../ref/forms/api/#django.forms.Form.get_context" title="django.forms.Form.get_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_context()</span></code></a>, and
<a class="reference internal" href="../../ref/forms/api/#django.forms.Form.template_name" title="django.forms.Form.template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">template_name</span></code></a> for <code class="docutils literal notranslate"><span class="pre">Form</span></code> and
<a class="reference internal" href="../../topics/forms/formsets/#formset-rendering"><span class="std std-ref">formset rendering</span></a> for <code class="docutils literal notranslate"><span class="pre">Formset</span></code>.</p>
</section>
<section id="s-minor-features">
<span id="minor-features"></span><h3>Minor features<a class="headerlink" href="#minor-features" title="Link to this heading">¶</a></h3>
<section id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../../ref/contrib/admin/#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">admin/base.html</span></code> template now has a new block <code class="docutils literal notranslate"><span class="pre">header</span></code> which
contains the admin site header.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_formset_kwargs" title="django.contrib.admin.ModelAdmin.get_formset_kwargs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_formset_kwargs()</span></code></a> method allows customizing the
keyword arguments passed to the constructor of a formset.</p></li>
<li><p>The navigation sidebar now has a quick filter toolbar.</p></li>
<li><p>The new context variable <code class="docutils literal notranslate"><span class="pre">model</span></code> which contains the model class for each
model is added to the <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.AdminSite.each_context" title="django.contrib.admin.AdminSite.each_context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdminSite.each_context()</span></code></a> method.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_help_text" title="django.contrib.admin.ModelAdmin.search_help_text"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.search_help_text</span></code></a> attribute allows specifying a
descriptive text for the search box.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.verbose_name_plural" title="django.contrib.admin.InlineModelAdmin.verbose_name_plural"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InlineModelAdmin.verbose_name_plural</span></code></a> attribute now fallbacks to
the <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.verbose_name" title="django.contrib.admin.InlineModelAdmin.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InlineModelAdmin.verbose_name</span></code></a> + <code class="docutils literal notranslate"><span class="pre">'s'</span></code>.</p></li>
<li><p>jQuery is upgraded from version 3.5.1 to 3.6.0.</p></li>
</ul>
</section>
<section id="s-django-contrib-admindocs">
<span id="django-contrib-admindocs"></span><h4><a class="reference internal" href="../../ref/contrib/admin/admindocs/#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admindocs</span></code></a><a class="headerlink" href="#django-contrib-admindocs" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The admindocs now allows esoteric setups where <a class="reference internal" href="../../ref/settings/#std-setting-ROOT_URLCONF"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ROOT_URLCONF</span></code></a> is not
a string.</p></li>
<li><p>The model section of the <code class="docutils literal notranslate"><span class="pre">admindocs</span></code> now shows cached properties.</p></li>
</ul>
</section>
<section id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../../topics/auth/#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The default iteration count for the PBKDF2 password hasher is increased from
260,000 to 320,000.</p></li>
<li><p>The new
<a class="reference internal" href="../../topics/auth/default/#django.contrib.auth.views.LoginView.next_page" title="django.contrib.auth.views.LoginView.next_page"><code class="xref py py-attr docutils literal notranslate"><span class="pre">LoginView.next_page</span></code></a>
attribute and
<a class="reference internal" href="../../topics/auth/default/#django.contrib.auth.views.LoginView.get_default_redirect_url" title="django.contrib.auth.views.LoginView.get_default_redirect_url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_default_redirect_url()</span></code></a> method
allow customizing the redirect after login.</p></li>
</ul>
</section>
<section id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../../ref/contrib/gis/#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added support for SpatiaLite 5.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> now allows creating rasters in
any GDAL virtual filesystem.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/gis/admin/#django.contrib.gis.admin.GISModelAdmin" title="django.contrib.gis.admin.GISModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">GISModelAdmin</span></code></a> class allows
customizing the widget used for <code class="docutils literal notranslate"><span class="pre">GeometryField</span></code>. This is encouraged instead
of deprecated <code class="docutils literal notranslate"><span class="pre">GeoModelAdmin</span></code> and <code class="docutils literal notranslate"><span class="pre">OSMGeoAdmin</span></code>.</p></li>
</ul>
</section>
<section id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../../ref/contrib/postgres/#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The PostgreSQL backend now supports connecting by a service name. See
<a class="reference internal" href="../../ref/databases/#postgresql-connection-settings"><span class="std std-ref">PostgreSQL connection settings</span></a> for more details.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/operations/#django.contrib.postgres.operations.AddConstraintNotValid" title="django.contrib.postgres.operations.AddConstraintNotValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddConstraintNotValid</span></code></a>
operation allows creating check constraints on PostgreSQL without verifying
that all existing rows satisfy the new constraint.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/operations/#django.contrib.postgres.operations.ValidateConstraint" title="django.contrib.postgres.operations.ValidateConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidateConstraint</span></code></a>
operation allows validating check constraints which were created using
<a class="reference internal" href="../../ref/contrib/postgres/operations/#django.contrib.postgres.operations.AddConstraintNotValid" title="django.contrib.postgres.operations.AddConstraintNotValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddConstraintNotValid</span></code></a> on
PostgreSQL.</p></li>
<li><p>The new
<a class="reference internal" href="../../ref/contrib/postgres/expressions/#django.contrib.postgres.expressions.ArraySubquery" title="django.contrib.postgres.expressions.ArraySubquery"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArraySubquery()</span></code></a>
expression allows using subqueries to construct lists of values on
PostgreSQL.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/lookups/#std-fieldlookup-trigram_word_similar"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">trigram_word_similar</span></code></a> lookup, and the
<a class="reference internal" href="../../ref/contrib/postgres/search/#django.contrib.postgres.search.TrigramWordDistance" title="django.contrib.postgres.search.TrigramWordDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramWordDistance()</span></code></a> and
<a class="reference internal" href="../../ref/contrib/postgres/search/#django.contrib.postgres.search.TrigramWordSimilarity" title="django.contrib.postgres.search.TrigramWordSimilarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramWordSimilarity()</span></code></a> expressions allow
using trigram word similarity.</p></li>
</ul>
</section>
<section id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../../ref/contrib/staticfiles/#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/contrib/staticfiles/#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a> now
replaces paths to JavaScript source map references with their hashed
counterparts.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">manifest_storage</span></code> argument of
<a class="reference internal" href="../../ref/contrib/staticfiles/#django.contrib.staticfiles.storage.ManifestFilesMixin" title="django.contrib.staticfiles.storage.ManifestFilesMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestFilesMixin</span></code></a> and
<a class="reference internal" href="../../ref/contrib/staticfiles/#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a>
allows customizing the manifest file storage.</p></li>
</ul>
</section>
<section id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The new async API for <code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.base.BaseCache</span></code> begins
the process of making cache backends async-compatible. The new async methods
all have <code class="docutils literal notranslate"><span class="pre">a</span></code> prefixed names, e.g. <code class="docutils literal notranslate"><span class="pre">aadd()</span></code>, <code class="docutils literal notranslate"><span class="pre">aget()</span></code>, <code class="docutils literal notranslate"><span class="pre">aset()</span></code>,
<code class="docutils literal notranslate"><span class="pre">aget_or_set()</span></code>, or <code class="docutils literal notranslate"><span class="pre">adelete_many()</span></code>.</p>
<p>Going forward, the <code class="docutils literal notranslate"><span class="pre">a</span></code> prefix will be used for async variants of methods
generally.</p>
</li>
</ul>
</section>
<section id="s-csrf">
<span id="csrf"></span><h4>CSRF<a class="headerlink" href="#csrf" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>CSRF protection now consults the <code class="docutils literal notranslate"><span class="pre">Origin</span></code> header, if present. To facilitate
this, <a class="reference internal" href="#csrf-trusted-origins-changes-4-0"><span class="std std-ref">some changes</span></a> to the
<a class="reference internal" href="../../ref/settings/#std-setting-CSRF_TRUSTED_ORIGINS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code></a> setting are required.</p></li>
</ul>
</section>
<section id="s-forms">
<span id="forms"></span><h4>Forms<a class="headerlink" href="#forms" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/forms/fields/#django.forms.ModelChoiceField" title="django.forms.ModelChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelChoiceField</span></code></a> now includes the provided value in
the <code class="docutils literal notranslate"><span class="pre">params</span></code> argument of a raised
<a class="reference internal" href="../../ref/exceptions/#django.core.exceptions.ValidationError" title="django.core.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValidationError</span></code></a> for the <code class="docutils literal notranslate"><span class="pre">invalid_choice</span></code>
error message. This allows custom error messages to use the <code class="docutils literal notranslate"><span class="pre">%(value)s</span></code>
placeholder.</p></li>
<li><p><a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet" title="django.forms.formsets.BaseFormSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFormSet</span></code></a> now renders non-form errors with
an additional class of <code class="docutils literal notranslate"><span class="pre">nonform</span></code> to help distinguish them from
form-specific errors.</p></li>
<li><p><a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet" title="django.forms.formsets.BaseFormSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFormSet</span></code></a> now allows customizing the widget
used when deleting forms via
<a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet.can_delete" title="django.forms.formsets.BaseFormSet.can_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">can_delete</span></code></a> by setting the
<a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet.deletion_widget" title="django.forms.formsets.BaseFormSet.deletion_widget"><code class="xref py py-attr docutils literal notranslate"><span class="pre">deletion_widget</span></code></a> attribute or
overriding <a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet.get_deletion_widget" title="django.forms.formsets.BaseFormSet.get_deletion_widget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_deletion_widget()</span></code></a>
method.</p></li>
</ul>
</section>
<section id="s-internationalization">
<span id="internationalization"></span><h4>Internationalization<a class="headerlink" href="#internationalization" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added support and translations for the Malay language.</p></li>
</ul>
</section>
<section id="s-generic-views">
<span id="generic-views"></span><h4>Generic Views<a class="headerlink" href="#generic-views" title="Link to this heading">¶</a></h4>
<ul>
<li><p><a class="reference internal" href="../../ref/class-based-views/generic-editing/#django.views.generic.edit.DeleteView" title="django.views.generic.edit.DeleteView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeleteView</span></code></a> now uses
<a class="reference internal" href="../../ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin" title="django.views.generic.edit.FormMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">FormMixin</span></code></a>, allowing you to provide a
<a class="reference internal" href="../../ref/forms/api/#django.forms.Form" title="django.forms.Form"><code class="xref py py-class docutils literal notranslate"><span class="pre">Form</span></code></a> subclass, with a checkbox for example, to confirm
deletion. In addition, this allows <code class="docutils literal notranslate"><span class="pre">DeleteView</span></code> to function with
<a class="reference internal" href="../../ref/contrib/messages/#django.contrib.messages.views.SuccessMessageMixin" title="django.contrib.messages.views.SuccessMessageMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.messages.views.SuccessMessageMixin</span></code></a>.</p>
<p>In accordance with <code class="docutils literal notranslate"><span class="pre">FormMixin</span></code>, object deletion for POST requests is
handled in <code class="docutils literal notranslate"><span class="pre">form_valid()</span></code>. Custom delete logic in <code class="docutils literal notranslate"><span class="pre">delete()</span></code> handlers
should be moved to <code class="docutils literal notranslate"><span class="pre">form_valid()</span></code>, or a shared helper method, as needed.</p>
</li>
</ul>
</section>
<section id="s-logging">
<span id="logging"></span><h4>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The alias of the database used in an SQL call is now passed as extra context
along with each message to the <a class="reference internal" href="../../ref/logging/#django-db-logger"><span class="std std-ref">django.db.backends</span></a> logger.</p></li>
</ul>
</section>
<section id="s-management-commands">
<span id="management-commands"></span><h4>Management Commands<a class="headerlink" href="#management-commands" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../ref/django-admin/#django-admin-runserver"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">runserver</span></code></a> management command now supports the
<a class="reference internal" href="../../ref/django-admin/#cmdoption-skip-checks"><code class="xref std std-option docutils literal notranslate"><span class="pre">--skip-checks</span></code></a> option.</p></li>
<li><p>On PostgreSQL, <a class="reference internal" href="../../ref/django-admin/#django-admin-dbshell"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dbshell</span></code></a> now supports specifying a password file.</p></li>
<li><p>The <a class="reference internal" href="../../ref/django-admin/#django-admin-shell"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">shell</span></code></a> command now respects <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.__interactivehook__" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.__interactivehook__</span></code></a>
at startup. This allows loading shell history between interactive sessions.
As a consequence, <code class="docutils literal notranslate"><span class="pre">readline</span></code> is no longer loaded if running in <em>isolated</em>
mode.</p></li>
<li><p>The new <a class="reference internal" href="../../howto/custom-management-commands/#django.core.management.BaseCommand.suppressed_base_arguments" title="django.core.management.BaseCommand.suppressed_base_arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCommand.suppressed_base_arguments</span></code></a> attribute
allows suppressing unsupported default command options in the help output.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-startapp-exclude"><code class="xref std std-option docutils literal notranslate"><span class="pre">startapp</span> <span class="pre">--exclude</span></code></a> and <a class="reference internal" href="../../ref/django-admin/#cmdoption-startproject-exclude"><code class="xref std std-option docutils literal notranslate"><span class="pre">startproject</span> <span class="pre">--exclude</span></code></a>
options allow excluding directories from the template.</p></li>
</ul>
</section>
<section id="s-models">
<span id="models"></span><h4>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>New <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.contains" title="django.db.models.query.QuerySet.contains"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.contains(obj)</span></code></a> method returns
whether the queryset contains the given object. This tries to perform the
query in the simplest and fastest way possible.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">precision</span></code> argument of the
<a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.Round" title="django.db.models.functions.Round"><code class="xref py py-class docutils literal notranslate"><span class="pre">Round()</span></code></a> database function allows
specifying the number of decimal places after rounding.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.bulk_create()</span></code></a> now sets the primary key on objects when using
SQLite 3.35+.</p></li>
<li><p><a class="reference internal" href="../../ref/models/fields/#django.db.models.DurationField" title="django.db.models.DurationField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DurationField</span></code></a> now supports multiplying and
dividing by scalar values on SQLite.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.bulk_update" title="django.db.models.query.QuerySet.bulk_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.bulk_update()</span></code></a> now returns the number of objects updated.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/models/expressions/#django.db.models.Expression.empty_result_set_value" title="django.db.models.Expression.empty_result_set_value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Expression.empty_result_set_value</span></code></a> attribute allows
specifying a value to return when the function is used over an empty result
set.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">skip_locked</span></code> argument of <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code></a> is now
allowed on MariaDB 10.6+.</p></li>
<li><p><a class="reference internal" href="../../ref/models/lookups/#django.db.models.Lookup" title="django.db.models.Lookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lookup</span></code></a> expressions may now be used in <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code>
annotations, aggregations, and directly in filters.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/models/querysets/#aggregate-default"><span class="std std-ref">default</span></a> argument for built-in aggregates
allows specifying a value to be returned when the queryset (or grouping)
contains no entries, rather than <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</section>
<section id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../ref/middleware/#django.middleware.security.SecurityMiddleware" title="django.middleware.security.SecurityMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">SecurityMiddleware</span></code></a> now adds the
<a class="reference internal" href="../../ref/middleware/#cross-origin-opener-policy"><span class="std std-ref">Cross-Origin Opener Policy</span></a> header with a
value of <code class="docutils literal notranslate"><span class="pre">'same-origin'</span></code> to prevent cross-origin popups from sharing the
same browsing context. You can prevent this header from being added by
setting the <a class="reference internal" href="../../ref/settings/#std-setting-SECURE_CROSS_ORIGIN_OPENER_POLICY"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_CROSS_ORIGIN_OPENER_POLICY</span></code></a> setting to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</section>
<section id="s-signals">
<span id="signals"></span><h4>Signals<a class="headerlink" href="#signals" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <code class="docutils literal notranslate"><span class="pre">stdout</span></code> argument for <a class="reference internal" href="../../ref/signals/#django.db.models.signals.pre_migrate" title="django.db.models.signals.pre_migrate"><code class="xref py py-func docutils literal notranslate"><span class="pre">pre_migrate()</span></code></a>
and <a class="reference internal" href="../../ref/signals/#django.db.models.signals.post_migrate" title="django.db.models.signals.post_migrate"><code class="xref py py-func docutils literal notranslate"><span class="pre">post_migrate()</span></code></a> signals allows redirecting
output to a stream-like object. It should be preferred over
<a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.stdout" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/functions.html#print" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> when emitting verbose output in
order to allow proper capture when testing.</p></li>
</ul>
</section>
<section id="s-templates">
<span id="templates"></span><h4>Templates<a class="headerlink" href="#templates" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/templates/builtins/#std-templatefilter-floatformat"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">floatformat</span></code></a> template filter now allows using the <code class="docutils literal notranslate"><span class="pre">u</span></code> suffix to
force disabling localization.</p></li>
</ul>
</section>
<section id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <code class="docutils literal notranslate"><span class="pre">serialized_aliases</span></code> argument of
<a class="reference internal" href="../../topics/testing/advanced/#django.test.utils.setup_databases" title="django.test.utils.setup_databases"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.test.utils.setup_databases()</span></code></a> determines which
<a class="reference internal" href="../../ref/settings/#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a> aliases test databases should have their state
serialized to allow usage of the
<a class="reference internal" href="../../topics/testing/overview/#test-case-serialized-rollback"><span class="std std-ref">serialized_rollback</span></a> feature.</p></li>
<li><p>The <a class="reference internal" href="../../ref/django-admin/#cmdoption-test-buffer"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--buffer</span></code></a> option now supports parallel tests.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">logger</span></code> argument to <a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiscoverRunner</span></code></a>
allows a Python <a class="reference external" href="https://docs.python.org/3/library/logging.html#logger" title="(in Python v3.14)"><span class="xref std std-ref">logger</span></a> to be used for logging.</p></li>
<li><p>The new <a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner.log" title="django.test.runner.DiscoverRunner.log"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiscoverRunner.log()</span></code></a> method provides a way to log messages
that uses the <code class="docutils literal notranslate"><span class="pre">DiscoverRunner.logger</span></code>, or prints to the console if not set.</p></li>
<li><p><a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiscoverRunner</span></code></a> can now execute tests in a random
order using the <a class="reference internal" href="../../ref/django-admin/#cmdoption-test-shuffle"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--shuffle</span></code></a> option.</p></li>
<li><p>The <a class="reference internal" href="../../ref/django-admin/#cmdoption-test-parallel"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--parallel</span></code></a> option now supports the value <code class="docutils literal notranslate"><span class="pre">auto</span></code> to run
one test process for each processor core.</p></li>
<li><p><a class="reference internal" href="../../topics/testing/tools/#django.test.TestCase.captureOnCommitCallbacks" title="django.test.TestCase.captureOnCommitCallbacks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TestCase.captureOnCommitCallbacks()</span></code></a> now captures new callbacks added
while executing <a class="reference internal" href="../../topics/db/transactions/#django.db.transaction.on_commit" title="django.db.transaction.on_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">transaction.on_commit()</span></code></a> callbacks.</p></li>
</ul>
</section>
</section>
</section>
<section id="s-backwards-incompatible-changes-in-4-0">
<span id="s-backwards-incompatible-4-0"></span><span id="backwards-incompatible-changes-in-4-0"></span><span id="backwards-incompatible-4-0"></span><h2>Backwards incompatible changes in 4.0<a class="headerlink" href="#backwards-incompatible-changes-in-4-0" title="Link to this heading">¶</a></h2>
<section id="s-database-backend-api">
<span id="database-backend-api"></span><h3>Database backend API<a class="headerlink" href="#database-backend-api" title="Link to this heading">¶</a></h3>
<p>This section describes changes that may be needed in third-party database
backends.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.year_lookup_bounds_for_date_field()</span></code> and
<code class="docutils literal notranslate"><span class="pre">year_lookup_bounds_for_datetime_field()</span></code> methods now take the optional
<code class="docutils literal notranslate"><span class="pre">iso_year</span></code> argument in order to support bounds for ISO-8601 week-numbering
years.</p></li>
<li><p>The second argument of <code class="docutils literal notranslate"><span class="pre">DatabaseSchemaEditor._unique_sql()</span></code> and
<code class="docutils literal notranslate"><span class="pre">_create_unique_sql()</span></code> methods is now <code class="docutils literal notranslate"><span class="pre">fields</span></code> instead of <code class="docutils literal notranslate"><span class="pre">columns</span></code>.</p></li>
</ul>
</section>
<section id="s-id1">
<span id="id1"></span><h3><a class="reference internal" href="../../ref/contrib/gis/#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Support for PostGIS 2.3 is removed.</p></li>
<li><p>Support for GDAL 2.0 and GEOS 3.5 is removed.</p></li>
</ul>
</section>
<section id="s-dropped-support-for-postgresql-9-6">
<span id="dropped-support-for-postgresql-9-6"></span><h3>Dropped support for PostgreSQL 9.6<a class="headerlink" href="#dropped-support-for-postgresql-9-6" title="Link to this heading">¶</a></h3>
<p>Upstream support for PostgreSQL 9.6 ends in November 2021. Django 4.0 supports
PostgreSQL 10 and higher.</p>
<p>Also, the minimum supported version of <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> is increased from 2.5.4 to
2.8.4, as <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> 2.8.4 is the first release to support Python 3.8.</p>
</section>
<section id="s-dropped-support-for-oracle-12-2-and-18c">
<span id="dropped-support-for-oracle-12-2-and-18c"></span><h3>Dropped support for Oracle 12.2 and 18c<a class="headerlink" href="#dropped-support-for-oracle-12-2-and-18c" title="Link to this heading">¶</a></h3>
<p>Upstream support for Oracle 12.2 ends in March 2022 and for Oracle 18c it ends
in June 2021. Django 3.2 will be supported until April 2024. Django 4.0
officially supports Oracle 19c.</p>
</section>
<section id="s-csrf-trusted-origins-changes">
<span id="s-csrf-trusted-origins-changes-4-0"></span><span id="csrf-trusted-origins-changes"></span><span id="csrf-trusted-origins-changes-4-0"></span><h3><code class="docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code> changes<a class="headerlink" href="#csrf-trusted-origins-changes" title="Link to this heading">¶</a></h3>
<section id="s-format-change">
<span id="format-change"></span><h4>Format change<a class="headerlink" href="#format-change" title="Link to this heading">¶</a></h4>
<p>Values in the <a class="reference internal" href="../../ref/settings/#std-setting-CSRF_TRUSTED_ORIGINS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code></a> setting must include the scheme
(e.g. <code class="docutils literal notranslate"><span class="pre">'http://'</span></code> or <code class="docutils literal notranslate"><span class="pre">'https://'</span></code>) instead of only the hostname.</p>
<p>Also, values that started with a dot, must now also include an asterisk before
the dot. For example, change <code class="docutils literal notranslate"><span class="pre">'.example.com'</span></code> to <code class="docutils literal notranslate"><span class="pre">'https://*.example.com'</span></code>.</p>
<p>A system check detects any required changes.</p>
</section>
<section id="s-configuring-it-may-now-be-required">
<span id="configuring-it-may-now-be-required"></span><h4>Configuring it may now be required<a class="headerlink" href="#configuring-it-may-now-be-required" title="Link to this heading">¶</a></h4>
<p>As CSRF protection now consults the <code class="docutils literal notranslate"><span class="pre">Origin</span></code> header, you may need to set
<a class="reference internal" href="../../ref/settings/#std-setting-CSRF_TRUSTED_ORIGINS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code></a>, particularly if you allow requests from
subdomains by setting <a class="reference internal" href="../../ref/settings/#std-setting-CSRF_COOKIE_DOMAIN"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_COOKIE_DOMAIN</span></code></a> (or
<a class="reference internal" href="../../ref/settings/#std-setting-SESSION_COOKIE_DOMAIN"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SESSION_COOKIE_DOMAIN</span></code></a> if <a class="reference internal" href="../../ref/settings/#std-setting-CSRF_USE_SESSIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CSRF_USE_SESSIONS</span></code></a> is enabled) to
a value starting with a dot.</p>
</section>
</section>
<section id="s-securitymiddleware-no-longer-sets-the-x-xss-protection-header">
<span id="securitymiddleware-no-longer-sets-the-x-xss-protection-header"></span><h3><code class="docutils literal notranslate"><span class="pre">SecurityMiddleware</span></code> no longer sets the <code class="docutils literal notranslate"><span class="pre">X-XSS-Protection</span></code> header<a class="headerlink" href="#securitymiddleware-no-longer-sets-the-x-xss-protection-header" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../../ref/middleware/#django.middleware.security.SecurityMiddleware" title="django.middleware.security.SecurityMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">SecurityMiddleware</span></code></a> no longer sets the
<code class="docutils literal notranslate"><span class="pre">X-XSS-Protection</span></code> header if the <code class="docutils literal notranslate"><span class="pre">SECURE_BROWSER_XSS_FILTER</span></code> setting is
<code class="docutils literal notranslate"><span class="pre">True</span></code>. The setting is removed.</p>
<p>Most modern browsers don’t honor the <code class="docutils literal notranslate"><span class="pre">X-XSS-Protection</span></code> HTTP header. You can
use <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">Content-Security-Policy</a> without allowing <code class="docutils literal notranslate"><span class="pre">'unsafe-inline'</span></code> scripts
instead.</p>
<p>If you want to support legacy browsers and set the header, use this line in a
custom middleware:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;X-XSS-Protection&quot;</span><span class="p">,</span> <span class="s2">&quot;1; mode=block&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-migrations-autodetector-changes">
<span id="migrations-autodetector-changes"></span><h3>Migrations autodetector changes<a class="headerlink" href="#migrations-autodetector-changes" title="Link to this heading">¶</a></h3>
<p>The migrations autodetector now uses model states instead of model classes.
Also, migration operations for <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> fields no
longer specify attributes which were not passed to the fields during
initialization.</p>
<p>As a side-effect, running <code class="docutils literal notranslate"><span class="pre">makemigrations</span></code> might generate no-op
<code class="docutils literal notranslate"><span class="pre">AlterField</span></code> operations for <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> and <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> fields in
some cases.</p>
</section>
<section id="s-deleteview-changes">
<span id="deleteview-changes"></span><h3><code class="docutils literal notranslate"><span class="pre">DeleteView</span></code> changes<a class="headerlink" href="#deleteview-changes" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../ref/class-based-views/generic-editing/#django.views.generic.edit.DeleteView" title="django.views.generic.edit.DeleteView"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeleteView</span></code></a> now uses
<a class="reference internal" href="../../ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin" title="django.views.generic.edit.FormMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">FormMixin</span></code></a> to handle POST requests. As a
consequence, any custom deletion logic in <code class="docutils literal notranslate"><span class="pre">delete()</span></code> handlers should be
moved to <code class="docutils literal notranslate"><span class="pre">form_valid()</span></code>, or a shared helper method, if required.</p>
</section>
<section id="s-table-and-column-naming-scheme-changes-on-oracle">
<span id="table-and-column-naming-scheme-changes-on-oracle"></span><h3>Table and column naming scheme changes on Oracle<a class="headerlink" href="#table-and-column-naming-scheme-changes-on-oracle" title="Link to this heading">¶</a></h3>
<p>Django 4.0 inadvertently changed the table and column naming scheme on Oracle.
This causes errors for models and fields with names longer than 30 characters.
Unfortunately, renaming some Oracle tables and columns is required. Use the
upgrade script in <a class="extlink-ticket reference external" href="https://code.djangoproject.com/ticket/33789#comment:15">33789</a> to generate <code class="docutils literal notranslate"><span class="pre">RENAME</span></code>
statements to change naming scheme.</p>
</section>
<section id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">cx_Oracle</span></code> &lt; 7.0 is removed.</p></li>
<li><p>To allow serving a Django site on a subpath without changing the value of
<a class="reference internal" href="../../ref/settings/#std-setting-STATIC_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STATIC_URL</span></code></a>, the leading slash is removed from that setting (now
<code class="docutils literal notranslate"><span class="pre">'static/'</span></code>) in the default <a class="reference internal" href="../../ref/django-admin/#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startproject</span></code></a> template.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.AdminSite" title="django.contrib.admin.AdminSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">AdminSite</span></code></a> method for the admin <code class="docutils literal notranslate"><span class="pre">index</span></code>
view is no longer decorated with <code class="docutils literal notranslate"><span class="pre">never_cache</span></code> when accessed directly,
rather than via the recommended <code class="docutils literal notranslate"><span class="pre">AdminSite.urls</span></code> property, or
<code class="docutils literal notranslate"><span class="pre">AdminSite.get_urls()</span></code> method.</p></li>
<li><p>Unsupported operations on a sliced queryset now raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.test.runner.reorder_suite()</span></code> function is renamed
to <code class="docutils literal notranslate"><span class="pre">reorder_tests()</span></code>. It now accepts an iterable of tests rather than a
test suite, and returns an iterator of tests.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">FileSystemStorage.delete()</span></code> with an empty <code class="docutils literal notranslate"><span class="pre">name</span></code> now raises
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">EmailMultiAlternatives.attach_alternative()</span></code> or
<code class="docutils literal notranslate"><span class="pre">EmailMessage.attach()</span></code> with an invalid <code class="docutils literal notranslate"><span class="pre">content</span></code> or <code class="docutils literal notranslate"><span class="pre">mimetype</span></code>
arguments now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>.</p></li>
<li><p><a class="reference internal" href="../../topics/testing/tools/#django.test.SimpleTestCase.assertHTMLEqual" title="django.test.SimpleTestCase.assertHTMLEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertHTMLEqual()</span></code></a> no longer considers a
non-boolean attribute without a value equal to an attribute with the same
name and value.</p></li>
<li><p>Tests that fail to load, for example due to syntax errors, now always match
when using <a class="reference internal" href="../../ref/django-admin/#cmdoption-test-tag"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--tag</span></code></a>.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.contrib.admin.utils.lookup_needs_distinct()</span></code>
function is renamed to <code class="docutils literal notranslate"><span class="pre">lookup_spawns_duplicates()</span></code>.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">HttpRequest.get_raw_uri()</span></code> method is removed. The
<a class="reference internal" href="../../ref/request-response/#django.http.HttpRequest.build_absolute_uri" title="django.http.HttpRequest.build_absolute_uri"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpRequest.build_absolute_uri()</span></code></a> method may be a suitable alternative.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">object</span></code> argument of undocumented <code class="docutils literal notranslate"><span class="pre">ModelAdmin.log_addition()</span></code>,
<code class="docutils literal notranslate"><span class="pre">log_change()</span></code>, and <code class="docutils literal notranslate"><span class="pre">log_deletion()</span></code> methods is renamed to <code class="docutils literal notranslate"><span class="pre">obj</span></code>.</p></li>
<li><p><a class="reference internal" href="../../ref/utils/#django.utils.feedgenerator.RssFeed" title="django.utils.feedgenerator.RssFeed"><code class="xref py py-class docutils literal notranslate"><span class="pre">RssFeed</span></code></a>,
<a class="reference internal" href="../../ref/utils/#django.utils.feedgenerator.Atom1Feed" title="django.utils.feedgenerator.Atom1Feed"><code class="xref py py-class docutils literal notranslate"><span class="pre">Atom1Feed</span></code></a>, and their subclasses now emit
elements with no content as self-closing tags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NodeList.render()</span></code> no longer casts the output of <code class="docutils literal notranslate"><span class="pre">render()</span></code> method for
individual nodes to a string. <code class="docutils literal notranslate"><span class="pre">Node.render()</span></code> should always return a string
as documented.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">where_class</span></code> property of <code class="docutils literal notranslate"><span class="pre">django.db.models.sql.query.Query</span></code> and the
<code class="docutils literal notranslate"><span class="pre">where_class</span></code> argument to the private <code class="docutils literal notranslate"><span class="pre">get_extra_restriction()</span></code> method of
<code class="docutils literal notranslate"><span class="pre">ForeignObject</span></code> and <code class="docutils literal notranslate"><span class="pre">ForeignObjectRel</span></code> are removed. If needed, initialize
<code class="docutils literal notranslate"><span class="pre">django.db.models.sql.where.WhereNode</span></code> instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">filter_clause</span></code> argument of the undocumented <code class="docutils literal notranslate"><span class="pre">Query.add_filter()</span></code>
method is replaced by two positional arguments <code class="docutils literal notranslate"><span class="pre">filter_lhs</span></code> and
<code class="docutils literal notranslate"><span class="pre">filter_rhs</span></code>.</p></li>
<li><p><a class="reference internal" href="../../ref/middleware/#django.middleware.csrf.CsrfViewMiddleware" title="django.middleware.csrf.CsrfViewMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CsrfViewMiddleware</span></code></a> now uses
<code class="docutils literal notranslate"><span class="pre">request.META['CSRF_COOKIE_NEEDS_UPDATE']</span></code> in place of
<code class="docutils literal notranslate"><span class="pre">request.META['CSRF_COOKIE_USED']</span></code>, <code class="docutils literal notranslate"><span class="pre">request.csrf_cookie_needs_reset</span></code>,
and <code class="docutils literal notranslate"><span class="pre">response.csrf_cookie_set</span></code> to track whether the CSRF cookie should be
sent. This is an undocumented, private API.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">TRANSLATOR_COMMENT_MARK</span></code> constant is moved from
<code class="docutils literal notranslate"><span class="pre">django.template.base</span></code> to <code class="docutils literal notranslate"><span class="pre">django.utils.translation.template</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">real_apps</span></code> argument of the undocumented
<code class="docutils literal notranslate"><span class="pre">django.db.migrations.state.ProjectState.__init__()</span></code> method must now be a
set if provided.</p></li>
<li><p><a class="reference internal" href="../../ref/forms/widgets/#django.forms.RadioSelect" title="django.forms.RadioSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">RadioSelect</span></code></a> and
<a class="reference internal" href="../../ref/forms/widgets/#django.forms.CheckboxSelectMultiple" title="django.forms.CheckboxSelectMultiple"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckboxSelectMultiple</span></code></a> widgets are now rendered in
<code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> tags so they are announced more concisely by screen readers. If you
need the previous behavior, <a class="reference internal" href="../../ref/forms/renderers/#overriding-built-in-widget-templates"><span class="std std-ref">override the widget template</span></a> with the appropriate template from
Django 3.2.</p></li>
<li><p>The <a class="reference internal" href="../../ref/templates/builtins/#std-templatefilter-floatformat"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">floatformat</span></code></a> template filter no longer depends on the
<code class="docutils literal notranslate"><span class="pre">USE_L10N</span></code> setting and always returns localized output. Use the <code class="docutils literal notranslate"><span class="pre">u</span></code>
suffix to disable localization.</p></li>
<li><p>The default value of the <code class="docutils literal notranslate"><span class="pre">USE_L10N</span></code> setting is changed to <code class="docutils literal notranslate"><span class="pre">True</span></code>. See the
<a class="reference internal" href="#use-l10n-deprecation"><span class="std std-ref">Localization section</span></a> above for more details.</p></li>
<li><p>As part of the <a class="reference internal" href="#whats-new-4-0"><span class="std std-ref">move to zoneinfo</span></a>,
<code class="docutils literal notranslate"><span class="pre">django.utils.timezone.utc</span></code> is changed to alias
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timezone.utc" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code></a>.</p></li>
<li><p>The minimum supported version of <code class="docutils literal notranslate"><span class="pre">asgiref</span></code> is increased from 3.3.2 to
3.4.1.</p></li>
</ul>
</section>
</section>
<section id="s-features-deprecated-in-4-0">
<span id="s-deprecated-features-4-0"></span><span id="features-deprecated-in-4-0"></span><span id="deprecated-features-4-0"></span><h2>Features deprecated in 4.0<a class="headerlink" href="#features-deprecated-in-4-0" title="Link to this heading">¶</a></h2>
<section id="s-use-of-pytz-time-zones">
<span id="use-of-pytz-time-zones"></span><h3>Use of <code class="docutils literal notranslate"><span class="pre">pytz</span></code> time zones<a class="headerlink" href="#use-of-pytz-time-zones" title="Link to this heading">¶</a></h3>
<p>As part of the <a class="reference internal" href="#whats-new-4-0"><span class="std std-ref">move to zoneinfo</span></a>, use of <code class="docutils literal notranslate"><span class="pre">pytz</span></code> time
zones is deprecated.</p>
<p>Accordingly, the <code class="docutils literal notranslate"><span class="pre">is_dst</span></code> arguments to the following are also deprecated:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.datetimes" title="django.db.models.query.QuerySet.datetimes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.db.models.query.QuerySet.datetimes()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.Trunc" title="django.db.models.functions.Trunc"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.Trunc()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncSecond" title="django.db.models.functions.TruncSecond"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncSecond()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncMinute" title="django.db.models.functions.TruncMinute"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncMinute()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncHour" title="django.db.models.functions.TruncHour"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncHour()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncDay" title="django.db.models.functions.TruncDay"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncDay()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncWeek" title="django.db.models.functions.TruncWeek"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncWeek()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncMonth" title="django.db.models.functions.TruncMonth"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncMonth()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncQuarter" title="django.db.models.functions.TruncQuarter"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncQuarter()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncYear" title="django.db.models.functions.TruncYear"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.db.models.functions.TruncYear()</span></code></a></p></li>
<li><p><a class="reference internal" href="../../ref/utils/#django.utils.timezone.make_aware" title="django.utils.timezone.make_aware"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.timezone.make_aware()</span></code></a></p></li>
</ul>
<p>Support for use of <code class="docutils literal notranslate"><span class="pre">pytz</span></code> will be removed in Django 5.0.</p>
</section>
<section id="s-time-zone-support">
<span id="time-zone-support"></span><h3>Time zone support<a class="headerlink" href="#time-zone-support" title="Link to this heading">¶</a></h3>
<p>In order to follow good practice, the default value of the <a class="reference internal" href="../../ref/settings/#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a>
setting will change from <code class="docutils literal notranslate"><span class="pre">False</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and time zone support will be
enabled by default, in Django 5.0.</p>
<p>Note that the default <code class="file docutils literal notranslate"><span class="pre">settings.py</span></code> file created by
<a class="reference internal" href="../../ref/django-admin/#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">django-admin</span> <span class="pre">startproject</span></code></a> includes
<a class="reference internal" href="../../ref/settings/#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span> <span class="pre">=</span> <span class="pre">True</span></code></a> since Django 1.4.</p>
<p>You can set <code class="docutils literal notranslate"><span class="pre">USE_TZ</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> in your project settings before then to
opt-out.</p>
</section>
<section id="s-localization">
<span id="s-use-l10n-deprecation"></span><span id="localization"></span><span id="use-l10n-deprecation"></span><h3>Localization<a class="headerlink" href="#localization" title="Link to this heading">¶</a></h3>
<p>In order to follow good practice, the default value of the <code class="docutils literal notranslate"><span class="pre">USE_L10N</span></code> setting
is changed from <code class="docutils literal notranslate"><span class="pre">False</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Moreover <code class="docutils literal notranslate"><span class="pre">USE_L10N</span></code> is deprecated as of this release. Starting with Django
5.0, by default, any date or number displayed by Django will be localized.</p>
<p>The <a class="reference internal" href="../../topics/i18n/formatting/#std-templatetag-localize"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">localize</span> <span class="pre">%}</span></code></a> tag and the <a class="reference internal" href="../../topics/i18n/formatting/#std-templatefilter-localize"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">localize</span></code></a>/
<a class="reference internal" href="../../topics/i18n/formatting/#std-templatefilter-unlocalize"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">unlocalize</span></code></a> filters will still be honored by Django.</p>
</section>
<section id="s-id2">
<span id="id2"></span><h3>Miscellaneous<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SERIALIZE</span></code> test setting is deprecated as it can be inferred from the
<a class="reference internal" href="../../topics/testing/tools/#django.test.TestCase.databases" title="django.test.TestCase.databases"><code class="xref py py-attr docutils literal notranslate"><span class="pre">databases</span></code></a> with the
<a class="reference internal" href="../../topics/testing/overview/#test-case-serialized-rollback"><span class="std std-ref">serialized_rollback</span></a> option enabled.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.utils.baseconv</span></code> module is deprecated.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.utils.datetime_safe</span></code> module is deprecated.</p></li>
<li><p>The default sitemap protocol for sitemaps built outside the context of a
request will change from <code class="docutils literal notranslate"><span class="pre">'http'</span></code> to <code class="docutils literal notranslate"><span class="pre">'https'</span></code> in Django 5.0.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">extra_tests</span></code> argument for <a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner.build_suite" title="django.test.runner.DiscoverRunner.build_suite"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiscoverRunner.build_suite()</span></code></a> and
<a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner.run_tests" title="django.test.runner.DiscoverRunner.run_tests"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DiscoverRunner.run_tests()</span></code></a> is deprecated.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/postgres/aggregates/#django.contrib.postgres.aggregates.ArrayAgg" title="django.contrib.postgres.aggregates.ArrayAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayAgg</span></code></a>,
<a class="reference internal" href="../../ref/contrib/postgres/aggregates/#django.contrib.postgres.aggregates.JSONBAgg" title="django.contrib.postgres.aggregates.JSONBAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONBAgg</span></code></a>, and
<a class="reference internal" href="../../ref/contrib/postgres/aggregates/#django.contrib.postgres.aggregates.StringAgg" title="django.contrib.postgres.aggregates.StringAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringAgg</span></code></a> aggregates will return
<code class="docutils literal notranslate"><span class="pre">None</span></code> when there are no rows instead of <code class="docutils literal notranslate"><span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">[]</span></code>, and <code class="docutils literal notranslate"><span class="pre">''</span></code>
respectively in Django 5.0. If you need the previous behavior, explicitly set
<code class="docutils literal notranslate"><span class="pre">default</span></code> to <code class="docutils literal notranslate"><span class="pre">Value([])</span></code>, <code class="docutils literal notranslate"><span class="pre">Value('[]')</span></code>, or <code class="docutils literal notranslate"><span class="pre">Value('')</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.contrib.gis.admin.GeoModelAdmin</span></code> and <code class="docutils literal notranslate"><span class="pre">OSMGeoAdmin</span></code> classes
are deprecated. Use <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin" title="django.contrib.admin.ModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelAdmin</span></code></a> and
<a class="reference internal" href="../../ref/contrib/gis/admin/#django.contrib.gis.admin.GISModelAdmin" title="django.contrib.gis.admin.GISModelAdmin"><code class="xref py py-class docutils literal notranslate"><span class="pre">GISModelAdmin</span></code></a> instead.</p></li>
<li><p>Since form rendering now uses the template engine, the undocumented
<code class="docutils literal notranslate"><span class="pre">BaseForm._html_output()</span></code> helper method is deprecated.</p></li>
<li><p>The ability to return a <code class="docutils literal notranslate"><span class="pre">str</span></code> from <code class="docutils literal notranslate"><span class="pre">ErrorList</span></code> and <code class="docutils literal notranslate"><span class="pre">ErrorDict</span></code> is
deprecated. It is expected these methods return a <code class="docutils literal notranslate"><span class="pre">SafeString</span></code>.</p></li>
</ul>
</section>
</section>
<section id="s-features-removed-in-4-0">
<span id="features-removed-in-4-0"></span><h2>Features removed in 4.0<a class="headerlink" href="#features-removed-in-4-0" title="Link to this heading">¶</a></h2>
<p>These features have reached the end of their deprecation cycle and are removed
in Django 4.0.</p>
<p>See <a class="reference internal" href="../3.0/#deprecated-features-3-0"><span class="std std-ref">Features deprecated in 3.0</span></a> for details on these changes, including how
to remove usage of these features.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.http.urlquote()</span></code>, <code class="docutils literal notranslate"><span class="pre">urlquote_plus()</span></code>, <code class="docutils literal notranslate"><span class="pre">urlunquote()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">urlunquote_plus()</span></code> are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.encoding.force_text()</span></code> and <code class="docutils literal notranslate"><span class="pre">smart_text()</span></code> are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.translation.ugettext()</span></code>, <code class="docutils literal notranslate"><span class="pre">ugettext_lazy()</span></code>,
<code class="docutils literal notranslate"><span class="pre">ugettext_noop()</span></code>, <code class="docutils literal notranslate"><span class="pre">ungettext()</span></code>, and <code class="docutils literal notranslate"><span class="pre">ungettext_lazy()</span></code> are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.views.i18n.set_language()</span></code> doesn’t set the user language in
<code class="docutils literal notranslate"><span class="pre">request.session</span></code> (key <code class="docutils literal notranslate"><span class="pre">_language</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alias=None</span></code> is required in the signature of
<code class="docutils literal notranslate"><span class="pre">django.db.models.Expression.get_group_by_cols()</span></code> subclasses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.text.unescape_entities()</span></code> is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.http.is_safe_url()</span></code> is removed.</p></li>
</ul>
<p>See <a class="reference internal" href="../3.1/#deprecated-features-3-1"><span class="std std-ref">Features deprecated in 3.1</span></a> for details on these changes, including how
to remove usage of these features.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">PASSWORD_RESET_TIMEOUT_DAYS</span></code> setting is removed.</p></li>
<li><p>The <a class="reference internal" href="../../ref/models/querysets/#std-fieldlookup-isnull"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isnull</span></code></a> lookup no longer allows using non-boolean values as the
right-hand side.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.db.models.query_utils.InvalidQuery</span></code> exception class is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django-admin.py</span></code> entry point is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">HttpRequest.is_ajax()</span></code> method is removed.</p></li>
<li><p>Support for the pre-Django 3.1 encoding format of cookies values used by
<code class="docutils literal notranslate"><span class="pre">django.contrib.messages.storage.cookie.CookieStorage</span></code> is removed.</p></li>
<li><p>Support for the pre-Django 3.1 password reset tokens in the admin site (that
use the SHA-1 hashing algorithm) is removed.</p></li>
<li><p>Support for the pre-Django 3.1 encoding format of sessions is removed.</p></li>
<li><p>Support for the pre-Django 3.1 <code class="docutils literal notranslate"><span class="pre">django.core.signing.Signer</span></code> signatures
(encoded with the SHA-1 algorithm) is removed.</p></li>
<li><p>Support for the pre-Django 3.1 <code class="docutils literal notranslate"><span class="pre">django.core.signing.dumps()</span></code> signatures
(encoded with the SHA-1 algorithm) in <code class="docutils literal notranslate"><span class="pre">django.core.signing.loads()</span></code> is
removed.</p></li>
<li><p>Support for the pre-Django 3.1 user sessions (that use the SHA-1 algorithm)
is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_response</span></code> argument for
<code class="docutils literal notranslate"><span class="pre">django.utils.deprecation.MiddlewareMixin.__init__()</span></code> is required and
doesn’t accept <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">providing_args</span></code> argument for <code class="docutils literal notranslate"><span class="pre">django.dispatch.Signal</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">length</span></code> argument for <code class="docutils literal notranslate"><span class="pre">django.utils.crypto.get_random_string()</span></code> is
required.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> message for <code class="docutils literal notranslate"><span class="pre">ModelMultipleChoiceField</span></code> is removed.</p></li>
<li><p>Support for passing raw column aliases to <code class="docutils literal notranslate"><span class="pre">QuerySet.order_by()</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">NullBooleanField</span></code> model field is removed, except for support in
historical migrations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.conf.urls.url()</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.JSONField</span></code> model field is removed,
except for support in historical migrations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.jsonb.KeyTransform</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.jsonb.KeyTextTransform</span></code> are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.forms.JSONField</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">ifequal</span> <span class="pre">%}</span></code> and <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">ifnotequal</span> <span class="pre">%}</span></code> template tags are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DEFAULT_HASHING_ALGORITHM</span></code> transitional setting is removed.</p></li>
</ul>
</section>
</section>

    </article>
  

  
    <nav class="browse-horizontal" aria-labelledby="browse-horizontal-header">
      <span id="browse-horizontal-header" class="visuallyhidden">Previous page and next page</span>
      
        <div class="left"><a rel="prev" href="../4.0.1/"><i class="icon icon-chevron-left"></i> Django 4.0.1 release notes</a></div>
      
      
        <div class="right"><a rel="next" href="../3.2.25/">Django 3.2.25 release notes <i class="icon icon-chevron-right"></i></a></div>
      
    </nav>
  


        <a href="#top" class="backtotop"><i class="icon icon-chevron-up"></i> Back to Top</a>
      </main>

      
  <div role="complementary">
    <h2 class="visuallyhidden" id="aside-header">Additional Information</h2>

    


  <div class="fundraising-sidebar">
    <h3>Support Django!</h3>

    <div class="small-heart">
      <img src="https://static.djangoproject.com/img/fundraising-heart.cd6bb84ffd33.svg" alt="Support Django!" />
    </div>

    <div class="small-cta">
      <ul class="list-links-small">
        <li><a href="https://www.djangoproject.com/fundraising/">
          Agence Debord donated to the Django Software Foundation to support Django development. Donate today!
        </a></li>
      </ul>
    </div>
  </div>



    
      <h3>Contents</h3>
      
        <ul>
<li><a class="reference internal" href="#">Django 4.0 release notes</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python compatibility</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-4-0">What’s new in Django 4.0</a><ul>
<li><a class="reference internal" href="#zoneinfo-default-timezone-implementation"><code class="docutils literal notranslate"><span class="pre">zoneinfo</span></code> default timezone implementation</a></li>
<li><a class="reference internal" href="#functional-unique-constraints">Functional unique constraints</a></li>
<li><a class="reference internal" href="#scrypt-password-hasher"><code class="docutils literal notranslate"><span class="pre">scrypt</span></code> password hasher</a></li>
<li><a class="reference internal" href="#redis-cache-backend">Redis cache backend</a></li>
<li><a class="reference internal" href="#template-based-form-rendering">Template based form rendering</a></li>
<li><a class="reference internal" href="#minor-features">Minor features</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-admindocs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admindocs</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#csrf">CSRF</a></li>
<li><a class="reference internal" href="#forms">Forms</a></li>
<li><a class="reference internal" href="#internationalization">Internationalization</a></li>
<li><a class="reference internal" href="#generic-views">Generic Views</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#management-commands">Management Commands</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requests and Responses</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-4-0">Backwards incompatible changes in 4.0</a><ul>
<li><a class="reference internal" href="#database-backend-api">Database backend API</a></li>
<li><a class="reference internal" href="#id1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-9-6">Dropped support for PostgreSQL 9.6</a></li>
<li><a class="reference internal" href="#dropped-support-for-oracle-12-2-and-18c">Dropped support for Oracle 12.2 and 18c</a></li>
<li><a class="reference internal" href="#csrf-trusted-origins-changes"><code class="docutils literal notranslate"><span class="pre">CSRF_TRUSTED_ORIGINS</span></code> changes</a><ul>
<li><a class="reference internal" href="#format-change">Format change</a></li>
<li><a class="reference internal" href="#configuring-it-may-now-be-required">Configuring it may now be required</a></li>
</ul>
</li>
<li><a class="reference internal" href="#securitymiddleware-no-longer-sets-the-x-xss-protection-header"><code class="docutils literal notranslate"><span class="pre">SecurityMiddleware</span></code> no longer sets the <code class="docutils literal notranslate"><span class="pre">X-XSS-Protection</span></code> header</a></li>
<li><a class="reference internal" href="#migrations-autodetector-changes">Migrations autodetector changes</a></li>
<li><a class="reference internal" href="#deleteview-changes"><code class="docutils literal notranslate"><span class="pre">DeleteView</span></code> changes</a></li>
<li><a class="reference internal" href="#table-and-column-naming-scheme-changes-on-oracle">Table and column naming scheme changes on Oracle</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-4-0">Features deprecated in 4.0</a><ul>
<li><a class="reference internal" href="#use-of-pytz-time-zones">Use of <code class="docutils literal notranslate"><span class="pre">pytz</span></code> time zones</a></li>
<li><a class="reference internal" href="#time-zone-support">Time zone support</a></li>
<li><a class="reference internal" href="#localization">Localization</a></li>
<li><a class="reference internal" href="#id2">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-4-0">Features removed in 4.0</a></li>
</ul>
</li>
</ul>

      
    

    
      <nav aria-labelledby="browse-header">
        <h3 id="browse-header">Browse</h3>
        <ul>
          
            
              <li>Prev: <a rel="prev" href="../4.0.1/">Django 4.0.1 release notes</a></li>
            
            
              <li>Next: <a rel="next" href="../3.2.25/">Django 3.2.25 release notes</a></li>
            
            <li><a href="https://docs.djangoproject.com/en/6.0/contents/">Table of contents</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/genindex/">General Index</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/py-modindex/">Python Module Index</a></li>
            
          
        </ul>
      </nav>
    

    
      <nav aria-labelledby="breadcrumbs-header">
        <h3 id="breadcrumbs-header">You are here:</h3>
        <ul>
          <li>
            <a href="https://docs.djangoproject.com/en/6.0/">Django 6.0 documentation</a>
            
              <ul><li><a href="../">Release notes</a>
            
            <ul><li>Django 4.0 release notes</li></ul>
            </li></ul>
          </li>
        </ul>
      </nav>
    

    
      <section aria-labelledby="getting-help-sidebar">
        <h3 id="getting-help-sidebar">Getting help</h3>
        <dl class="list-links">
          <dt><a href="https://docs.djangoproject.com/en/6.0/faq/">FAQ</a></dt>
          <dd>Try the FAQ — it's got answers to many common questions.</dd>

          <dt><a href="/en/stable/genindex/">Index</a>, <a href="/en/stable/py-modindex/">Module Index</a>, or <a href="/en/stable/contents/">Table of Contents</a></dt>
          <dd>Handy when looking for specific information.</dd>

          <dt><a href="https://chat.djangoproject.com">Django Discord Server</a></dt>
          <dd>Join the Django Discord Community.</dd>

          <dt><a href="https://forum.djangoproject.com/">Official Django Forum</a></dt>
          <dd>Join the community on the Django Forum.</dd>

          <dt><a href="https://code.djangoproject.com/">Ticket tracker</a></dt>
          <dd>Report bugs with Django or Django documentation in our ticket tracker.</dd>
        </dl>
      </section>
    

    
      <section aria-labelledby="links-wrapper-header">
        <h3 id="links-wrapper-header">Download:</h3>
        <p>
          Offline (Django 6.0):
          <a href="https://media.djangoproject.com/docs/django-docs-6.0-en.zip">HTML</a> |
          <a href="https://media.readthedocs.org/pdf/django/6.0.x/django.pdf">PDF</a> |
          <a href="https://media.readthedocs.org/epub/django/6.0.x/django.epub">ePub</a>
          <br>
          <span class="quiet">
            Provided by <a href="https://readthedocs.org/">Read the Docs</a>.
          </span>
        </p>
      </section>
    

    
  <div class="corporate-members">
    <h3>Diamond and Platinum Members</h3>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://sentry.io/for/django/" title="Sentry">
            <img src="https://media.djangoproject.com/cache/7a/f9/7af9c770dc49465739a82c91a0eb3d51.png" alt="Sentry" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>Sentry</strong></li>
            <li><a href="https://sentry.io/for/django/" title="Sentry">
              Monitor your Django Code
Resolve performance bottlenecks and errors using monitoring, replays, logs and Seer an AI agent for debugging.
            </a></li>
          </ul>
        </div>
      </div>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://jb.gg/ybja10" title="JetBrains">
            <img src="https://media.djangoproject.com/cache/c0/ea/c0ea128467983e64aab91cd27e7918c0.png" alt="JetBrains" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>JetBrains</strong></li>
            <li><a href="https://jb.gg/ybja10" title="JetBrains">
              JetBrains delivers intelligent software solutions that make developers more productive by simplifying their challenging tasks, automating the routine, and helping them adopt the best development practices. PyCharm is the Python IDE for Professional Developers by JetBrains providing a complete set of tools for productive Python, Web and scientific development.
            </a></li>
          </ul>
        </div>
      </div>
    
  </div>


  </div>

      

    </div>

     
     

    
    
    

    <!-- SVGs -->
    <svg xmlns="http://www.w3.org/2000/svg">
      <symbol viewBox="0 0 24 24" id="icon-auto"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2V4a8 8 0 1 0 0 16z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-moon"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-sun"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol>
    </svg>
    <!-- END SVGs -->

    
      

<footer>
  <div class="subfooter">
    <div class="container">
      <h2 class="visuallyhidden">Django Links</h2>
      <div class="column-container">
        <div class="col-learn-more">
          <h3>Learn More</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/start/overview/">About Django</a></li>
            
            <li><a href="https://www.djangoproject.com/start/">Getting Started with Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/teams/">Team Organization</a></li>
            <li><a href="https://www.djangoproject.com/foundation/">Django Software Foundation</a></li>
            <li><a href="https://www.djangoproject.com/conduct/">Code of Conduct</a></li>
            <li><a href="https://www.djangoproject.com/diversity/">Diversity Statement</a></li>
          </ul>
        </div>

        <div class="col-get-involved">
          <h3>Get Involved</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/community/">Join a Group</a></li>
            <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/">Contribute
              to Django</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/">Submit
              a Bug</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/security/#reporting-security-issues">Report
              a Security Issue</a></li>
            <li><a href="https://www.djangoproject.com/foundation/individual-members/">Individual membership</a></li>
          </ul>
        </div>

        <div class="col-get-help">
          <h3>Get Help</h3>
          <ul>
            <li><a href="https://docs.djangoproject.com/en/stable/faq/">Getting Help FAQ</a>
            </li>
            <li><a href="https://chat.djangoproject.com" target="_blank">Django Discord</a></li>
            <li><a href="https://forum.djangoproject.com/" target="_blank">Official Django Forum</a></li>
          </ul>
        </div>

        <div class="col-follow-us">
          <h3>Follow Us</h3>
          <ul>
            <li><a href="https://github.com/django">GitHub</a></li>
            <li><a href="https://x.com/djangoproject">X</a></li>
            <li><a href="https://fosstodon.org/@django" rel="me">Fediverse (Mastodon)</a></li>
            <li><a href="https://bsky.app/profile/djangoproject.com">Bluesky</a></li>
            <li><a href="https://www.linkedin.com/company/django-software-foundation">LinkedIn</a></li>
            <li><a href="https://www.djangoproject.com/rss/weblog/">News RSS</a></li>
          </ul>
        </div>

        <div class="col-support-us">
          <h3>Support Us</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/fundraising/">Sponsor Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/corporate-membership/">Corporate membership</a></li>
            <li><a href="https://django.threadless.com/" target="_blank">Official merchandise store</a></li>
            <li><a href="https://www.djangoproject.com/foundation/donate/#benevity-giving">Benevity Workplace Giving Program</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/">Django</a>
      </div>
      <ul class="thanks">
        <li>
          <span>Hosting by</span> <a class="in-kind-donors" href="https://www.djangoproject.com/fundraising/#in-kind-donors">In-kind
            donors</a>
        </li>
        <li class="design"><span>Design by</span> <a class="threespot" href="https://www.threespot.com">Threespot</a>
          <span class="ampersand">&amp;</span> <a class="andrevv" href="http://andrevv.com/">andrevv</a></li>
      </ul>
      <p class="copyright">&copy; 2005-2025
        <a href="https://www.djangoproject.com/foundation/"> Django Software
          Foundation</a> and individual contributors. Django is a
        <a href="https://www.djangoproject.com/trademarks/">registered
          trademark</a> of the Django Software Foundation.
      </p>
    </div>
  </div>

</footer>

    

    
  


    
      
      <script>
        function extless(input) {
          return input.replace(/(.*)\.[^.]+$/, '$1');
        }
        var require = {
          shim: {
            'jquery': [],
            'stripe': {
              exports: 'Stripe'
            }
          },
          paths: {
            "jquery": extless("https://static.djangoproject.com/js/lib/jquery.min.5790ead7ad3b.js"),
            "mod/list-collapsing": extless("https://static.djangoproject.com/js/mod/list-collapsing.2d844151b2ec.js"),
            "mod/stripe-change-card": extless("https://static.djangoproject.com/js/mod/stripe-change-card.eaa0afc324e9.js"),
            "mod/switch-dark-mode": extless("https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"),
            "stripe-checkout": "https://checkout.stripe.com/checkout",
            "stripe": "https://js.stripe.com/v3/?" // ? needed due to require.js
          }
        };
      </script>
      <script data-main="https://static.djangoproject.com/js/main.8677b21133eb.js" src="https://static.djangoproject.com/js/lib/require.177879fbe7dd.js"></script>
      <script src="https://static.djangoproject.com/js/djangoproject.15c016c8c3a7.js"></script>
    
  </body>
</html>
