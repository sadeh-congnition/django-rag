<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Django Software Foundation" />
    <meta name="keywords" content="Python, Django, framework, open-source" />
    <meta name="description" content="" />
    <meta name="fediverse:creator" content="@django@fosstodon.org" />
    
  
    
      
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/en/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="el"
          href="https://docs.djangoproject.com/el/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="en"
          href="https://docs.djangoproject.com/en/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="es"
          href="https://docs.djangoproject.com/es/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="fr"
          href="https://docs.djangoproject.com/fr/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="id"
          href="https://docs.djangoproject.com/id/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="it"
          href="https://docs.djangoproject.com/it/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="ja"
          href="https://docs.djangoproject.com/ja/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="ko"
          href="https://docs.djangoproject.com/ko/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="pl"
          href="https://docs.djangoproject.com/pl/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="pt-br"
          href="https://docs.djangoproject.com/pt-br/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="sv"
          href="https://docs.djangoproject.com/sv/6.0/releases/4.1/">
  
    
      
    
    <link rel="alternate"
          hreflang="zh-hans"
          href="https://docs.djangoproject.com/zh-hans/6.0/releases/4.1/">
  

  <link rel="search"
        type="application/opensearchdescription+xml"
        href="https://docs.djangoproject.com/en/6.0/search/description/"
        title="Django documentation">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="https://static.djangoproject.com/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="https://static.djangoproject.com/img/icon-tile.b01ac0ef9f67.png">
    <meta name="theme-color" content="#0C4B33">

    
      <meta property="og:title" content="Django 4.1 release notes | Django documentation" />
      <meta property="og:description" content="The web framework for perfectionists with deadlines." />
      <meta property="og:image" content="https://static.djangoproject.com/img/logos/django-logo-negative.1d528e2cb5fb.png" />
      <meta property="og:image:alt" content="Django logo" />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="546" />
      <meta property="og:image:type" content="image/png"/>
      <meta property="og:url" content="https://docs.djangoproject.com/en/6.0/releases/4.1/" />
      <meta property="og:site_name" content="Django Project" />

      <meta property="twitter:creator" content="djangoproject" />
      <meta property="twitter:site" content="djangoproject" />
      <meta property="twitter:card" content="summary">
    

    <title>Django 4.1 release notes | Django documentation | Django</title>

    <link rel="stylesheet" href="https://static.djangoproject.com/css/output.7f12b704d16e.css" >

    <script src="https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"></script>
    
  </head>

  <body id="generic" class="">

    <a href="#main-content" class="skip-link">Skip to main content</a>
    

<header id="top">
  <div class="container container--flex--wrap--mobile">
    <a class="logo" href="https://www.djangoproject.com/">Django</a>
    <p class="meta">The web framework for perfectionists with deadlines.</p>
    <div class="header-mobile-only">
      
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

      <div class="light-dark-mode-toggle">
        

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

      </div>
    </div>
    <button class="menu-button">
      <i class="icon icon-reorder"></i>
      <span class="visuallyhidden">Menu</span>
    </button>
    <nav aria-labelledby="navigation-header">
      <span id="navigation-header" class="visuallyhidden">Main navigation</span>
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/">Overview</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/">Download</a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/">Documentation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/">News</a>
        </li>
        <li>
          <a href="https://github.com/django/django" target="_blank" rel="noopener">Code</a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/">Issues</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/">Community</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/">Foundation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/">&#9829; Donate</a>
        </li>
        <li>
          
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

        </li>
        <li>
          

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

        </li>
      </ul>
    </nav>
  </div>
</header>

    

    <section class="copy-banner">
      <div class="container 
  container--flex container--flex--wrap--mobile
">
        
  <p><a href="https://docs.djangoproject.com/en/6.0/">Documentation</a></p>

      </div>
    </section>

    <div id="billboard">
      
    </div>

    <div class="container sidebar-right">
      <main id="main-content">

        
          
        

        
  <div id="version-switcher">
    <ul id="faq-link">
      <li class="current-link">
        <a href="https://docs.djangoproject.com/en/6.0/faq/help/">
          <span>Getting Help</span>
        </a>
      </li>
    </ul>
    <ul id="doc-languages" class="language-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/el/6.0/releases/4.1/">el</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/es/6.0/releases/4.1/">es</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/fr/6.0/releases/4.1/">fr</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/id/6.0/releases/4.1/">id</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/it/6.0/releases/4.1/">it</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ja/6.0/releases/4.1/">ja</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ko/6.0/releases/4.1/">ko</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pl/6.0/releases/4.1/">pl</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pt-br/6.0/releases/4.1/">pt-br</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/sv/6.0/releases/4.1/">sv</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/zh-hans/6.0/releases/4.1/">zh-hans</a>
          </li>
        
      
      <li class="current"
          title="Click on the links on the left to switch to another language.">
        <span>Language: <strong>en</strong></span>
      </li>
    </ul>

    
    <ul id="doc-versions" class="version-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.1/releases/4.1/">4.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.2/releases/4.1/">4.2</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.0/releases/4.1/">5.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.1/releases/4.1/">5.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.2/releases/4.1/">5.2</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/dev/releases/4.1/">dev</a>
          </li>
        
      
      <li class="current"
          title="This document describes Django 6.0. Click on the links on the left to see other versions.">
        <span>Documentation version:
          <strong>6.0</strong>
        </span>
      </li>
    </ul>
    <ul id="backtotop-link">
      <li class="current-link">
        <a href="#top" aria-label="Back to top" class="icon-chevron-up-align"><i class="icon icon-chevron-up"></i></a>
      </li>
    </ul>
  </div>

  
    <article id="docs-content">
      <section id="s-django-4-1-release-notes">
<span id="django-4-1-release-notes"></span><h1>Django 4.1 release notes<a class="headerlink" href="#django-4-1-release-notes" title="Link to this heading">¶</a></h1>
<p><em>August 3, 2022</em></p>
<p>Welcome to Django 4.1!</p>
<p>These release notes cover the <a class="reference internal" href="#whats-new-4-1"><span class="std std-ref">new features</span></a>, as well as
some <a class="reference internal" href="#backwards-incompatible-4-1"><span class="std std-ref">backwards incompatible changes</span></a> you’ll
want to be aware of when upgrading from Django 4.0 or earlier. We’ve
<a class="reference internal" href="#deprecated-features-4-1"><span class="std std-ref">begun the deprecation process for some features</span></a>.</p>
<p>See the <a class="reference internal" href="../../howto/upgrade-version/"><span class="doc">How to upgrade Django to a newer version</span></a> guide if you’re updating an existing
project.</p>
<section id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python compatibility<a class="headerlink" href="#python-compatibility" title="Link to this heading">¶</a></h2>
<p>Django 4.1 supports Python 3.8, 3.9, 3.10, and 3.11 (as of 4.1.3). We
<strong>highly recommend</strong> and only officially support the latest release of each
series.</p>
</section>
<section id="s-what-s-new-in-django-4-1">
<span id="s-whats-new-4-1"></span><span id="what-s-new-in-django-4-1"></span><span id="whats-new-4-1"></span><h2>What’s new in Django 4.1<a class="headerlink" href="#what-s-new-in-django-4-1" title="Link to this heading">¶</a></h2>
<section id="s-asynchronous-handlers-for-class-based-views">
<span id="asynchronous-handlers-for-class-based-views"></span><h3>Asynchronous handlers for class-based views<a class="headerlink" href="#asynchronous-handlers-for-class-based-views" title="Link to this heading">¶</a></h3>
<p>View subclasses may now define async HTTP method handlers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">View</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AsyncView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Perform view logic using await.</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;Hello async world!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../topics/class-based-views/#async-class-based-views"><span class="std std-ref">Asynchronous class-based views</span></a> for more details.</p>
</section>
<section id="s-asynchronous-orm-interface">
<span id="asynchronous-orm-interface"></span><h3>Asynchronous ORM interface<a class="headerlink" href="#asynchronous-orm-interface" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> now provides an asynchronous interface for all data access
operations. These are named as-per the existing synchronous operations but with
an <code class="docutils literal notranslate"><span class="pre">a</span></code> prefix, for example <code class="docutils literal notranslate"><span class="pre">acreate()</span></code>, <code class="docutils literal notranslate"><span class="pre">aget()</span></code>, and so on.</p>
<p>The new interface allows you to write asynchronous code without needing to wrap
ORM operations in <code class="docutils literal notranslate"><span class="pre">sync_to_async()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__startswith</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">):</span>
    <span class="n">book</span> <span class="o">=</span> <span class="k">await</span> <span class="n">author</span><span class="o">.</span><span class="n">books</span><span class="o">.</span><span class="n">afirst</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that, at this stage, the underlying database operations remain
synchronous, with contributions ongoing to push asynchronous support down into
the SQL compiler, and integrate asynchronous database drivers. The new
asynchronous queryset interface currently encapsulates the necessary
<code class="docutils literal notranslate"><span class="pre">sync_to_async()</span></code> operations for you, and will allow your code to take
advantage of developments in the ORM’s asynchronous support as it evolves.</p>
<p>See <a class="reference internal" href="../../topics/db/queries/#async-queries"><span class="std std-ref">Asynchronous queries</span></a> for details and limitations.</p>
</section>
<section id="s-validation-of-constraints">
<span id="validation-of-constraints"></span><h3>Validation of Constraints<a class="headerlink" href="#validation-of-constraints" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../../ref/models/constraints/#django.db.models.CheckConstraint" title="django.db.models.CheckConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Check</span></code></a>,
<a class="reference internal" href="../../ref/models/constraints/#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">unique</span></code></a>, and <a class="reference internal" href="../../ref/contrib/postgres/constraints/#django.contrib.postgres.constraints.ExclusionConstraint" title="django.contrib.postgres.constraints.ExclusionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">exclusion</span></code></a> constraints defined
in the <a class="reference internal" href="../../ref/models/options/#django.db.models.Options.constraints" title="django.db.models.Options.constraints"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.constraints</span></code></a> option
are now checked during <a class="reference internal" href="../../ref/models/instances/#validating-objects"><span class="std std-ref">model validation</span></a>.</p>
</section>
<section id="s-form-rendering-accessibility">
<span id="form-rendering-accessibility"></span><h3>Form rendering accessibility<a class="headerlink" href="#form-rendering-accessibility" title="Link to this heading">¶</a></h3>
<p>In order to aid users with screen readers, and other assistive technology, new
<code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> based form templates are available from this release. These provide
more accessible navigation than the older templates, and are able to correctly
group related controls, such as radio-lists, into fieldsets.</p>
<p>The new templates are recommended, and will become the default form rendering
style when outputting a form, like <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">form</span> <span class="pre">}}</span></code> in a template, from Django
5.0.</p>
<p>In order to ease adopting the new output style, the default form and formset
templates are now configurable at the project level via the
<a class="reference internal" href="../../ref/settings/#std-setting-FORM_RENDERER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FORM_RENDERER</span></code></a> setting.</p>
<p>See <a class="reference internal" href="#forms-4-1"><span class="std std-ref">the Forms section (below)</span></a> for full details.</p>
</section>
<section id="s-csrf-cookie-masked-setting">
<span id="s-csrf-cookie-masked-usage"></span><span id="csrf-cookie-masked-setting"></span><span id="csrf-cookie-masked-usage"></span><h3><code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code> setting<a class="headerlink" href="#csrf-cookie-masked-setting" title="Link to this heading">¶</a></h3>
<p>The new <code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code> transitional setting allows specifying whether
to mask the CSRF cookie.</p>
<p><a class="reference internal" href="../../ref/middleware/#django.middleware.csrf.CsrfViewMiddleware" title="django.middleware.csrf.CsrfViewMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CsrfViewMiddleware</span></code></a> no longer masks the CSRF
cookie like it does the CSRF token in the DOM. If you are upgrading multiple
instances of the same project to Django 4.1, you should set
<code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> during the transition, in order to allow
compatibility with the older versions of Django. Once the transition to 4.1 is
complete you can stop overriding <code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code>.</p>
<p>This setting is deprecated as of this release and will be removed in Django
5.0.</p>
</section>
<section id="s-minor-features">
<span id="minor-features"></span><h3>Minor features<a class="headerlink" href="#minor-features" title="Link to this heading">¶</a></h3>
<section id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../../ref/contrib/admin/#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The admin <a class="reference internal" href="../../ref/contrib/admin/#admin-theming"><span class="std std-ref">dark mode CSS variables</span></a> are now applied in a
separate stylesheet and template block.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/admin/filters/#modeladmin-list-filters"><span class="std std-ref">ModelAdmin List Filters</span></a> providing custom <code class="docutils literal notranslate"><span class="pre">FieldListFilter</span></code>
subclasses can now control the query string value separator when filtering
for multiple values using the <code class="docutils literal notranslate"><span class="pre">__in</span></code> lookup.</p></li>
<li><p>The admin <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.history_view" title="django.contrib.admin.ModelAdmin.history_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">history</span> <span class="pre">view</span></code></a>
is now paginated.</p></li>
<li><p>Related widget wrappers now have a link to object’s change form.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.AdminSite.get_app_list" title="django.contrib.admin.AdminSite.get_app_list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AdminSite.get_app_list()</span></code></a> method now allows changing the order of
apps and models on the admin index page.</p></li>
</ul>
</section>
<section id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../../topics/auth/#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The default iteration count for the PBKDF2 password hasher is increased from
320,000 to 390,000.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/auth/#django.contrib.auth.backends.RemoteUserBackend.configure_user" title="django.contrib.auth.backends.RemoteUserBackend.configure_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoteUserBackend.configure_user()</span></code></a> method now allows synchronizing
user attributes with attributes in a remote system such as an LDAP directory.</p></li>
</ul>
</section>
<section id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../../ref/contrib/gis/#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/contrib/gis/geos/#django.contrib.gis.geos.GEOSGeometry.make_valid" title="django.contrib.gis.geos.GEOSGeometry.make_valid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GEOSGeometry.make_valid()</span></code></a> method allows converting invalid
geometries to valid ones.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">clone</span></code> argument for <a class="reference internal" href="../../ref/contrib/gis/geos/#django.contrib.gis.geos.GEOSGeometry.normalize" title="django.contrib.gis.geos.GEOSGeometry.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GEOSGeometry.normalize()</span></code></a> allows
creating a normalized clone of the geometry.</p></li>
</ul>
</section>
<section id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../../ref/contrib/postgres/#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/aggregates/#django.contrib.postgres.aggregates.BitXor" title="django.contrib.postgres.aggregates.BitXor"><code class="xref py py-class docutils literal notranslate"><span class="pre">BitXor()</span></code></a>
aggregate function returns an <code class="docutils literal notranslate"><span class="pre">int</span></code> of the bitwise <code class="docutils literal notranslate"><span class="pre">XOR</span></code> of all non-null
input values.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/postgres/indexes/#django.contrib.postgres.indexes.SpGistIndex" title="django.contrib.postgres.indexes.SpGistIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpGistIndex</span></code></a> now supports covering
indexes on PostgreSQL 14+.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/postgres/constraints/#django.contrib.postgres.constraints.ExclusionConstraint" title="django.contrib.postgres.constraints.ExclusionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExclusionConstraint</span></code></a> now
supports covering exclusion constraints using SP-GiST indexes on PostgreSQL
14+.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">default_bounds</span></code> attribute of <a class="reference internal" href="../../ref/contrib/postgres/fields/#django.contrib.postgres.fields.DateTimeRangeField.default_bounds" title="django.contrib.postgres.fields.DateTimeRangeField.default_bounds"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DateTimeRangeField</span></code></a> and
<a class="reference internal" href="../../ref/contrib/postgres/fields/#django.contrib.postgres.fields.DecimalRangeField.default_bounds" title="django.contrib.postgres.fields.DecimalRangeField.default_bounds"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DecimalRangeField</span></code></a> allows
specifying bounds for list and tuple inputs.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/postgres/constraints/#django.contrib.postgres.constraints.ExclusionConstraint" title="django.contrib.postgres.constraints.ExclusionConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExclusionConstraint</span></code></a> now allows
specifying operator classes with the
<a class="reference internal" href="../../ref/contrib/postgres/indexes/#django.contrib.postgres.indexes.OpClass" title="django.contrib.postgres.indexes.OpClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpClass()</span></code></a> expression.</p></li>
</ul>
</section>
<section id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../../ref/contrib/sitemaps/#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a><a class="headerlink" href="#django-contrib-sitemaps" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The default sitemap index template <code class="docutils literal notranslate"><span class="pre">&lt;sitemapindex&gt;</span></code> now includes the
<code class="docutils literal notranslate"><span class="pre">&lt;lastmod&gt;</span></code> timestamp where available, through the new
<a class="reference internal" href="../../ref/contrib/sitemaps/#django.contrib.sitemaps.Sitemap.get_latest_lastmod" title="django.contrib.sitemaps.Sitemap.get_latest_lastmod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_latest_lastmod()</span></code></a> method. Custom
sitemap index templates should be updated for the adjusted <a class="reference internal" href="../../ref/contrib/sitemaps/#sitemap-index-context-variables"><span class="std std-ref">context
variables</span></a>.</p></li>
</ul>
</section>
<section id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../../ref/contrib/staticfiles/#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/contrib/staticfiles/#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a> now
replaces paths to CSS source map references with their hashed counterparts.</p></li>
</ul>
</section>
<section id="s-database-backends">
<span id="database-backends"></span><h4>Database backends<a class="headerlink" href="#database-backends" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Third-party database backends can now specify the minimum required version of
the database using the <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.minimum_database_version</span></code>
attribute which is a tuple (e.g. <code class="docutils literal notranslate"><span class="pre">(10,</span> <span class="pre">0)</span></code> means “10.0”). If a minimum
version is specified, backends must also implement
<code class="docutils literal notranslate"><span class="pre">DatabaseWrapper.get_database_version()</span></code>, which returns a tuple of the
current database version. The backend’s
<code class="docutils literal notranslate"><span class="pre">DatabaseWrapper.init_connection_state()</span></code> method must call <code class="docutils literal notranslate"><span class="pre">super()</span></code> in
order for the check to run.</p></li>
</ul>
</section>
<section id="s-forms">
<span id="s-forms-4-1"></span><span id="forms"></span><span id="forms-4-1"></span><h4>Forms<a class="headerlink" href="#forms" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The default template used to render forms when cast to a string, e.g. in
templates as <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">form</span> <span class="pre">}}</span></code>, is now configurable at the project-level by
setting <a class="reference internal" href="../../ref/forms/renderers/#django.forms.renderers.BaseRenderer.form_template_name" title="django.forms.renderers.BaseRenderer.form_template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">form_template_name</span></code></a> on
the class provided for <a class="reference internal" href="../../ref/settings/#std-setting-FORM_RENDERER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FORM_RENDERER</span></code></a>.</p>
<p><a class="reference internal" href="../../ref/forms/api/#django.forms.Form.template_name" title="django.forms.Form.template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Form.template_name</span></code></a> is now a property deferring to the renderer, but
may be overridden with a string value to specify the template name per-form
class.</p>
<p>Similarly, the default template used to render formsets can be specified via
the matching
<a class="reference internal" href="../../ref/forms/renderers/#django.forms.renderers.BaseRenderer.formset_template_name" title="django.forms.renderers.BaseRenderer.formset_template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">formset_template_name</span></code></a> renderer
attribute.</p>
</li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">div.html</span></code> form template, referencing
<a class="reference internal" href="../../ref/forms/api/#django.forms.Form.template_name_div" title="django.forms.Form.template_name_div"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Form.template_name_div</span></code></a> attribute, and matching <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.as_div" title="django.forms.Form.as_div"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Form.as_div()</span></code></a>
method, render forms using HTML <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> elements.</p>
<p>This new output style is recommended over the existing
<a class="reference internal" href="../../ref/forms/api/#django.forms.Form.as_table" title="django.forms.Form.as_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_table()</span></code></a>, <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.as_p" title="django.forms.Form.as_p"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_p()</span></code></a> and <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.as_ul" title="django.forms.Form.as_ul"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_ul()</span></code></a> styles,
as the template implements <code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;legend&gt;</span></code> to group related
inputs and is easier for screen reader users to navigate.</p>
<p>The div-based output will become the default rendering style from Django 5.0.</p>
</li>
<li><p>In order to smooth adoption of the new <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> output style, two
transitional form renderer classes are available:
<code class="docutils literal notranslate"><span class="pre">django.forms.renderers.DjangoDivFormRenderer</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.forms.renderers.Jinja2DivFormRenderer</span></code>, for the Django and Jinja2
template backends respectively.</p>
<p>You can apply one of these via the <a class="reference internal" href="../../ref/settings/#std-setting-FORM_RENDERER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FORM_RENDERER</span></code></a> setting. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FORM_RENDERER</span> <span class="o">=</span> <span class="s2">&quot;django.forms.renderers.DjangoDivFormRenderer&quot;</span>
</pre></div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> output style is the default, from Django 5.0, these
transitional renderers will be deprecated, for removal in Django 6.0. The
<code class="docutils literal notranslate"><span class="pre">FORM_RENDERER</span></code> declaration can be removed at that time.</p>
</li>
<li><p>If the new <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> output style is not appropriate for your project, you
should define a renderer subclass specifying
<a class="reference internal" href="../../ref/forms/renderers/#django.forms.renderers.BaseRenderer.form_template_name" title="django.forms.renderers.BaseRenderer.form_template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">form_template_name</span></code></a> and
<a class="reference internal" href="../../ref/forms/renderers/#django.forms.renderers.BaseRenderer.formset_template_name" title="django.forms.renderers.BaseRenderer.formset_template_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">formset_template_name</span></code></a> for your
required style, and set <a class="reference internal" href="../../ref/settings/#std-setting-FORM_RENDERER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">FORM_RENDERER</span></code></a> accordingly.</p>
<p>For example, for the <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code> output style used by <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.as_p" title="django.forms.Form.as_p"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_p()</span></code></a>, you
would define a form renderer setting <code class="docutils literal notranslate"><span class="pre">form_template_name</span></code> to
<code class="docutils literal notranslate"><span class="pre">&quot;django/forms/p.html&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">formset_template_name</span></code> to
<code class="docutils literal notranslate"><span class="pre">&quot;django/forms/formsets/p.html&quot;</span></code>.</p>
</li>
<li><p>The new <a class="reference internal" href="../../ref/forms/api/#django.forms.BoundField.legend_tag" title="django.forms.BoundField.legend_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">legend_tag()</span></code></a> allows rendering field
labels in <code class="docutils literal notranslate"><span class="pre">&lt;legend&gt;</span></code> tags via the new <code class="docutils literal notranslate"><span class="pre">tag</span></code> argument of
<a class="reference internal" href="../../ref/forms/api/#django.forms.BoundField.label_tag" title="django.forms.BoundField.label_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">label_tag()</span></code></a>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">edit_only</span></code> argument for <a class="reference internal" href="../../ref/forms/models/#django.forms.models.modelformset_factory" title="django.forms.models.modelformset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">modelformset_factory()</span></code></a> and
<a class="reference internal" href="../../ref/forms/models/#django.forms.models.inlineformset_factory" title="django.forms.models.inlineformset_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">inlineformset_factory()</span></code></a> allows preventing new objects creation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">js</span></code> and <code class="docutils literal notranslate"><span class="pre">css</span></code> class attributes of <a class="reference internal" href="../../topics/forms/media/"><span class="doc">Media</span></a>
now allow using hashable objects, not only path strings, as long as those
objects implement the <code class="docutils literal notranslate"><span class="pre">__html__()</span></code> method (typically when decorated with
the <a class="reference internal" href="../../ref/utils/#django.utils.html.html_safe" title="django.utils.html.html_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">html_safe()</span></code></a> decorator).</p></li>
<li><p>The new <a class="reference internal" href="../../ref/forms/api/#django.forms.BoundField.use_fieldset" title="django.forms.BoundField.use_fieldset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BoundField.use_fieldset</span></code></a> and <a class="reference internal" href="../../ref/forms/widgets/#django.forms.Widget.use_fieldset" title="django.forms.Widget.use_fieldset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Widget.use_fieldset</span></code></a>
attributes help to identify widgets where its inputs should be grouped in a
<code class="docutils literal notranslate"><span class="pre">&lt;fieldset&gt;</span></code> with a <code class="docutils literal notranslate"><span class="pre">&lt;legend&gt;</span></code>.</p></li>
<li><p>The <a class="reference internal" href="../../topics/forms/formsets/#formsets-error-messages"><span class="std std-ref">error_messages</span></a> argument for
<a class="reference internal" href="../../topics/forms/formsets/#django.forms.formsets.BaseFormSet" title="django.forms.formsets.BaseFormSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFormSet</span></code></a> now allows customizing
error messages for invalid number of forms by passing <code class="docutils literal notranslate"><span class="pre">'too_few_forms'</span></code>
and <code class="docutils literal notranslate"><span class="pre">'too_many_forms'</span></code> keys.</p></li>
<li><p><a class="reference internal" href="../../ref/forms/fields/#django.forms.IntegerField" title="django.forms.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a>, <a class="reference internal" href="../../ref/forms/fields/#django.forms.FloatField" title="django.forms.FloatField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatField</span></code></a>, and
<a class="reference internal" href="../../ref/forms/fields/#django.forms.DecimalField" title="django.forms.DecimalField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalField</span></code></a> now optionally accept a <code class="docutils literal notranslate"><span class="pre">step_size</span></code>
argument. This is used to set the <code class="docutils literal notranslate"><span class="pre">step</span></code> HTML attribute, and is validated
on form submission.</p></li>
</ul>
</section>
<section id="s-internationalization">
<span id="internationalization"></span><h4>Internationalization<a class="headerlink" href="#internationalization" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns" title="django.conf.urls.i18n.i18n_patterns"><code class="xref py py-func docutils literal notranslate"><span class="pre">i18n_patterns()</span></code></a> function now supports
languages with both scripts and regions.</p></li>
</ul>
</section>
<section id="s-management-commands">
<span id="management-commands"></span><h4>Management Commands<a class="headerlink" href="#management-commands" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/django-admin/#cmdoption-makemigrations-noinput"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--no-input</span></code></a> now logs default answers and reasons why
migrations cannot be created.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-makemigrations-scriptable"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--scriptable</span></code></a> option diverts log output and
input prompts to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, writing only paths of generated migration files
to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-migrate-prune"><code class="xref std std-option docutils literal notranslate"><span class="pre">migrate</span> <span class="pre">--prune</span></code></a> option allows deleting nonexistent
migrations from the <code class="docutils literal notranslate"><span class="pre">django_migrations</span></code> table.</p></li>
<li><p>Python files created by <a class="reference internal" href="../../ref/django-admin/#django-admin-startproject"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startproject</span></code></a>, <a class="reference internal" href="../../ref/django-admin/#django-admin-startapp"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">startapp</span></code></a>,
<a class="reference internal" href="../../ref/django-admin/#django-admin-optimizemigration"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">optimizemigration</span></code></a>, <a class="reference internal" href="../../ref/django-admin/#django-admin-makemigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemigrations</span></code></a>, and
<a class="reference internal" href="../../ref/django-admin/#django-admin-squashmigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">squashmigrations</span></code></a> are now formatted using the <code class="docutils literal notranslate"><span class="pre">black</span></code> command if
it is present on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#django-admin-optimizemigration"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">optimizemigration</span></code></a> command allows optimizing operations for
a migration.</p></li>
</ul>
</section>
<section id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.RenameIndex" title="django.db.migrations.operations.RenameIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameIndex</span></code></a> operation
allows renaming indexes defined in the
<a class="reference internal" href="../../ref/models/options/#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a> or
<code class="docutils literal notranslate"><span class="pre">index_together</span></code> options.</p></li>
<li><p>The migrations autodetector now generates
<a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.RenameIndex" title="django.db.migrations.operations.RenameIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameIndex</span></code></a> operations instead of
<code class="docutils literal notranslate"><span class="pre">RemoveIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">AddIndex</span></code>, when renaming indexes defined in the
<a class="reference internal" href="../../ref/models/options/#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a>.</p></li>
<li><p>The migrations autodetector now generates
<a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.RenameIndex" title="django.db.migrations.operations.RenameIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameIndex</span></code></a> operations instead of
<code class="docutils literal notranslate"><span class="pre">AlterIndexTogether</span></code> and <code class="docutils literal notranslate"><span class="pre">AddIndex</span></code>, when moving indexes defined in the
<code class="docutils literal notranslate"><span class="pre">Meta.index_together</span></code> to the
<a class="reference internal" href="../../ref/models/options/#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a>.</p></li>
</ul>
</section>
<section id="s-models">
<span id="models"></span><h4>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">order_by</span></code> argument of the
<a class="reference internal" href="../../ref/models/expressions/#django.db.models.expressions.Window" title="django.db.models.expressions.Window"><code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code></a> expression now accepts string
references to fields and transforms.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/settings/#std-setting-CONN_HEALTH_CHECKS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">CONN_HEALTH_CHECKS</span></code></a> setting allows enabling health checks
for <a class="reference internal" href="../../ref/databases/#persistent-database-connections"><span class="std std-ref">persistent database connections</span></a>
in order to reduce the number of failed requests, e.g. after database server
restart.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.bulk_create" title="django.db.models.query.QuerySet.bulk_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.bulk_create()</span></code></a> now supports updating fields when a row
insertion fails uniqueness constraints. This is supported on MariaDB, MySQL,
PostgreSQL, and SQLite 3.24+.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.iterator" title="django.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a> now supports prefetching related objects as long
as the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> argument is provided. In older versions, no prefetching
was done.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.Q" title="django.db.models.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span></code></a> objects and querysets can now be combined using
<code class="docutils literal notranslate"><span class="pre">^</span></code> as the exclusive or (<code class="docutils literal notranslate"><span class="pre">XOR</span></code>) operator. <code class="docutils literal notranslate"><span class="pre">XOR</span></code> is natively supported
on MariaDB and MySQL. For databases that do not support <code class="docutils literal notranslate"><span class="pre">XOR</span></code>, the query
will be converted to an equivalent using <code class="docutils literal notranslate"><span class="pre">AND</span></code>, <code class="docutils literal notranslate"><span class="pre">OR</span></code>, and <code class="docutils literal notranslate"><span class="pre">NOT</span></code>.</p></li>
<li><p>The new <a class="reference internal" href="../../howto/custom-model-fields/#custom-field-non-db-attrs"><span class="std std-ref">Field.non_db_attrs</span></a> attribute
allows customizing attributes of fields that don’t affect a column
definition.</p></li>
<li><p>On PostgreSQL, <code class="docutils literal notranslate"><span class="pre">AutoField</span></code>, <code class="docutils literal notranslate"><span class="pre">BigAutoField</span></code>, and <code class="docutils literal notranslate"><span class="pre">SmallAutoField</span></code> are
now created as identity columns rather than serial columns with sequences.</p></li>
</ul>
</section>
<section id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/request-response/#django.http.HttpResponse.set_cookie" title="django.http.HttpResponse.set_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HttpResponse.set_cookie()</span></code></a> now supports <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a>
objects for the <code class="docutils literal notranslate"><span class="pre">max_age</span></code> argument.</p></li>
</ul>
</section>
<section id="s-security">
<span id="security"></span><h4>Security<a class="headerlink" href="#security" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/settings/#std-setting-SECRET_KEY_FALLBACKS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECRET_KEY_FALLBACKS</span></code></a> setting allows providing a list of
values for secret key rotation.</p></li>
<li><p>The <a class="reference internal" href="../../ref/settings/#std-setting-SECURE_PROXY_SSL_HEADER"><code class="xref std std-setting docutils literal notranslate"><span class="pre">SECURE_PROXY_SSL_HEADER</span></code></a> setting now supports a comma-separated
list of protocols in the header value.</p></li>
</ul>
</section>
<section id="s-signals">
<span id="signals"></span><h4>Signals<a class="headerlink" href="#signals" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../ref/signals/#django.db.models.signals.pre_delete" title="django.db.models.signals.pre_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">pre_delete</span></code></a> and
<a class="reference internal" href="../../ref/signals/#django.db.models.signals.post_delete" title="django.db.models.signals.post_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">post_delete</span></code></a> signals now dispatch the
<code class="docutils literal notranslate"><span class="pre">origin</span></code> of the deletion.</p></li>
</ul>
</section>
<section id="s-templates">
<span id="s-templates-4-1"></span><span id="templates"></span><span id="templates-4-1"></span><h4>Templates<a class="headerlink" href="#templates" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The HTML <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> element <code class="docutils literal notranslate"><span class="pre">id</span></code> attribute is no longer required when
wrapping the <a class="reference internal" href="../../ref/templates/builtins/#std-templatefilter-json_script"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">json_script</span></code></a> template filter.</p></li>
<li><p>The <a class="reference internal" href="../../ref/templates/api/#django.template.loaders.cached.Loader" title="django.template.loaders.cached.Loader"><code class="xref py py-class docutils literal notranslate"><span class="pre">cached</span> <span class="pre">template</span> <span class="pre">loader</span></code></a>
is now enabled in development, when <a class="reference internal" href="../../ref/settings/#std-setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, and
<a class="reference internal" href="../../ref/settings/#std-setting-TEMPLATES-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS['loaders']</span></code></a> isn’t specified. You may
specify <code class="docutils literal notranslate"><span class="pre">OPTIONS['loaders']</span></code> to override this, if necessary.</p></li>
</ul>
</section>
<section id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiscoverRunner</span></code></a> now supports running tests in parallel on
macOS, Windows, and any other systems where the default
<a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> start method is <code class="docutils literal notranslate"><span class="pre">spawn</span></code>.</p></li>
<li><p>A nested atomic block marked as durable in <a class="reference internal" href="../../topics/testing/tools/#django.test.TestCase" title="django.test.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.test.TestCase</span></code></a> now
raises a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>, the same as outside of tests.</p></li>
<li><p><a class="reference internal" href="../../topics/testing/tools/#django.test.SimpleTestCase.assertFormError" title="django.test.SimpleTestCase.assertFormError"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SimpleTestCase.assertFormError()</span></code></a> and
<a class="reference internal" href="../../topics/testing/tools/#django.test.SimpleTestCase.assertFormSetError" title="django.test.SimpleTestCase.assertFormSetError"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertFormsetError()</span></code></a>
now support passing a form/formset object directly.</p></li>
</ul>
</section>
<section id="s-urls">
<span id="urls"></span><h4>URLs<a class="headerlink" href="#urls" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/urlresolvers/#django.urls.ResolverMatch.captured_kwargs" title="django.urls.ResolverMatch.captured_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ResolverMatch.captured_kwargs</span></code></a> attribute stores the captured
keyword arguments, as parsed from the URL.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/urlresolvers/#django.urls.ResolverMatch.extra_kwargs" title="django.urls.ResolverMatch.extra_kwargs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ResolverMatch.extra_kwargs</span></code></a> attribute stores the additional
keyword arguments passed to the view function.</p></li>
</ul>
</section>
<section id="s-utilities">
<span id="utilities"></span><h4>Utilities<a class="headerlink" href="#utilities" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SimpleLazyObject</span></code> now supports addition operations.</p></li>
<li><p><a class="reference internal" href="../../ref/utils/#django.utils.safestring.mark_safe" title="django.utils.safestring.mark_safe"><code class="xref py py-func docutils literal notranslate"><span class="pre">mark_safe()</span></code></a> now preserves lazy objects.</p></li>
</ul>
</section>
<section id="s-validators">
<span id="validators"></span><h4>Validators<a class="headerlink" href="#validators" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/validators/#django.core.validators.StepValueValidator" title="django.core.validators.StepValueValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">StepValueValidator</span></code></a> checks if a value
is an integral multiple of a given step size. This new validator is used for
the new <code class="docutils literal notranslate"><span class="pre">step_size</span></code> argument added to form fields representing numeric
values.</p></li>
</ul>
</section>
</section>
</section>
<section id="s-backwards-incompatible-changes-in-4-1">
<span id="s-backwards-incompatible-4-1"></span><span id="backwards-incompatible-changes-in-4-1"></span><span id="backwards-incompatible-4-1"></span><h2>Backwards incompatible changes in 4.1<a class="headerlink" href="#backwards-incompatible-changes-in-4-1" title="Link to this heading">¶</a></h2>
<section id="s-database-backend-api">
<span id="database-backend-api"></span><h3>Database backend API<a class="headerlink" href="#database-backend-api" title="Link to this heading">¶</a></h3>
<p>This section describes changes that may be needed in third-party database
backends.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BaseDatabaseFeatures.has_case_insensitive_like</span></code> is changed from <code class="docutils literal notranslate"><span class="pre">True</span></code>
to <code class="docutils literal notranslate"><span class="pre">False</span></code> to reflect the behavior of most databases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_key_columns()</span></code> is removed. Use
<code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_relations()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.ignore_conflicts_suffix_sql()</span></code> method is replaced by
<code class="docutils literal notranslate"><span class="pre">DatabaseOperations.on_conflict_suffix_sql()</span></code> that accepts the <code class="docutils literal notranslate"><span class="pre">fields</span></code>,
<code class="docutils literal notranslate"><span class="pre">on_conflict</span></code>, <code class="docutils literal notranslate"><span class="pre">update_fields</span></code>, and <code class="docutils literal notranslate"><span class="pre">unique_fields</span></code> arguments.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ignore_conflicts</span></code> argument of the
<code class="docutils literal notranslate"><span class="pre">DatabaseOperations.insert_statement()</span></code> method is replaced by
<code class="docutils literal notranslate"><span class="pre">on_conflict</span></code> that accepts <code class="docutils literal notranslate"><span class="pre">django.db.models.constants.OnConflict</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations._convert_field_to_tz()</span></code> is replaced by
<code class="docutils literal notranslate"><span class="pre">DatabaseOperations._convert_sql_to_tz()</span></code> that accepts the <code class="docutils literal notranslate"><span class="pre">sql</span></code>,
<code class="docutils literal notranslate"><span class="pre">params</span></code>, and <code class="docutils literal notranslate"><span class="pre">tzname</span></code> arguments.</p></li>
<li><p>Several date and time methods on <code class="docutils literal notranslate"><span class="pre">DatabaseOperations</span></code> now take <code class="docutils literal notranslate"><span class="pre">sql</span></code> and
<code class="docutils literal notranslate"><span class="pre">params</span></code> arguments instead of <code class="docutils literal notranslate"><span class="pre">field_name</span></code> and return 2-tuple containing
some SQL and the parameters to be interpolated into that SQL. The changed
methods have these new signatures:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.date_extract_sql(lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_extract_sql(lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params,</span> <span class="pre">tzname)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.time_extract_sql(lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.date_trunc_sql(lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params,</span> <span class="pre">tzname=None)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_trunc_sql(self,</span> <span class="pre">lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params,</span> <span class="pre">tzname)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.time_trunc_sql(lookup_type,</span> <span class="pre">sql,</span> <span class="pre">params,</span> <span class="pre">tzname=None)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_date_sql(sql,</span> <span class="pre">params,</span> <span class="pre">tzname)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_time_sql(sql,</span> <span class="pre">params,</span> <span class="pre">tzname)</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="s-id1">
<span id="id1"></span><h3><a class="reference internal" href="../../ref/contrib/gis/#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Support for GDAL 2.1 is removed.</p></li>
<li><p>Support for PostGIS 2.4 is removed.</p></li>
</ul>
</section>
<section id="s-dropped-support-for-postgresql-10">
<span id="dropped-support-for-postgresql-10"></span><h3>Dropped support for PostgreSQL 10<a class="headerlink" href="#dropped-support-for-postgresql-10" title="Link to this heading">¶</a></h3>
<p>Upstream support for PostgreSQL 10 ends in November 2022. Django 4.1 supports
PostgreSQL 11 and higher.</p>
</section>
<section id="s-dropped-support-for-mariadb-10-2">
<span id="dropped-support-for-mariadb-10-2"></span><h3>Dropped support for MariaDB 10.2<a class="headerlink" href="#dropped-support-for-mariadb-10-2" title="Link to this heading">¶</a></h3>
<p>Upstream support for MariaDB 10.2 ends in May 2022. Django 4.1 supports MariaDB
10.3 and higher.</p>
</section>
<section id="s-admin-changelist-searches-spanning-multi-valued-relationships-changes">
<span id="admin-changelist-searches-spanning-multi-valued-relationships-changes"></span><h3>Admin changelist searches spanning multi-valued relationships changes<a class="headerlink" href="#admin-changelist-searches-spanning-multi-valued-relationships-changes" title="Link to this heading">¶</a></h3>
<p>Admin changelist searches using multiple search terms are now applied in a
single call to <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, rather than in sequential <code class="docutils literal notranslate"><span class="pre">filter()</span></code> calls.</p>
<p>For multi-valued relationships, this means that rows from the related model
must match all terms rather than any term. For example, if <code class="docutils literal notranslate"><span class="pre">search_fields</span></code>
is set to <code class="docutils literal notranslate"><span class="pre">['child__name',</span> <span class="pre">'child__age']</span></code>, and a user searches for
<code class="docutils literal notranslate"><span class="pre">'Jamal</span> <span class="pre">17'</span></code>, parent rows will be returned only if there is a relationship to
some 17-year-old child named Jamal, rather than also returning parents who
merely have a younger or older child named Jamal in addition to some other
17-year-old.</p>
<p>See the <a class="reference internal" href="../../topics/db/queries/#spanning-multi-valued-relationships"><span class="std std-ref">Spanning multi-valued relationships</span></a> topic for more discussion of
this difference. In Django 4.0 and earlier,
<a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_search_results" title="django.contrib.admin.ModelAdmin.get_search_results"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_search_results()</span></code></a> followed the
second example query, but this undocumented behavior led to queries with
excessive joins.</p>
</section>
<section id="s-reverse-foreign-key-changes-for-unsaved-model-instances">
<span id="reverse-foreign-key-changes-for-unsaved-model-instances"></span><h3>Reverse foreign key changes for unsaved model instances<a class="headerlink" href="#reverse-foreign-key-changes-for-unsaved-model-instances" title="Link to this heading">¶</a></h3>
<p>In order to unify the behavior with many-to-many relations for unsaved model
instances, a reverse foreign key now raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when calling
<a class="reference internal" href="../../ref/models/relations/#django.db.models.fields.related.RelatedManager" title="django.db.models.fields.related.RelatedManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">related</span> <span class="pre">managers</span></code></a> for
unsaved objects.</p>
</section>
<section id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Related managers for <a class="reference internal" href="../../ref/models/fields/#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a>,
<a class="reference internal" href="../../ref/models/fields/#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a>, and
<a class="reference internal" href="../../ref/contrib/contenttypes/#django.contrib.contenttypes.fields.GenericRelation" title="django.contrib.contenttypes.fields.GenericRelation"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericRelation</span></code></a> are now cached
on the <a class="reference internal" href="../../ref/models/instances/#django.db.models.Model" title="django.db.models.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">Model</span></code></a> instance to which they belong. <em>This
change was reverted in Django 4.1.2.</em></p></li>
<li><p><a class="reference internal" href="../../topics/testing/advanced/#django.test.runner.DiscoverRunner" title="django.test.runner.DiscoverRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiscoverRunner</span></code></a> now returns a non-zero error code
for unexpected successes from tests marked with
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.expectedFailure" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.expectedFailure()</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../../ref/middleware/#django.middleware.csrf.CsrfViewMiddleware" title="django.middleware.csrf.CsrfViewMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CsrfViewMiddleware</span></code></a> no longer masks the CSRF
cookie like it does the CSRF token in the DOM.</p></li>
<li><p><a class="reference internal" href="../../ref/middleware/#django.middleware.csrf.CsrfViewMiddleware" title="django.middleware.csrf.CsrfViewMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">CsrfViewMiddleware</span></code></a> now uses
<code class="docutils literal notranslate"><span class="pre">request.META['CSRF_COOKIE']</span></code> for storing the unmasked CSRF secret rather
than a masked version. This is an undocumented, private API.</p></li>
<li><p>The <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.actions" title="django.contrib.admin.ModelAdmin.actions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.actions</span></code></a> and
<a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.inlines" title="django.contrib.admin.ModelAdmin.inlines"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inlines</span></code></a> attributes now default to an
empty tuple rather than an empty list to discourage unintended mutation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">type=&quot;text/css&quot;</span></code> attribute is no longer included in <code class="docutils literal notranslate"><span class="pre">&lt;link&gt;</span></code> tags
for CSS <a class="reference internal" href="../../topics/forms/media/"><span class="doc">form media</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formset:added</span></code> and <code class="docutils literal notranslate"><span class="pre">formset:removed</span></code> JavaScript events are now pure
JavaScript events and don’t depend on jQuery. See
<a class="reference internal" href="../../ref/contrib/admin/javascript/#admin-javascript-inline-form-events"><span class="std std-ref">Inline form events</span></a> for more details on the change.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">exc_info</span></code> argument of the undocumented
<code class="docutils literal notranslate"><span class="pre">django.utils.log.log_response()</span></code> function is replaced by <code class="docutils literal notranslate"><span class="pre">exception</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">size</span></code> argument of the undocumented
<code class="docutils literal notranslate"><span class="pre">django.views.static.was_modified_since()</span></code> function is removed.</p></li>
<li><p>The admin log out UI now uses <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">InlineAdminFormSet.non_form_errors</span></code> property is replaced
by the <code class="docutils literal notranslate"><span class="pre">non_form_errors()</span></code> method. This is consistent with <code class="docutils literal notranslate"><span class="pre">BaseFormSet</span></code>.</p></li>
<li><p>As per <a class="reference internal" href="#templates-4-1"><span class="std std-ref">above</span></a>, the cached template loader is now
enabled in development. You may specify <code class="docutils literal notranslate"><span class="pre">OPTIONS['loaders']</span></code> to override
this, if necessary.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.views.SuccessURLAllowedHostsMixin</span></code>
mixin is replaced by <code class="docutils literal notranslate"><span class="pre">RedirectURLMixin</span></code>.</p></li>
<li><p><a class="reference internal" href="../../ref/models/constraints/#django.db.models.BaseConstraint" title="django.db.models.BaseConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseConstraint</span></code></a> subclasses must implement
<a class="reference internal" href="../../ref/models/constraints/#django.db.models.BaseConstraint.validate" title="django.db.models.BaseConstraint.validate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validate()</span></code></a> method to allow those
constraints to be used for validation.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">URLResolver._is_callback()</span></code>,
<code class="docutils literal notranslate"><span class="pre">URLResolver._callback_strs</span></code>, and <code class="docutils literal notranslate"><span class="pre">URLPattern.lookup_str()</span></code> are
moved to <code class="docutils literal notranslate"><span class="pre">django.contrib.admindocs.utils</span></code>.</p></li>
<li><p>The <a class="reference internal" href="../../ref/models/instances/#django.db.models.Model.full_clean" title="django.db.models.Model.full_clean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.full_clean()</span></code></a> method now converts an <code class="docutils literal notranslate"><span class="pre">exclude</span></code> value to a
<code class="docutils literal notranslate"><span class="pre">set</span></code>. It’s also preferable to pass an <code class="docutils literal notranslate"><span class="pre">exclude</span></code> value as a <code class="docutils literal notranslate"><span class="pre">set</span></code> to
the <a class="reference internal" href="../../ref/models/instances/#django.db.models.Model.clean_fields" title="django.db.models.Model.clean_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.clean_fields()</span></code></a>, <a class="reference internal" href="../../ref/models/instances/#django.db.models.Model.full_clean" title="django.db.models.Model.full_clean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.full_clean()</span></code></a>,
<a class="reference internal" href="../../ref/models/instances/#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.validate_unique()</span></code></a>, and <a class="reference internal" href="../../ref/models/instances/#django.db.models.Model.validate_constraints" title="django.db.models.Model.validate_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.validate_constraints()</span></code></a>
methods.</p></li>
<li><p>The minimum supported version of <code class="docutils literal notranslate"><span class="pre">asgiref</span></code> is increased from 3.4.1 to
3.5.2.</p></li>
<li><p>Combined expressions no longer use the error-prone behavior of guessing
<code class="docutils literal notranslate"><span class="pre">output_field</span></code> when argument types match. As a consequence, resolving an
<code class="docutils literal notranslate"><span class="pre">output_field</span></code> for database functions and combined expressions may now
crash with mixed types. You will need to explicitly set the <code class="docutils literal notranslate"><span class="pre">output_field</span></code>
in such cases.</p></li>
<li><p>The <a class="reference internal" href="../../ref/django-admin/#django-admin-makemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemessages</span></code></a> command no longer changes <code class="docutils literal notranslate"><span class="pre">.po</span></code> files when up
to date. In older versions, <code class="docutils literal notranslate"><span class="pre">POT-Creation-Date</span></code> was always updated.</p></li>
</ul>
</section>
</section>
<section id="s-features-deprecated-in-4-1">
<span id="s-deprecated-features-4-1"></span><span id="features-deprecated-in-4-1"></span><span id="deprecated-features-4-1"></span><h2>Features deprecated in 4.1<a class="headerlink" href="#features-deprecated-in-4-1" title="Link to this heading">¶</a></h2>
<section id="s-log-out-via-get">
<span id="log-out-via-get"></span><h3>Log out via GET<a class="headerlink" href="#log-out-via-get" title="Link to this heading">¶</a></h3>
<p>Logging out via <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests to the <a class="reference internal" href="../../topics/auth/default/#django.contrib.auth.views.LogoutView" title="django.contrib.auth.views.LogoutView"><code class="xref py py-class docutils literal notranslate"><span class="pre">built-in</span> <span class="pre">logout</span> <span class="pre">view</span></code></a> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests
instead.</p>
<p>If you want to retain the user experience of an HTML link, you can use a form
that is styled to appear as a link:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;logout-form&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{% url &#39;admin:logout&#39; %}&quot;</span><span class="p">&gt;</span>
  {% csrf_token %}
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>{% translate &quot;Log out&quot; %}<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">logout-form</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">logout-form</span><span class="w"> </span><span class="nt">button</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">  </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">  </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">  </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">underline</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="s-id2">
<span id="id2"></span><h3>Miscellaneous<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The context for sitemap index templates of a flat list of URLs is deprecated.
Custom sitemap index templates should be updated for the adjusted
<a class="reference internal" href="../../ref/contrib/sitemaps/#sitemap-index-context-variables"><span class="std std-ref">context variables</span></a>, expecting a list
of objects with <code class="docutils literal notranslate"><span class="pre">location</span></code> and optional <code class="docutils literal notranslate"><span class="pre">lastmod</span></code> attributes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code> transitional setting is deprecated.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> argument of <a class="reference internal" href="../../ref/utils/#django.utils.functional.cached_property" title="django.utils.functional.cached_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.functional.cached_property()</span></code></a> is
deprecated as it’s unnecessary as of Python 3.6.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">opclasses</span></code> argument of
<code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.constraints.ExclusionConstraint</span></code> is deprecated in
favor of using <a class="reference internal" href="../../ref/contrib/postgres/indexes/#django.contrib.postgres.indexes.OpClass" title="django.contrib.postgres.indexes.OpClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpClass()</span></code></a>
in <a class="reference internal" href="../../ref/contrib/postgres/constraints/#django.contrib.postgres.constraints.ExclusionConstraint.expressions" title="django.contrib.postgres.constraints.ExclusionConstraint.expressions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ExclusionConstraint.expressions</span></code></a>. To use it, you need to add
<code class="docutils literal notranslate"><span class="pre">'django.contrib.postgres'</span></code> in your <a class="reference internal" href="../../ref/settings/#std-setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a>.</p>
<p>After making this change, <a class="reference internal" href="../../ref/django-admin/#django-admin-makemigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemigrations</span></code></a> will generate a new
migration with two operations: <code class="docutils literal notranslate"><span class="pre">RemoveConstraint</span></code> and <code class="docutils literal notranslate"><span class="pre">AddConstraint</span></code>.
Since this change has no effect on the database schema,
the <a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.SeparateDatabaseAndState" title="django.db.migrations.operations.SeparateDatabaseAndState"><code class="xref py py-class docutils literal notranslate"><span class="pre">SeparateDatabaseAndState</span></code></a>
operation can be used to only update the migration state without running any
SQL. Move the generated operations into the <code class="docutils literal notranslate"><span class="pre">state_operations</span></code> argument of
<a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.SeparateDatabaseAndState" title="django.db.migrations.operations.SeparateDatabaseAndState"><code class="xref py py-class docutils literal notranslate"><span class="pre">SeparateDatabaseAndState</span></code></a>. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Migration</span><span class="p">(</span><span class="n">migrations</span><span class="o">.</span><span class="n">Migration</span><span class="p">):</span>
    <span class="o">...</span>

    <span class="n">operations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">migrations</span><span class="o">.</span><span class="n">SeparateDatabaseAndState</span><span class="p">(</span>
            <span class="n">database_operations</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">state_operations</span><span class="o">=</span><span class="p">[</span>
                <span class="n">migrations</span><span class="o">.</span><span class="n">RemoveConstraint</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
                <span class="n">migrations</span><span class="o">.</span><span class="n">AddConstraint</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
            <span class="p">],</span>
        <span class="p">),</span>
    <span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>The undocumented ability to pass <code class="docutils literal notranslate"><span class="pre">errors=None</span></code> to
<a class="reference internal" href="../../topics/testing/tools/#django.test.SimpleTestCase.assertFormError" title="django.test.SimpleTestCase.assertFormError"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SimpleTestCase.assertFormError()</span></code></a> and
<a class="reference internal" href="../../topics/testing/tools/#django.test.SimpleTestCase.assertFormSetError" title="django.test.SimpleTestCase.assertFormSetError"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertFormsetError()</span></code></a>
is deprecated. Use <code class="docutils literal notranslate"><span class="pre">errors=[]</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.sessions.serializers.PickleSerializer</span></code> is deprecated due to
the risk of remote code execution.</p></li>
<li><p>The usage of <code class="docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code> on a queryset that prefetches related
objects without providing the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> argument is deprecated. In older
versions, no prefetching was done. Providing a value for <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code>
signifies that the additional query per chunk needed to prefetch is desired.</p></li>
<li><p>Passing unsaved model instances to related filters is deprecated. In Django
5.0, the exception will be raised.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">created=True</span></code> is added to the signature of
<a class="reference internal" href="../../ref/contrib/auth/#django.contrib.auth.backends.RemoteUserBackend.configure_user" title="django.contrib.auth.backends.RemoteUserBackend.configure_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoteUserBackend.configure_user()</span></code></a>. Support  for <code class="docutils literal notranslate"><span class="pre">RemoteUserBackend</span></code>
subclasses that do not accept this argument is deprecated.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.utils.timezone.utc</span></code> alias to <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timezone.utc" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code></a> is
deprecated. Use <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timezone.utc" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code></a> directly.</p></li>
<li><p>Passing a response object and a form/formset name to
<code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertFormError()</span></code> and <code class="docutils literal notranslate"><span class="pre">assertFormsetError()</span></code> is
deprecated. Use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">assertFormError</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;form_name&quot;</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
<span class="n">assertFormsetError</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;formset_name&quot;</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>or pass the form/formset object directly instead.</p>
</li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">django.contrib.gis.admin.OpenLayersWidget</span></code> is deprecated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.CryptPasswordHasher</span></code> is deprecated.</p></li>
<li><p>The ability to pass <code class="docutils literal notranslate"><span class="pre">nulls_first=False</span></code> or <code class="docutils literal notranslate"><span class="pre">nulls_last=False</span></code> to
<code class="docutils literal notranslate"><span class="pre">Expression.asc()</span></code> and <code class="docutils literal notranslate"><span class="pre">Expression.desc()</span></code> methods, and the <code class="docutils literal notranslate"><span class="pre">OrderBy</span></code>
expression is deprecated. Use <code class="docutils literal notranslate"><span class="pre">None</span></code> instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">&quot;django/forms/default.html&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;django/forms/formsets/default.html&quot;</span></code> templates which are a proxy to the
table-based templates are deprecated. Use the specific template instead.</p></li>
<li><p>The undocumented <code class="docutils literal notranslate"><span class="pre">LogoutView.get_next_page()</span></code> method is renamed to
<code class="docutils literal notranslate"><span class="pre">get_success_url()</span></code>.</p></li>
</ul>
</section>
</section>
<section id="s-features-removed-in-4-1">
<span id="features-removed-in-4-1"></span><h2>Features removed in 4.1<a class="headerlink" href="#features-removed-in-4-1" title="Link to this heading">¶</a></h2>
<p>These features have reached the end of their deprecation cycle and are removed
in Django 4.1.</p>
<p>See <a class="reference internal" href="../3.2/#deprecated-features-3-2"><span class="std std-ref">Features deprecated in 3.2</span></a> for details on these changes, including how
to remove usage of these features.</p>
<ul class="simple">
<li><p>Support for assigning objects which don’t support creating deep copies with
<code class="docutils literal notranslate"><span class="pre">copy.deepcopy()</span></code> to class attributes in <code class="docutils literal notranslate"><span class="pre">TestCase.setUpTestData()</span></code> is
removed.</p></li>
<li><p>Support for using a boolean value in
<a class="reference internal" href="../../howto/custom-management-commands/#django.core.management.BaseCommand.requires_system_checks" title="django.core.management.BaseCommand.requires_system_checks"><code class="xref py py-attr docutils literal notranslate"><span class="pre">BaseCommand.requires_system_checks</span></code></a> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">whitelist</span></code> argument and <code class="docutils literal notranslate"><span class="pre">domain_whitelist</span></code> attribute of
<code class="docutils literal notranslate"><span class="pre">django.core.validators.EmailValidator</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">default_app_config</span></code> application configuration variable is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TransactionTestCase.assertQuerysetEqual()</span></code> no longer calls <code class="docutils literal notranslate"><span class="pre">repr()</span></code> on a
queryset when compared to string values.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.core.cache.backends.memcached.MemcachedCache</span></code> backend is
removed.</p></li>
<li><p>Support for the pre-Django 3.2 format of messages used by
<code class="docutils literal notranslate"><span class="pre">django.contrib.messages.storage.cookie.CookieStorage</span></code> is removed.</p></li>
</ul>
</section>
</section>

    </article>
  

  
    <nav class="browse-horizontal" aria-labelledby="browse-horizontal-header">
      <span id="browse-horizontal-header" class="visuallyhidden">Previous page and next page</span>
      
        <div class="left"><a rel="prev" href="../4.1.1/"><i class="icon icon-chevron-left"></i> Django 4.1.1 release notes</a></div>
      
      
        <div class="right"><a rel="next" href="../4.0.10/">Django 4.0.10 release notes <i class="icon icon-chevron-right"></i></a></div>
      
    </nav>
  


        <a href="#top" class="backtotop"><i class="icon icon-chevron-up"></i> Back to Top</a>
      </main>

      
  <div role="complementary">
    <h2 class="visuallyhidden" id="aside-header">Additional Information</h2>

    


  <div class="fundraising-sidebar">
    <h3>Support Django!</h3>

    <div class="small-heart">
      <img src="https://static.djangoproject.com/img/fundraising-heart.cd6bb84ffd33.svg" alt="Support Django!" />
    </div>

    <div class="small-cta">
      <ul class="list-links-small">
        <li><a href="https://www.djangoproject.com/fundraising/">
          Aymeric Augustin donated to the Django Software Foundation to support Django development. Donate today!
        </a></li>
      </ul>
    </div>
  </div>



    
      <h3>Contents</h3>
      
        <ul>
<li><a class="reference internal" href="#">Django 4.1 release notes</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python compatibility</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-4-1">What’s new in Django 4.1</a><ul>
<li><a class="reference internal" href="#asynchronous-handlers-for-class-based-views">Asynchronous handlers for class-based views</a></li>
<li><a class="reference internal" href="#asynchronous-orm-interface">Asynchronous ORM interface</a></li>
<li><a class="reference internal" href="#validation-of-constraints">Validation of Constraints</a></li>
<li><a class="reference internal" href="#form-rendering-accessibility">Form rendering accessibility</a></li>
<li><a class="reference internal" href="#csrf-cookie-masked-setting"><code class="docutils literal notranslate"><span class="pre">CSRF_COOKIE_MASKED</span></code> setting</a></li>
<li><a class="reference internal" href="#minor-features">Minor features</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#database-backends">Database backends</a></li>
<li><a class="reference internal" href="#forms">Forms</a></li>
<li><a class="reference internal" href="#internationalization">Internationalization</a></li>
<li><a class="reference internal" href="#management-commands">Management Commands</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requests and Responses</a></li>
<li><a class="reference internal" href="#security">Security</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#urls">URLs</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
<li><a class="reference internal" href="#validators">Validators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-4-1">Backwards incompatible changes in 4.1</a><ul>
<li><a class="reference internal" href="#database-backend-api">Database backend API</a></li>
<li><a class="reference internal" href="#id1"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-10">Dropped support for PostgreSQL 10</a></li>
<li><a class="reference internal" href="#dropped-support-for-mariadb-10-2">Dropped support for MariaDB 10.2</a></li>
<li><a class="reference internal" href="#admin-changelist-searches-spanning-multi-valued-relationships-changes">Admin changelist searches spanning multi-valued relationships changes</a></li>
<li><a class="reference internal" href="#reverse-foreign-key-changes-for-unsaved-model-instances">Reverse foreign key changes for unsaved model instances</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-4-1">Features deprecated in 4.1</a><ul>
<li><a class="reference internal" href="#log-out-via-get">Log out via GET</a></li>
<li><a class="reference internal" href="#id2">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-4-1">Features removed in 4.1</a></li>
</ul>
</li>
</ul>

      
    

    
      <nav aria-labelledby="browse-header">
        <h3 id="browse-header">Browse</h3>
        <ul>
          
            
              <li>Prev: <a rel="prev" href="../4.1.1/">Django 4.1.1 release notes</a></li>
            
            
              <li>Next: <a rel="next" href="../4.0.10/">Django 4.0.10 release notes</a></li>
            
            <li><a href="https://docs.djangoproject.com/en/6.0/contents/">Table of contents</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/genindex/">General Index</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/py-modindex/">Python Module Index</a></li>
            
          
        </ul>
      </nav>
    

    
      <nav aria-labelledby="breadcrumbs-header">
        <h3 id="breadcrumbs-header">You are here:</h3>
        <ul>
          <li>
            <a href="https://docs.djangoproject.com/en/6.0/">Django 6.0 documentation</a>
            
              <ul><li><a href="../">Release notes</a>
            
            <ul><li>Django 4.1 release notes</li></ul>
            </li></ul>
          </li>
        </ul>
      </nav>
    

    
      <section aria-labelledby="getting-help-sidebar">
        <h3 id="getting-help-sidebar">Getting help</h3>
        <dl class="list-links">
          <dt><a href="https://docs.djangoproject.com/en/6.0/faq/">FAQ</a></dt>
          <dd>Try the FAQ — it's got answers to many common questions.</dd>

          <dt><a href="/en/stable/genindex/">Index</a>, <a href="/en/stable/py-modindex/">Module Index</a>, or <a href="/en/stable/contents/">Table of Contents</a></dt>
          <dd>Handy when looking for specific information.</dd>

          <dt><a href="https://chat.djangoproject.com">Django Discord Server</a></dt>
          <dd>Join the Django Discord Community.</dd>

          <dt><a href="https://forum.djangoproject.com/">Official Django Forum</a></dt>
          <dd>Join the community on the Django Forum.</dd>

          <dt><a href="https://code.djangoproject.com/">Ticket tracker</a></dt>
          <dd>Report bugs with Django or Django documentation in our ticket tracker.</dd>
        </dl>
      </section>
    

    
      <section aria-labelledby="links-wrapper-header">
        <h3 id="links-wrapper-header">Download:</h3>
        <p>
          Offline (Django 6.0):
          <a href="https://media.djangoproject.com/docs/django-docs-6.0-en.zip">HTML</a> |
          <a href="https://media.readthedocs.org/pdf/django/6.0.x/django.pdf">PDF</a> |
          <a href="https://media.readthedocs.org/epub/django/6.0.x/django.epub">ePub</a>
          <br>
          <span class="quiet">
            Provided by <a href="https://readthedocs.org/">Read the Docs</a>.
          </span>
        </p>
      </section>
    

    
  <div class="corporate-members">
    <h3>Diamond and Platinum Members</h3>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://sentry.io/for/django/" title="Sentry">
            <img src="https://media.djangoproject.com/cache/7a/f9/7af9c770dc49465739a82c91a0eb3d51.png" alt="Sentry" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>Sentry</strong></li>
            <li><a href="https://sentry.io/for/django/" title="Sentry">
              Monitor your Django Code
Resolve performance bottlenecks and errors using monitoring, replays, logs and Seer an AI agent for debugging.
            </a></li>
          </ul>
        </div>
      </div>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://jb.gg/ybja10" title="JetBrains">
            <img src="https://media.djangoproject.com/cache/c0/ea/c0ea128467983e64aab91cd27e7918c0.png" alt="JetBrains" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>JetBrains</strong></li>
            <li><a href="https://jb.gg/ybja10" title="JetBrains">
              JetBrains delivers intelligent software solutions that make developers more productive by simplifying their challenging tasks, automating the routine, and helping them adopt the best development practices. PyCharm is the Python IDE for Professional Developers by JetBrains providing a complete set of tools for productive Python, Web and scientific development.
            </a></li>
          </ul>
        </div>
      </div>
    
  </div>


  </div>

      

    </div>

     
     

    
    
    

    <!-- SVGs -->
    <svg xmlns="http://www.w3.org/2000/svg">
      <symbol viewBox="0 0 24 24" id="icon-auto"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2V4a8 8 0 1 0 0 16z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-moon"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-sun"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol>
    </svg>
    <!-- END SVGs -->

    
      

<footer>
  <div class="subfooter">
    <div class="container">
      <h2 class="visuallyhidden">Django Links</h2>
      <div class="column-container">
        <div class="col-learn-more">
          <h3>Learn More</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/start/overview/">About Django</a></li>
            
            <li><a href="https://www.djangoproject.com/start/">Getting Started with Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/teams/">Team Organization</a></li>
            <li><a href="https://www.djangoproject.com/foundation/">Django Software Foundation</a></li>
            <li><a href="https://www.djangoproject.com/conduct/">Code of Conduct</a></li>
            <li><a href="https://www.djangoproject.com/diversity/">Diversity Statement</a></li>
          </ul>
        </div>

        <div class="col-get-involved">
          <h3>Get Involved</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/community/">Join a Group</a></li>
            <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/">Contribute
              to Django</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/">Submit
              a Bug</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/security/#reporting-security-issues">Report
              a Security Issue</a></li>
            <li><a href="https://www.djangoproject.com/foundation/individual-members/">Individual membership</a></li>
          </ul>
        </div>

        <div class="col-get-help">
          <h3>Get Help</h3>
          <ul>
            <li><a href="https://docs.djangoproject.com/en/stable/faq/">Getting Help FAQ</a>
            </li>
            <li><a href="https://chat.djangoproject.com" target="_blank">Django Discord</a></li>
            <li><a href="https://forum.djangoproject.com/" target="_blank">Official Django Forum</a></li>
          </ul>
        </div>

        <div class="col-follow-us">
          <h3>Follow Us</h3>
          <ul>
            <li><a href="https://github.com/django">GitHub</a></li>
            <li><a href="https://x.com/djangoproject">X</a></li>
            <li><a href="https://fosstodon.org/@django" rel="me">Fediverse (Mastodon)</a></li>
            <li><a href="https://bsky.app/profile/djangoproject.com">Bluesky</a></li>
            <li><a href="https://www.linkedin.com/company/django-software-foundation">LinkedIn</a></li>
            <li><a href="https://www.djangoproject.com/rss/weblog/">News RSS</a></li>
          </ul>
        </div>

        <div class="col-support-us">
          <h3>Support Us</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/fundraising/">Sponsor Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/corporate-membership/">Corporate membership</a></li>
            <li><a href="https://django.threadless.com/" target="_blank">Official merchandise store</a></li>
            <li><a href="https://www.djangoproject.com/foundation/donate/#benevity-giving">Benevity Workplace Giving Program</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/">Django</a>
      </div>
      <ul class="thanks">
        <li>
          <span>Hosting by</span> <a class="in-kind-donors" href="https://www.djangoproject.com/fundraising/#in-kind-donors">In-kind
            donors</a>
        </li>
        <li class="design"><span>Design by</span> <a class="threespot" href="https://www.threespot.com">Threespot</a>
          <span class="ampersand">&amp;</span> <a class="andrevv" href="http://andrevv.com/">andrevv</a></li>
      </ul>
      <p class="copyright">&copy; 2005-2025
        <a href="https://www.djangoproject.com/foundation/"> Django Software
          Foundation</a> and individual contributors. Django is a
        <a href="https://www.djangoproject.com/trademarks/">registered
          trademark</a> of the Django Software Foundation.
      </p>
    </div>
  </div>

</footer>

    

    
  


    
      
      <script>
        function extless(input) {
          return input.replace(/(.*)\.[^.]+$/, '$1');
        }
        var require = {
          shim: {
            'jquery': [],
            'stripe': {
              exports: 'Stripe'
            }
          },
          paths: {
            "jquery": extless("https://static.djangoproject.com/js/lib/jquery.min.5790ead7ad3b.js"),
            "mod/list-collapsing": extless("https://static.djangoproject.com/js/mod/list-collapsing.2d844151b2ec.js"),
            "mod/stripe-change-card": extless("https://static.djangoproject.com/js/mod/stripe-change-card.eaa0afc324e9.js"),
            "mod/switch-dark-mode": extless("https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"),
            "stripe-checkout": "https://checkout.stripe.com/checkout",
            "stripe": "https://js.stripe.com/v3/?" // ? needed due to require.js
          }
        };
      </script>
      <script data-main="https://static.djangoproject.com/js/main.8677b21133eb.js" src="https://static.djangoproject.com/js/lib/require.177879fbe7dd.js"></script>
      <script src="https://static.djangoproject.com/js/djangoproject.15c016c8c3a7.js"></script>
    
  </body>
</html>
