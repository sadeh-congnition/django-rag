<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Django Software Foundation" />
    <meta name="keywords" content="Python, Django, framework, open-source" />
    <meta name="description" content="" />
    <meta name="fediverse:creator" content="@django@fosstodon.org" />
    
  
    
      
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/en/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="el"
          href="https://docs.djangoproject.com/el/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="en"
          href="https://docs.djangoproject.com/en/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="es"
          href="https://docs.djangoproject.com/es/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="fr"
          href="https://docs.djangoproject.com/fr/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="id"
          href="https://docs.djangoproject.com/id/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="it"
          href="https://docs.djangoproject.com/it/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="ja"
          href="https://docs.djangoproject.com/ja/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="ko"
          href="https://docs.djangoproject.com/ko/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="pl"
          href="https://docs.djangoproject.com/pl/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="pt-br"
          href="https://docs.djangoproject.com/pt-br/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="sv"
          href="https://docs.djangoproject.com/sv/6.0/releases/2.0/">
  
    
      
    
    <link rel="alternate"
          hreflang="zh-hans"
          href="https://docs.djangoproject.com/zh-hans/6.0/releases/2.0/">
  

  <link rel="search"
        type="application/opensearchdescription+xml"
        href="https://docs.djangoproject.com/en/6.0/search/description/"
        title="Django documentation">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="https://static.djangoproject.com/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="https://static.djangoproject.com/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="https://static.djangoproject.com/img/icon-tile.b01ac0ef9f67.png">
    <meta name="theme-color" content="#0C4B33">

    
      <meta property="og:title" content="Django 2.0 release notes | Django documentation" />
      <meta property="og:description" content="The web framework for perfectionists with deadlines." />
      <meta property="og:image" content="https://static.djangoproject.com/img/logos/django-logo-negative.1d528e2cb5fb.png" />
      <meta property="og:image:alt" content="Django logo" />
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="546" />
      <meta property="og:image:type" content="image/png"/>
      <meta property="og:url" content="https://docs.djangoproject.com/en/6.0/releases/2.0/" />
      <meta property="og:site_name" content="Django Project" />

      <meta property="twitter:creator" content="djangoproject" />
      <meta property="twitter:site" content="djangoproject" />
      <meta property="twitter:card" content="summary">
    

    <title>Django 2.0 release notes | Django documentation | Django</title>

    <link rel="stylesheet" href="https://static.djangoproject.com/css/output.7f12b704d16e.css" >

    <script src="https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"></script>
    
  </head>

  <body id="generic" class="">

    <a href="#main-content" class="skip-link">Skip to main content</a>
    

<header id="top">
  <div class="container container--flex--wrap--mobile">
    <a class="logo" href="https://www.djangoproject.com/">Django</a>
    <p class="meta">The web framework for perfectionists with deadlines.</p>
    <div class="header-mobile-only">
      
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

      <div class="light-dark-mode-toggle">
        

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

      </div>
    </div>
    <button class="menu-button">
      <i class="icon icon-reorder"></i>
      <span class="visuallyhidden">Menu</span>
    </button>
    <nav aria-labelledby="navigation-header">
      <span id="navigation-header" class="visuallyhidden">Main navigation</span>
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/">Overview</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/">Download</a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/">Documentation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/">News</a>
        </li>
        <li>
          <a href="https://github.com/django/django" target="_blank" rel="noopener">Code</a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/">Issues</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/">Community</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/">Foundation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/">&#9829; Donate</a>
        </li>
        <li>
          
<search class="search form-input" aria-labelledby="docs-search-label">
  <form action="https://docs.djangoproject.com/en/6.0/search/">
    <label id="docs-search-label" class="visuallyhidden" for="id_q">Search</label>
    <input type="search" name="q" placeholder="Search" id="id_q">
    <input type="hidden" name="category" value="">

    <button type="submit">
      <i class="icon icon-search" aria-hidden="true"></i>
      <span class="visuallyhidden">Submit</span>
    </button>
  </form>
</search>

        </li>
        <li>
          

<button class="theme-toggle">
  <div class="visually-hidden theme-label-when-auto">Toggle theme (current theme: auto)</div>
  <div class="visually-hidden theme-label-when-light">Toggle theme (current theme: light)</div>
  <div class="visually-hidden theme-label-when-dark">Toggle theme (current theme: dark)</div>

  <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
  <svg aria-hidden="true" class="theme-icon-when-auto">
    <use xlink:href="#icon-auto" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-dark">
    <use xlink:href="#icon-moon" />
  </svg>
  <svg aria-hidden="true" class="theme-icon-when-light">
    <use xlink:href="#icon-sun" />
  </svg>
</button>

        </li>
      </ul>
    </nav>
  </div>
</header>

    

    <section class="copy-banner">
      <div class="container 
  container--flex container--flex--wrap--mobile
">
        
  <p><a href="https://docs.djangoproject.com/en/6.0/">Documentation</a></p>

      </div>
    </section>

    <div id="billboard">
      
    </div>

    <div class="container sidebar-right">
      <main id="main-content">

        
          
        

        
  <div id="version-switcher">
    <ul id="faq-link">
      <li class="current-link">
        <a href="https://docs.djangoproject.com/en/6.0/faq/help/">
          <span>Getting Help</span>
        </a>
      </li>
    </ul>
    <ul id="doc-languages" class="language-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/el/6.0/releases/2.0/">el</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/es/6.0/releases/2.0/">es</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/fr/6.0/releases/2.0/">fr</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/id/6.0/releases/2.0/">id</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/it/6.0/releases/2.0/">it</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ja/6.0/releases/2.0/">ja</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/ko/6.0/releases/2.0/">ko</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pl/6.0/releases/2.0/">pl</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/pt-br/6.0/releases/2.0/">pt-br</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/sv/6.0/releases/2.0/">sv</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/zh-hans/6.0/releases/2.0/">zh-hans</a>
          </li>
        
      
      <li class="current"
          title="Click on the links on the left to switch to another language.">
        <span>Language: <strong>en</strong></span>
      </li>
    </ul>

    
    <ul id="doc-versions" class="version-switcher doc-switcher">
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/2.0/releases/2.0/">2.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/2.1/releases/2.0/">2.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/2.2/releases/2.0/">2.2</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/3.0/releases/2.0/">3.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/3.1/releases/2.0/">3.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/3.2/releases/2.0/">3.2</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.0/releases/2.0/">4.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.1/releases/2.0/">4.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/4.2/releases/2.0/">4.2</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.0/releases/2.0/">5.0</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.1/releases/2.0/">5.1</a>
          </li>
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/5.2/releases/2.0/">5.2</a>
          </li>
        
      
        
      
        
          <li class="other">
            
              
            
            <a href="https://docs.djangoproject.com/en/dev/releases/2.0/">dev</a>
          </li>
        
      
      <li class="current"
          title="This document describes Django 6.0. Click on the links on the left to see other versions.">
        <span>Documentation version:
          <strong>6.0</strong>
        </span>
      </li>
    </ul>
    <ul id="backtotop-link">
      <li class="current-link">
        <a href="#top" aria-label="Back to top" class="icon-chevron-up-align"><i class="icon icon-chevron-up"></i></a>
      </li>
    </ul>
  </div>

  
    <article id="docs-content">
      <section id="s-django-2-0-release-notes">
<span id="django-2-0-release-notes"></span><h1>Django 2.0 release notes<a class="headerlink" href="#django-2-0-release-notes" title="Link to this heading">¶</a></h1>
<p><em>December 2, 2017</em></p>
<p>Welcome to Django 2.0!</p>
<p>These release notes cover the <a class="reference internal" href="#whats-new-2-0"><span class="std std-ref">new features</span></a>, as well as
some <a class="reference internal" href="#backwards-incompatible-2-0"><span class="std std-ref">backwards incompatible changes</span></a> you’ll
want to be aware of when upgrading from Django 1.11 or earlier. We’ve
<a class="reference internal" href="#removed-features-2-0"><span class="std std-ref">dropped some features</span></a> that have reached the end of
their deprecation cycle, and we’ve <a class="reference internal" href="#deprecated-features-2-0"><span class="std std-ref">begun the deprecation process for some
features</span></a>.</p>
<p>This release starts Django’s use of a <a class="reference internal" href="../../internals/release-process/#internal-release-cadence"><span class="std std-ref">loose form of semantic versioning</span></a>, but there aren’t any major backwards incompatible
changes that might be expected of a 2.0 release. Upgrading should be a similar
amount of effort as past feature releases.</p>
<p>See the <a class="reference internal" href="../../howto/upgrade-version/"><span class="doc">How to upgrade Django to a newer version</span></a> guide if you’re updating an existing
project.</p>
<section id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python compatibility<a class="headerlink" href="#python-compatibility" title="Link to this heading">¶</a></h2>
<p>Django 2.0 supports Python 3.4, 3.5, 3.6, and 3.7. We <strong>highly recommend</strong> and
only officially support the latest release of each series.</p>
<p>The Django 1.11.x series is the last to support Python 2.7.</p>
<p>Django 2.0 will be the last release series to support Python 3.4. If you plan
a deployment of Python 3.4 beyond the end-of-life for Django 2.0 (April 2019),
stick with Django 1.11 LTS (supported until April 2020) instead. Note, however,
that the end-of-life for Python 3.4 is March 2019.</p>
</section>
<section id="s-third-party-library-support-for-older-version-of-django">
<span id="third-party-library-support-for-older-version-of-django"></span><h2>Third-party library support for older version of Django<a class="headerlink" href="#third-party-library-support-for-older-version-of-django" title="Link to this heading">¶</a></h2>
<p>Following the release of Django 2.0, we suggest that third-party app authors
drop support for all versions of Django prior to 1.11. At that time, you should
be able to run your package’s tests using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-Wd</span></code> so that deprecation
warnings do appear. After making the deprecation warning fixes, your app should
be compatible with Django 2.0.</p>
</section>
<section id="s-what-s-new-in-django-2-0">
<span id="s-whats-new-2-0"></span><span id="what-s-new-in-django-2-0"></span><span id="whats-new-2-0"></span><h2>What’s new in Django 2.0<a class="headerlink" href="#what-s-new-in-django-2-0" title="Link to this heading">¶</a></h2>
<section id="s-simplified-url-routing-syntax">
<span id="simplified-url-routing-syntax"></span><h3>Simplified URL routing syntax<a class="headerlink" href="#simplified-url-routing-syntax" title="Link to this heading">¶</a></h3>
<p>The new <a class="reference internal" href="../../ref/urls/#django.urls.path" title="django.urls.path"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.urls.path()</span></code></a> function allows a simpler, more readable URL
routing syntax. For example, this example from previous Django releases:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^articles/(?P&lt;year&gt;[0-9]</span><span class="si">{4}</span><span class="s2">)/$&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">year_archive</span><span class="p">),</span>
</pre></div>
</div>
<p>could be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span><span class="p">(</span><span class="s2">&quot;articles/&lt;int:year&gt;/&quot;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">year_archive</span><span class="p">),</span>
</pre></div>
</div>
<p>The new syntax supports type coercion of URL parameters. In the example, the
view will receive the <code class="docutils literal notranslate"><span class="pre">year</span></code> keyword argument as an integer rather than as
a string. Also, the URLs that will match are slightly less constrained in the
rewritten example. For example, the year 10000 will now match since the year
integers aren’t constrained to be exactly four digits long as they are in the
regular expression.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">django.conf.urls.url()</span></code> function from previous versions is now available
as <a class="reference internal" href="../../ref/urls/#django.urls.re_path" title="django.urls.re_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.urls.re_path()</span></code></a>. The old location remains for backwards
compatibility, without an imminent deprecation. The old
<code class="docutils literal notranslate"><span class="pre">django.conf.urls.include()</span></code> function is now importable from <code class="docutils literal notranslate"><span class="pre">django.urls</span></code>
so you can use <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">django.urls</span> <span class="pre">import</span> <span class="pre">include,</span> <span class="pre">path,</span> <span class="pre">re_path</span></code> in your
URLconfs.</p>
<p>The <a class="reference internal" href="../../topics/http/urls/"><span class="doc">URL dispatcher</span></a> document is rewritten to feature the new syntax
and provide more details.</p>
</section>
<section id="s-mobile-friendly-contrib-admin">
<span id="mobile-friendly-contrib-admin"></span><h3>Mobile-friendly <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code><a class="headerlink" href="#mobile-friendly-contrib-admin" title="Link to this heading">¶</a></h3>
<p>The admin is now responsive and supports all major mobile devices. Older
browsers may experience varying levels of graceful degradation.</p>
</section>
<section id="s-window-expressions">
<span id="window-expressions"></span><h3>Window expressions<a class="headerlink" href="#window-expressions" title="Link to this heading">¶</a></h3>
<p>The new <a class="reference internal" href="../../ref/models/expressions/#django.db.models.expressions.Window" title="django.db.models.expressions.Window"><code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code></a> expression allows
adding an <code class="docutils literal notranslate"><span class="pre">OVER</span></code> clause to querysets. You can use <a class="reference internal" href="../../ref/models/database-functions/#window-functions"><span class="std std-ref">window functions</span></a> and <a class="reference internal" href="../../ref/models/querysets/#aggregation-functions"><span class="std std-ref">aggregate functions</span></a> in
the expression.</p>
</section>
<section id="s-minor-features">
<span id="minor-features"></span><h3>Minor features<a class="headerlink" href="#minor-features" title="Link to this heading">¶</a></h3>
<section id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../../ref/contrib/admin/#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.autocomplete_fields" title="django.contrib.admin.ModelAdmin.autocomplete_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.autocomplete_fields</span></code></a> attribute and
<a class="reference internal" href="../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_autocomplete_fields" title="django.contrib.admin.ModelAdmin.get_autocomplete_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ModelAdmin.get_autocomplete_fields()</span></code></a> method allow using a
<a class="reference external" href="https://select2.org/">Select2</a> search widget for <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and
<code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>.</p></li>
</ul>
</section>
<section id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../../topics/auth/#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The default iteration count for the PBKDF2 password hasher is increased from
36,000 to 100,000.</p></li>
</ul>
</section>
<section id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../../ref/contrib/gis/#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added MySQL support for the
<a class="reference internal" href="../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.AsGeoJSON" title="django.contrib.gis.db.models.functions.AsGeoJSON"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsGeoJSON</span></code></a> function,
<a class="reference internal" href="../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.GeoHash" title="django.contrib.gis.db.models.functions.GeoHash"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoHash</span></code></a> function,
<a class="reference internal" href="../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.IsValid" title="django.contrib.gis.db.models.functions.IsValid"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsValid</span></code></a> function,
<a class="reference internal" href="../../ref/contrib/gis/geoquerysets/#std-fieldlookup-isvalid"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isvalid</span></code></a> lookup, and <a class="reference internal" href="../../ref/contrib/gis/geoquerysets/#distance-lookups"><span class="std std-ref">distance lookups</span></a>.</p></li>
<li><p>Added the <a class="reference internal" href="../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.Azimuth" title="django.contrib.gis.db.models.functions.Azimuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">Azimuth</span></code></a> and
<a class="reference internal" href="../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.LineLocatePoint" title="django.contrib.gis.db.models.functions.LineLocatePoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineLocatePoint</span></code></a> functions,
supported on PostGIS and SpatiaLite.</p></li>
<li><p>Any <a class="reference internal" href="../../ref/contrib/gis/geos/#django.contrib.gis.geos.GEOSGeometry" title="django.contrib.gis.geos.GEOSGeometry"><code class="xref py py-class docutils literal notranslate"><span class="pre">GEOSGeometry</span></code></a> imported from GeoJSON now
has its SRID set.</p></li>
<li><p>Added the <a class="reference internal" href="../../ref/contrib/gis/forms-api/#django.contrib.gis.forms.widgets.OSMWidget.default_zoom" title="django.contrib.gis.forms.widgets.OSMWidget.default_zoom"><code class="xref py py-attr docutils literal notranslate"><span class="pre">OSMWidget.default_zoom</span></code></a> attribute to customize the map’s
default zoom level.</p></li>
<li><p>Made metadata readable and editable on rasters through the
<a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALRaster.metadata" title="django.contrib.gis.gdal.GDALRaster.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code></a>,
<a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALRaster.info" title="django.contrib.gis.gdal.GDALRaster.info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">info</span></code></a>, and
<a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALBand.metadata" title="django.contrib.gis.gdal.GDALBand.metadata"><code class="xref py py-attr docutils literal notranslate"><span class="pre">metadata</span></code></a> attributes.</p></li>
<li><p>Allowed passing driver-specific creation options to
<a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> objects using <code class="docutils literal notranslate"><span class="pre">papsz_options</span></code>.</p></li>
<li><p>Allowed creating <a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> objects in
GDAL’s internal virtual filesystem. Rasters can now be <a class="reference internal" href="../../ref/contrib/gis/gdal/#gdal-raster-vsimem"><span class="std std-ref">created from and
converted to binary data</span></a> in-memory.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/gis/gdal/#django.contrib.gis.gdal.GDALBand.color_interp" title="django.contrib.gis.gdal.GDALBand.color_interp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GDALBand.color_interp()</span></code></a> method returns the color
interpretation for the band.</p></li>
</ul>
</section>
<section id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../../ref/contrib/postgres/#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <code class="docutils literal notranslate"><span class="pre">distinct</span></code> argument for
<a class="reference internal" href="../../ref/contrib/postgres/aggregates/#django.contrib.postgres.aggregates.ArrayAgg" title="django.contrib.postgres.aggregates.ArrayAgg"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayAgg</span></code></a> determines if
concatenated values will be distinct.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/functions/#django.contrib.postgres.functions.RandomUUID" title="django.contrib.postgres.functions.RandomUUID"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomUUID</span></code></a> database
function returns a version 4 UUID. It requires use of PostgreSQL’s
<code class="docutils literal notranslate"><span class="pre">pgcrypto</span></code> extension which can be activated using the new
<a class="reference internal" href="../../ref/contrib/postgres/operations/#django.contrib.postgres.operations.CryptoExtension" title="django.contrib.postgres.operations.CryptoExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">CryptoExtension</span></code></a> migration
operation.</p></li>
<li><p><a class="reference internal" href="../../ref/contrib/postgres/indexes/#django.contrib.postgres.indexes.GinIndex" title="django.contrib.postgres.indexes.GinIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.contrib.postgres.indexes.GinIndex</span></code></a> now supports the
<code class="docutils literal notranslate"><span class="pre">fastupdate</span></code> and <code class="docutils literal notranslate"><span class="pre">gin_pending_list_limit</span></code> parameters.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/contrib/postgres/indexes/#django.contrib.postgres.indexes.GistIndex" title="django.contrib.postgres.indexes.GistIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">GistIndex</span></code></a> class allows
creating <code class="docutils literal notranslate"><span class="pre">GiST</span></code> indexes in the database. The new
<a class="reference internal" href="../../ref/contrib/postgres/operations/#django.contrib.postgres.operations.BtreeGistExtension" title="django.contrib.postgres.operations.BtreeGistExtension"><code class="xref py py-class docutils literal notranslate"><span class="pre">BtreeGistExtension</span></code></a> migration
operation installs the <code class="docutils literal notranslate"><span class="pre">btree_gist</span></code> extension to add support for operator
classes that aren’t built-in.</p></li>
<li><p><a class="reference internal" href="../../ref/django-admin/#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> can now introspect <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> and various
<code class="docutils literal notranslate"><span class="pre">RangeField</span></code>s (<code class="docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code> must be in <code class="docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code>).</p></li>
</ul>
</section>
<section id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../../ref/contrib/sitemaps/#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a><a class="headerlink" href="#django-contrib-sitemaps" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">protocol</span></code> keyword argument to the
<a class="reference internal" href="../../ref/contrib/sitemaps/#django.contrib.sitemaps.GenericSitemap" title="django.contrib.sitemaps.GenericSitemap"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericSitemap</span></code></a> constructor.</p></li>
</ul>
</section>
<section id="s-cache">
<span id="cache"></span><h4>Cache<a class="headerlink" href="#cache" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache.set_many()</span></code> now returns a list of keys that failed to be inserted.
For the built-in backends, failed inserts can only happen on memcached.</p></li>
</ul>
</section>
<section id="s-file-storage">
<span id="file-storage"></span><h4>File Storage<a class="headerlink" href="#file-storage" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/files/file/#django.core.files.File.open" title="django.core.files.File.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">File.open()</span></code></a> can be used as a context
manager, e.g. <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">file.open()</span> <span class="pre">as</span> <span class="pre">f:</span></code>.</p></li>
</ul>
</section>
<section id="s-forms">
<span id="forms"></span><h4>Forms<a class="headerlink" href="#forms" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <code class="docutils literal notranslate"><span class="pre">date_attrs</span></code> and <code class="docutils literal notranslate"><span class="pre">time_attrs</span></code> arguments for
<a class="reference internal" href="../../ref/forms/widgets/#django.forms.SplitDateTimeWidget" title="django.forms.SplitDateTimeWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">SplitDateTimeWidget</span></code></a> and
<a class="reference internal" href="../../ref/forms/widgets/#django.forms.SplitHiddenDateTimeWidget" title="django.forms.SplitHiddenDateTimeWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">SplitHiddenDateTimeWidget</span></code></a> allow specifying different
HTML attributes for the <code class="docutils literal notranslate"><span class="pre">DateInput</span></code> and <code class="docutils literal notranslate"><span class="pre">TimeInput</span></code> (or hidden)
subwidgets.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/forms/api/#django.forms.Form.errors.get_json_data" title="django.forms.Form.errors.get_json_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Form.errors.get_json_data()</span></code></a> method returns form errors as
a dictionary suitable for including in a JSON response.</p></li>
</ul>
</section>
<section id="s-generic-views">
<span id="generic-views"></span><h4>Generic Views<a class="headerlink" href="#generic-views" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/class-based-views/mixins-simple/#django.views.generic.base.ContextMixin.extra_context" title="django.views.generic.base.ContextMixin.extra_context"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ContextMixin.extra_context</span></code></a> attribute allows adding context
in <code class="docutils literal notranslate"><span class="pre">View.as_view()</span></code>.</p></li>
</ul>
</section>
<section id="s-management-commands">
<span id="management-commands"></span><h4>Management Commands<a class="headerlink" href="#management-commands" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../../ref/django-admin/#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> now translates MySQL’s unsigned integer columns to
<code class="docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code> or <code class="docutils literal notranslate"><span class="pre">PositiveSmallIntegerField</span></code>.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-makemessages-add-location"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemessages</span> <span class="pre">--add-location</span></code></a> option controls the comment
format in <code class="docutils literal notranslate"><span class="pre">.po</span></code> files.</p></li>
<li><p><a class="reference internal" href="../../ref/django-admin/#django-admin-loaddata"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">loaddata</span></code></a> can now <a class="reference internal" href="../../ref/django-admin/#loading-fixtures-stdin"><span class="std std-ref">read from stdin</span></a>.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-diffsettings-output"><code class="xref std std-option docutils literal notranslate"><span class="pre">diffsettings</span> <span class="pre">--output</span></code></a> option allows formatting the output
in a unified diff format.</p></li>
<li><p>On Oracle, <a class="reference internal" href="../../ref/django-admin/#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> can now introspect <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> if the
column is created as an identity column.</p></li>
<li><p>On MySQL, <a class="reference internal" href="../../ref/django-admin/#django-admin-dbshell"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">dbshell</span></code></a> now supports client-side TLS certificates.</p></li>
</ul>
</section>
<section id="s-migrations">
<span id="migrations"></span><h4>Migrations<a class="headerlink" href="#migrations" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/django-admin/#cmdoption-squashmigrations-squashed-name"><code class="xref std std-option docutils literal notranslate"><span class="pre">squashmigrations</span> <span class="pre">--squashed-name</span></code></a> option allows naming the
squashed migration.</p></li>
</ul>
</section>
<section id="s-models">
<span id="models"></span><h4>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.StrIndex" title="django.db.models.functions.StrIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrIndex</span></code></a> database function
finds the starting index of a string inside another string.</p></li>
<li><p>On Oracle, <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> and <code class="docutils literal notranslate"><span class="pre">BigAutoField</span></code> are now created as <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/21/drdaa/intro-to-tools-and-products-supporting-migraiton.html#GUID-14E4817B-F3BC-4D99-B471-A0ACDC303CC9">identity
columns</a>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> parameter of <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.iterator" title="django.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a> controls the
number of rows fetched by the Python database client when streaming results
from the database. For databases that don’t support server-side cursors, it
controls the number of results Django fetches from the database adapter.</p></li>
<li><p><a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.earliest" title="django.db.models.query.QuerySet.earliest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.earliest()</span></code></a>, <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.latest" title="django.db.models.query.QuerySet.latest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.latest()</span></code></a>, and
<a class="reference internal" href="../../ref/models/options/#django.db.models.Options.get_latest_by" title="django.db.models.Options.get_latest_by"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.get_latest_by</span></code></a> now
allow ordering by several fields.</p></li>
<li><p>Added the <a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.ExtractQuarter" title="django.db.models.functions.ExtractQuarter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtractQuarter</span></code></a> function to
extract the quarter from <a class="reference internal" href="../../ref/models/fields/#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> and
<a class="reference internal" href="../../ref/models/fields/#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a>, and exposed it through the
<a class="reference internal" href="../../ref/models/querysets/#std-fieldlookup-quarter"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">quarter</span></code></a> lookup.</p></li>
<li><p>Added the <a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.TruncQuarter" title="django.db.models.functions.TruncQuarter"><code class="xref py py-class docutils literal notranslate"><span class="pre">TruncQuarter</span></code></a> function to
truncate <a class="reference internal" href="../../ref/models/fields/#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> and
<a class="reference internal" href="../../ref/models/fields/#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> to the first day of a quarter.</p></li>
<li><p>Added the <a class="reference internal" href="../../ref/models/indexes/#django.db.models.Index.db_tablespace" title="django.db.models.Index.db_tablespace"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_tablespace</span></code></a> parameter to
class-based indexes.</p></li>
<li><p>If the database supports a native duration field (Oracle and PostgreSQL),
<a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.Extract" title="django.db.models.functions.Extract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extract</span></code></a> now works with
<a class="reference internal" href="../../ref/models/fields/#django.db.models.DurationField" title="django.db.models.DurationField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DurationField</span></code></a>.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">of</span></code> argument to <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.select_for_update()</span></code></a>, supported
on PostgreSQL and Oracle, to lock only rows from specific tables rather than
all selected tables. It may be helpful particularly when
<a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_for_update()</span></code></a> is used in conjunction with
<a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.select_related" title="django.db.models.query.QuerySet.select_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select_related()</span></code></a>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">field_name</span></code> parameter of <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.in_bulk" title="django.db.models.query.QuerySet.in_bulk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.in_bulk()</span></code></a> allows fetching
results based on any unique model field.</p></li>
<li><p><a class="reference internal" href="../../topics/db/sql/#django.db.models.CursorWrapper.callproc" title="django.db.models.CursorWrapper.callproc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CursorWrapper.callproc()</span></code></a> now takes an optional dictionary of keyword
parameters, if the backend supports this feature. Of Django’s built-in
backends, only Oracle supports it.</p></li>
<li><p>The new <a class="reference internal" href="../../topics/db/instrumentation/#django.db.backends.base.DatabaseWrapper.execute_wrapper" title="django.db.backends.base.DatabaseWrapper.execute_wrapper"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connection.execute_wrapper()</span></code></a> method allows
<a class="reference internal" href="../../topics/db/instrumentation/"><span class="doc">installing wrappers around execution of database queries</span></a>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">filter</span></code> argument for built-in aggregates allows <a class="reference internal" href="../../ref/models/conditional-expressions/#conditional-aggregation"><span class="std std-ref">adding
different conditionals</span></a> to multiple aggregations
over the same fields or relations.</p></li>
<li><p>Added support for expressions in <a class="reference internal" href="../../ref/models/options/#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.ordering</span></code></a>.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">named</span></code> parameter of <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.values_list" title="django.db.models.query.QuerySet.values_list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.values_list()</span></code></a> allows fetching
results as named tuples.</p></li>
<li><p>The new <a class="reference internal" href="../../ref/models/querysets/#django.db.models.FilteredRelation" title="django.db.models.FilteredRelation"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilteredRelation</span></code></a> class allows adding an <code class="docutils literal notranslate"><span class="pre">ON</span></code> clause to
querysets.</p></li>
</ul>
</section>
<section id="s-pagination">
<span id="pagination"></span><h4>Pagination<a class="headerlink" href="#pagination" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added <a class="reference internal" href="../../ref/paginator/#django.core.paginator.Paginator.get_page" title="django.core.paginator.Paginator.get_page"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Paginator.get_page()</span></code></a>
to provide the documented pattern of handling invalid page numbers.</p></li>
</ul>
</section>
<section id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Requests and Responses<a class="headerlink" href="#requests-and-responses" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The <a class="reference internal" href="../../ref/django-admin/#django-admin-runserver"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">runserver</span></code></a> web server supports HTTP 1.1.</p></li>
</ul>
</section>
<section id="s-templates">
<span id="templates"></span><h4>Templates<a class="headerlink" href="#templates" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>To increase the usefulness of <a class="reference internal" href="../../ref/templates/api/#django.template.Engine.get_default" title="django.template.Engine.get_default"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Engine.get_default()</span></code></a> in third-party
apps, it now returns the first engine if multiple <code class="docutils literal notranslate"><span class="pre">DjangoTemplates</span></code> engines
are configured in <code class="docutils literal notranslate"><span class="pre">TEMPLATES</span></code> rather than raising <code class="docutils literal notranslate"><span class="pre">ImproperlyConfigured</span></code>.</p></li>
<li><p>Custom template tags may now accept keyword-only arguments.</p></li>
</ul>
</section>
<section id="s-tests">
<span id="tests"></span><h4>Tests<a class="headerlink" href="#tests" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added threading support to <a class="reference internal" href="../../topics/testing/tools/#django.test.LiveServerTestCase" title="django.test.LiveServerTestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiveServerTestCase</span></code></a>.</p></li>
<li><p>Added settings that allow customizing the test tablespace parameters for
Oracle: <a class="reference internal" href="../../ref/settings/#std-setting-DATAFILE_SIZE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATAFILE_SIZE</span></code></a>, <a class="reference internal" href="../../ref/settings/#std-setting-DATAFILE_TMP_SIZE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATAFILE_TMP_SIZE</span></code></a>,
<a class="reference internal" href="../../ref/settings/#std-setting-DATAFILE_EXTSIZE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATAFILE_EXTSIZE</span></code></a>, and <a class="reference internal" href="../../ref/settings/#std-setting-DATAFILE_TMP_EXTSIZE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATAFILE_TMP_EXTSIZE</span></code></a>.</p></li>
</ul>
</section>
<section id="s-validators">
<span id="validators"></span><h4>Validators<a class="headerlink" href="#validators" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../../ref/validators/#django.core.validators.ProhibitNullCharactersValidator" title="django.core.validators.ProhibitNullCharactersValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProhibitNullCharactersValidator</span></code></a> disallows the null
character in the input of the <a class="reference internal" href="../../ref/forms/fields/#django.forms.CharField" title="django.forms.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> form field
and its subclasses. Null character input was observed from vulnerability
scanning tools. Most databases silently discard null characters, but
psycopg2 2.7+ raises an exception when trying to save a null character to
a char/text field with PostgreSQL.</p></li>
</ul>
</section>
</section>
</section>
<section id="s-backwards-incompatible-changes-in-2-0">
<span id="s-backwards-incompatible-2-0"></span><span id="backwards-incompatible-changes-in-2-0"></span><span id="backwards-incompatible-2-0"></span><h2>Backwards incompatible changes in 2.0<a class="headerlink" href="#backwards-incompatible-changes-in-2-0" title="Link to this heading">¶</a></h2>
<section id="s-removed-support-for-bytestrings-in-some-places">
<span id="removed-support-for-bytestrings-in-some-places"></span><h3>Removed support for bytestrings in some places<a class="headerlink" href="#removed-support-for-bytestrings-in-some-places" title="Link to this heading">¶</a></h3>
<p>To support native Python 2 strings, older Django versions had to accept both
bytestrings and Unicode strings. Now that Python 2 support is dropped,
bytestrings should only be encountered around input/output boundaries (handling
of binary fields or HTTP streams, for example). You might have to update your
code to limit bytestring usage to a minimum, as Django no longer accepts
bytestrings in certain code paths. Python’s <a class="reference external" href="https://docs.python.org/3/using/cmdline.html#cmdoption-b" title="(in Python v3.14)"><code class="xref std std-option docutils literal notranslate"><span class="pre">-b</span></code></a> option may help detect
that mistake in your code.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">reverse()</span></code> now uses <code class="docutils literal notranslate"><span class="pre">str()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">force_text()</span></code> to
coerce the <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> it receives, prior to their placement in
the URL. For bytestrings, this creates a string with an undesired <code class="docutils literal notranslate"><span class="pre">b</span></code> prefix
as well as additional quotes (<code class="docutils literal notranslate"><span class="pre">str(b'foo')</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;b'foo'&quot;</span></code>). To adapt, call
<code class="docutils literal notranslate"><span class="pre">decode()</span></code> on the bytestring before passing it to <code class="docutils literal notranslate"><span class="pre">reverse()</span></code>.</p>
</section>
<section id="s-database-backend-api">
<span id="database-backend-api"></span><h3>Database backend API<a class="headerlink" href="#database-backend-api" title="Link to this heading">¶</a></h3>
<p>This section describes changes that may be needed in third-party database
backends.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">DatabaseOperations.datetime_cast_date_sql()</span></code>,
<code class="docutils literal notranslate"><span class="pre">datetime_cast_time_sql()</span></code>, <code class="docutils literal notranslate"><span class="pre">datetime_trunc_sql()</span></code>,
<code class="docutils literal notranslate"><span class="pre">datetime_extract_sql()</span></code>, and <code class="docutils literal notranslate"><span class="pre">date_interval_sql()</span></code> methods now return
only the SQL to perform the operation instead of SQL and a list of
parameters.</p></li>
<li><p>Third-party database backends should add a <code class="docutils literal notranslate"><span class="pre">DatabaseWrapper.display_name</span></code>
attribute with the name of the database that your backend works with. Django
may use it in various messages, such as in system checks.</p></li>
<li><p>The first argument of <code class="docutils literal notranslate"><span class="pre">SchemaEditor._alter_column_type_sql()</span></code> is now
<code class="docutils literal notranslate"><span class="pre">model</span></code> rather than <code class="docutils literal notranslate"><span class="pre">table</span></code>.</p></li>
<li><p>The first argument of <code class="docutils literal notranslate"><span class="pre">SchemaEditor._create_index_name()</span></code> is now
<code class="docutils literal notranslate"><span class="pre">table_name</span></code> rather than <code class="docutils literal notranslate"><span class="pre">model</span></code>.</p></li>
<li><p>To enable <code class="docutils literal notranslate"><span class="pre">FOR</span> <span class="pre">UPDATE</span> <span class="pre">OF</span></code> support, set
<code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.has_select_for_update_of</span> <span class="pre">=</span> <span class="pre">True</span></code>. If the database
requires that the arguments to <code class="docutils literal notranslate"><span class="pre">OF</span></code> be columns rather than tables, set
<code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.select_for_update_of_column</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p></li>
<li><p>To enable support for <a class="reference internal" href="../../ref/models/expressions/#django.db.models.expressions.Window" title="django.db.models.expressions.Window"><code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code></a>
expressions, set <code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.supports_over_clause</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>. You
may need to customize the
<code class="docutils literal notranslate"><span class="pre">DatabaseOperations.window_start_rows_start_end()</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">window_start_range_start_end()</span></code> methods.</p></li>
<li><p>Third-party database backends should add a
<code class="docutils literal notranslate"><span class="pre">DatabaseOperations.cast_char_field_without_max_length</span></code> attribute with the
database data type that will be used in the
<a class="reference internal" href="../../ref/models/database-functions/#django.db.models.functions.Cast" title="django.db.models.functions.Cast"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cast</span></code></a> function for a <code class="docutils literal notranslate"><span class="pre">CharField</span></code> if the
<code class="docutils literal notranslate"><span class="pre">max_length</span></code> argument isn’t provided.</p></li>
<li><p>The first argument of <code class="docutils literal notranslate"><span class="pre">DatabaseCreation._clone_test_db()</span></code> and
<code class="docutils literal notranslate"><span class="pre">get_test_db_clone_settings()</span></code> is now <code class="docutils literal notranslate"><span class="pre">suffix</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">number</span></code> (in case you want to rename the signatures in your backend
for consistency). <code class="docutils literal notranslate"><span class="pre">django.test</span></code> also now passes those values as strings
rather than as integers.</p></li>
<li><p>Third-party database backends should add a
<code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_sequences()</span></code> method based on the stub in
<code class="docutils literal notranslate"><span class="pre">BaseDatabaseIntrospection</span></code>.</p></li>
</ul>
</section>
<section id="s-dropped-support-for-oracle-11-2">
<span id="dropped-support-for-oracle-11-2"></span><h3>Dropped support for Oracle 11.2<a class="headerlink" href="#dropped-support-for-oracle-11-2" title="Link to this heading">¶</a></h3>
<p>The end of upstream support for Oracle 11.2 is Dec. 2020. Django 1.11 will be
supported until April 2020 which almost reaches this date. Django 2.0
officially supports Oracle 12.1+.</p>
</section>
<section id="s-default-mysql-isolation-level-is-read-committed">
<span id="default-mysql-isolation-level-is-read-committed"></span><h3>Default MySQL isolation level is read committed<a class="headerlink" href="#default-mysql-isolation-level-is-read-committed" title="Link to this heading">¶</a></h3>
<p>MySQL’s default isolation level, repeatable read, may cause data loss in
typical Django usage. To prevent that and for consistency with other databases,
the default isolation level is now read committed. You can use the
<a class="reference internal" href="../../ref/settings/#std-setting-DATABASES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DATABASES</span></code></a> setting to <a class="reference internal" href="../../ref/databases/#mysql-isolation-level"><span class="std std-ref">use a different isolation level</span></a>, if needed.</p>
</section>
<section id="s-abstractuser-last-name-max-length-increased-to-150">
<span id="abstractuser-last-name-max-length-increased-to-150"></span><h3><a class="reference internal" href="../../ref/contrib/auth/#django.contrib.auth.models.User.last_name" title="django.contrib.auth.models.User.last_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AbstractUser.last_name</span></code></a> <code class="docutils literal notranslate"><span class="pre">max_length</span></code> increased to 150<a class="headerlink" href="#abstractuser-last-name-max-length-increased-to-150" title="Link to this heading">¶</a></h3>
<p>A migration for <a class="reference internal" href="../../ref/contrib/auth/#django.contrib.auth.models.User.last_name" title="django.contrib.auth.models.User.last_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">django.contrib.auth.models.User.last_name</span></code></a> is included.
If you have a custom user model inheriting from <code class="docutils literal notranslate"><span class="pre">AbstractUser</span></code>, you’ll need
to generate and apply a database migration for your user model.</p>
<p>If you want to preserve the 30 character limit for last names, use a custom
form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.forms</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserChangeForm</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyUserChangeForm</span><span class="p">(</span><span class="n">UserChangeForm</span><span class="p">):</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If you wish to keep this restriction in the admin when editing users, set
<code class="docutils literal notranslate"><span class="pre">UserAdmin.form</span></code> to use this form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.admin</span><span class="w"> </span><span class="kn">import</span> <span class="n">UserAdmin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyUserAdmin</span><span class="p">(</span><span class="n">UserAdmin</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyUserChangeForm</span>


<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">MyUserAdmin</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-queryset-reverse-and-last-are-prohibited-after-slicing">
<span id="queryset-reverse-and-last-are-prohibited-after-slicing"></span><h3><code class="docutils literal notranslate"><span class="pre">QuerySet.reverse()</span></code> and <code class="docutils literal notranslate"><span class="pre">last()</span></code> are prohibited after slicing<a class="headerlink" href="#queryset-reverse-and-last-are-prohibited-after-slicing" title="Link to this heading">¶</a></h3>
<p>Calling <code class="docutils literal notranslate"><span class="pre">QuerySet.reverse()</span></code> or <code class="docutils literal notranslate"><span class="pre">last()</span></code> on a sliced queryset leads to
unexpected results due to the slice being applied after reordering. This is
now prohibited, e.g.:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">Cannot reverse a query once a slice has been taken.</span>
</pre></div>
</div>
</section>
<section id="s-form-fields-no-longer-accept-optional-arguments-as-positional-arguments">
<span id="form-fields-no-longer-accept-optional-arguments-as-positional-arguments"></span><h3>Form fields no longer accept optional arguments as positional arguments<a class="headerlink" href="#form-fields-no-longer-accept-optional-arguments-as-positional-arguments" title="Link to this heading">¶</a></h3>
<p>To help prevent runtime errors due to incorrect ordering of form field
arguments, optional arguments of built-in form fields are no longer accepted
as positional arguments. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>raises an exception and should be replaced with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">max_value</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-call-command-validates-the-options-it-receives">
<span id="call-command-validates-the-options-it-receives"></span><h3><code class="docutils literal notranslate"><span class="pre">call_command()</span></code> validates the options it receives<a class="headerlink" href="#call-command-validates-the-options-it-receives" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">call_command()</span></code> now validates that the argument parser of the command being
called defines all of the options passed to <code class="docutils literal notranslate"><span class="pre">call_command()</span></code>.</p>
<p>For custom management commands that use options not created using
<code class="docutils literal notranslate"><span class="pre">parser.add_argument()</span></code>, add a <code class="docutils literal notranslate"><span class="pre">stealth_options</span></code> attribute on the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyCommand</span><span class="p">(</span><span class="n">BaseCommand</span><span class="p">):</span>
    <span class="n">stealth_options</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;option_name&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-indexes-no-longer-accept-positional-arguments">
<span id="indexes-no-longer-accept-positional-arguments"></span><h3>Indexes no longer accept positional arguments<a class="headerlink" href="#indexes-no-longer-accept-positional-arguments" title="Link to this heading">¶</a></h3>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s2">&quot;headline&quot;</span><span class="p">,</span> <span class="s2">&quot;-pub_date&quot;</span><span class="p">],</span> <span class="s2">&quot;index_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>raises an exception and should be replaced with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;headline&quot;</span><span class="p">,</span> <span class="s2">&quot;-pub_date&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;index_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-foreign-key-constraints-are-now-enabled-on-sqlite">
<span id="foreign-key-constraints-are-now-enabled-on-sqlite"></span><h3>Foreign key constraints are now enabled on SQLite<a class="headerlink" href="#foreign-key-constraints-are-now-enabled-on-sqlite" title="Link to this heading">¶</a></h3>
<p>This will appear as a backwards-incompatible change (<code class="docutils literal notranslate"><span class="pre">IntegrityError:</span>
<span class="pre">FOREIGN</span> <span class="pre">KEY</span> <span class="pre">constraint</span> <span class="pre">failed</span></code>) if attempting to save an existing model
instance that’s violating a foreign key constraint.</p>
<p>Foreign keys are now created with <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span> <span class="pre">INITIALLY</span> <span class="pre">DEFERRED</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span> <span class="pre">IMMEDIATE</span></code>. Thus, tables may need to be rebuilt to recreate
foreign keys with the new definition, particularly if you’re using a pattern
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">transaction</span>

<span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
    <span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">author_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">Author</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>If you don’t recreate the foreign key as <code class="docutils literal notranslate"><span class="pre">DEFERRED</span></code>, the first <code class="docutils literal notranslate"><span class="pre">create()</span></code>
would fail now that foreign key constraints are enforced.</p>
<p>Backup your database first! After upgrading to Django 2.0, you can then
rebuild tables using a script similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.apps</span><span class="w"> </span><span class="kn">import</span> <span class="n">apps</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">connection</span>

<span class="k">for</span> <span class="n">app</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_app_configs</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">get_models</span><span class="p">(</span><span class="n">include_auto_created</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">managed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span> <span class="ow">or</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s2">&quot;_meta&quot;</span><span class="p">):</span>
                    <span class="n">base</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">local_many_to_many</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">local_many_to_many</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">schema_editor</span><span class="p">()</span> <span class="k">as</span> <span class="n">editor</span><span class="p">:</span>
                <span class="n">editor</span><span class="o">.</span><span class="n">_remake_table</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>This script hasn’t received extensive testing and needs adaption for various
cases such as multiple databases. Feel free to contribute improvements.</p>
<p>In addition, because of a table alteration limitation of SQLite, it’s
prohibited to perform <a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.RenameModel" title="django.db.migrations.operations.RenameModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameModel</span></code></a> and
<a class="reference internal" href="../../ref/migration-operations/#django.db.migrations.operations.RenameField" title="django.db.migrations.operations.RenameField"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameField</span></code></a> operations on models or
fields referenced by other models in a transaction. In order to allow
migrations containing these operations to be applied, you must set the
<code class="docutils literal notranslate"><span class="pre">Migration.atomic</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</section>
<section id="s-miscellaneous">
<span id="miscellaneous"></span><h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">SessionAuthenticationMiddleware</span></code> class is removed. It provided no
functionality since session authentication is unconditionally enabled in
Django 1.10.</p></li>
<li><p>The default HTTP error handlers (<code class="docutils literal notranslate"><span class="pre">handler404</span></code>, etc.) are now callables
instead of dotted Python path strings. Django favors callable references
since they provide better performance and debugging experience.</p></li>
<li><p><a class="reference internal" href="../../ref/class-based-views/base/#django.views.generic.base.RedirectView" title="django.views.generic.base.RedirectView"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedirectView</span></code></a> no longer silences
<code class="docutils literal notranslate"><span class="pre">NoReverseMatch</span></code> if the <code class="docutils literal notranslate"><span class="pre">pattern_name</span></code> doesn’t exist.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">USE_L10N</span></code> is off, <a class="reference internal" href="../../ref/forms/fields/#django.forms.FloatField" title="django.forms.FloatField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatField</span></code></a> and
<a class="reference internal" href="../../ref/forms/fields/#django.forms.DecimalField" title="django.forms.DecimalField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalField</span></code></a> now respect <a class="reference internal" href="../../ref/settings/#std-setting-DECIMAL_SEPARATOR"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DECIMAL_SEPARATOR</span></code></a>
and <a class="reference internal" href="../../ref/settings/#std-setting-THOUSAND_SEPARATOR"><code class="xref std std-setting docutils literal notranslate"><span class="pre">THOUSAND_SEPARATOR</span></code></a> during validation. For example, with the
settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">USE_L10N</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">USE_THOUSAND_SEPARATOR</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">DECIMAL_SEPARATOR</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
<span class="n">THOUSAND_SEPARATOR</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</pre></div>
</div>
<p>an input of <code class="docutils literal notranslate"><span class="pre">&quot;1.345&quot;</span></code> is now converted to <code class="docutils literal notranslate"><span class="pre">1345</span></code> instead of <code class="docutils literal notranslate"><span class="pre">1.345</span></code>.</p>
</li>
<li><p>Subclasses of <a class="reference internal" href="../../topics/auth/customizing/#django.contrib.auth.models.AbstractBaseUser" title="django.contrib.auth.models.AbstractBaseUser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractBaseUser</span></code></a> are no
longer required to implement <code class="docutils literal notranslate"><span class="pre">get_short_name()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_full_name()</span></code>.
(The base implementations that raise <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> are removed.)
<code class="docutils literal notranslate"><span class="pre">django.contrib.admin</span></code> uses these methods if implemented but doesn’t
require them. Third-party apps that use these methods may want to adopt a
similar approach.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">FIRST_DAY_OF_WEEK</span></code> and <code class="docutils literal notranslate"><span class="pre">NUMBER_GROUPING</span></code> format settings are now
kept as integers in JavaScript and JSON i18n view outputs.</p></li>
<li><p><a class="reference internal" href="../../topics/testing/tools/#django.test.TransactionTestCase.assertNumQueries" title="django.test.TransactionTestCase.assertNumQueries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNumQueries()</span></code></a> now ignores
connection configuration queries. Previously, if a test opened a new database
connection, those queries could be included as part of the
<code class="docutils literal notranslate"><span class="pre">assertNumQueries()</span></code> count.</p></li>
<li><p>The default size of the Oracle test tablespace is increased from 20M to 50M
and the default autoextend size is increased from 10M to 25M.</p></li>
<li><p>To improve performance when streaming large result sets from the database,
<a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.iterator" title="django.db.models.query.QuerySet.iterator"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.iterator()</span></code></a> now fetches 2000 rows at a time instead of 100.
The old behavior can be restored using the <code class="docutils literal notranslate"><span class="pre">chunk_size</span></code> parameter. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Book</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">iterator</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Providing unknown package names in the <code class="docutils literal notranslate"><span class="pre">packages</span></code> argument of the
<a class="reference internal" href="../../topics/i18n/translation/#django.views.i18n.JavaScriptCatalog" title="django.views.i18n.JavaScriptCatalog"><code class="xref py py-class docutils literal notranslate"><span class="pre">JavaScriptCatalog</span></code></a> view now raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
instead of passing silently.</p></li>
<li><p>A model instance’s primary key now appears in the default <code class="docutils literal notranslate"><span class="pre">Model.__str__()</span></code>
method, e.g. <code class="docutils literal notranslate"><span class="pre">Question</span> <span class="pre">object</span> <span class="pre">(1)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">makemigrations</span></code> now detects changes to the model field <code class="docutils literal notranslate"><span class="pre">limit_choices_to</span></code>
option. Add this to your existing migrations or accept an auto-generated
migration for fields that use it.</p></li>
<li><p>Performing queries that require <a class="reference internal" href="../../ref/contrib/gis/tutorial/#automatic-spatial-transformations"><span class="std std-ref">automatic spatial transformations</span></a> now raises <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>
on MySQL instead of silently using non-transformed geometries.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.core.exceptions.DjangoRuntimeWarning</span></code> is removed. It was only used
in the cache backend as an intermediate class in <code class="docutils literal notranslate"><span class="pre">CacheKeyWarning</span></code>’s
inheritance of <code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code>.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">BaseExpression._output_field</span></code> to <code class="docutils literal notranslate"><span class="pre">output_field</span></code>. You may need
to update custom expressions.</p></li>
<li><p>In older versions, forms and formsets combine their <code class="docutils literal notranslate"><span class="pre">Media</span></code> with widget
<code class="docutils literal notranslate"><span class="pre">Media</span></code> by concatenating the two. The combining now tries to <a class="reference internal" href="../../topics/forms/media/#form-media-asset-order"><span class="std std-ref">preserve
the relative order of elements in each list</span></a>.
<code class="docutils literal notranslate"><span class="pre">MediaOrderConflictWarning</span></code> is issued if the order can’t be preserved.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.gis.gdal.OGRException</span></code> is removed. It’s been an alias for
<code class="docutils literal notranslate"><span class="pre">GDALException</span></code> since Django 1.8.</p></li>
<li><p>Support for GEOS 3.3.x is dropped.</p></li>
<li><p>The way data is selected for <code class="docutils literal notranslate"><span class="pre">GeometryField</span></code> is changed to improve
performance, and in raw SQL queries, those fields must now be wrapped in
<code class="docutils literal notranslate"><span class="pre">connection.ops.select</span></code>. See the <a class="reference internal" href="../../ref/contrib/gis/tutorial/#gis-raw-sql"><span class="std std-ref">Raw queries note</span></a> in
the GIS tutorial for an example.</p></li>
</ul>
</section>
</section>
<section id="s-features-deprecated-in-2-0">
<span id="s-deprecated-features-2-0"></span><span id="features-deprecated-in-2-0"></span><span id="deprecated-features-2-0"></span><h2>Features deprecated in 2.0<a class="headerlink" href="#features-deprecated-in-2-0" title="Link to this heading">¶</a></h2>
<section id="s-context-argument-of-field-from-db-value-and-expression-convert-value">
<span id="context-argument-of-field-from-db-value-and-expression-convert-value"></span><h3><code class="docutils literal notranslate"><span class="pre">context</span></code> argument of <code class="docutils literal notranslate"><span class="pre">Field.from_db_value()</span></code> and <code class="docutils literal notranslate"><span class="pre">Expression.convert_value()</span></code><a class="headerlink" href="#context-argument-of-field-from-db-value-and-expression-convert-value" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">context</span></code> argument of <code class="docutils literal notranslate"><span class="pre">Field.from_db_value()</span></code> and
<code class="docutils literal notranslate"><span class="pre">Expression.convert_value()</span></code> is unused as it’s always an empty dictionary.
The signature of both methods is now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">connection</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>Support for the old signature in custom fields and expressions remains until
Django 3.0.</p>
</section>
<section id="s-id1">
<span id="id1"></span><h3>Miscellaneous<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql_psycopg2</span></code> module is deprecated in favor
of <code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql</span></code>. It’s been an alias since Django 1.9.
This only affects code that imports from the module directly. The
<code class="docutils literal notranslate"><span class="pre">DATABASES</span></code> setting can still use
<code class="docutils literal notranslate"><span class="pre">'django.db.backends.postgresql_psycopg2'</span></code>, though you can simplify that by
using the <code class="docutils literal notranslate"><span class="pre">'django.db.backends.postgresql'</span></code> name added in Django 1.9.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.shortcuts.render_to_response()</span></code> is deprecated in favor of
<a class="reference internal" href="../../topics/http/shortcuts/#django.shortcuts.render" title="django.shortcuts.render"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.shortcuts.render()</span></code></a>. <code class="docutils literal notranslate"><span class="pre">render()</span></code> takes the same arguments
except that it also requires a <code class="docutils literal notranslate"><span class="pre">request</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DEFAULT_CONTENT_TYPE</span></code> setting is deprecated. It doesn’t interact well
with third-party apps and is obsolete since HTML5 has mostly superseded
XHTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HttpRequest.xreadlines()</span></code> is deprecated in favor of iterating over the
request.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">field_name</span></code> keyword argument to <a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.earliest" title="django.db.models.query.QuerySet.earliest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.earliest()</span></code></a> and
<a class="reference internal" href="../../ref/models/querysets/#django.db.models.query.QuerySet.latest" title="django.db.models.query.QuerySet.latest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.latest()</span></code></a> is deprecated in favor of passing the field
names as arguments. Write <code class="docutils literal notranslate"><span class="pre">.earliest('pub_date')</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">.earliest(field_name='pub_date')</span></code>.</p></li>
</ul>
</section>
</section>
<section id="s-features-removed-in-2-0">
<span id="s-removed-features-2-0"></span><span id="features-removed-in-2-0"></span><span id="removed-features-2-0"></span><h2>Features removed in 2.0<a class="headerlink" href="#features-removed-in-2-0" title="Link to this heading">¶</a></h2>
<p>These features have reached the end of their deprecation cycle and are removed
in Django 2.0.</p>
<p>See <a class="reference internal" href="../1.9/#deprecated-features-1-9"><span class="std std-ref">Features deprecated in 1.9</span></a> for details on these changes, including how
to remove usage of these features.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">weak</span></code> argument to <code class="docutils literal notranslate"><span class="pre">django.dispatch.signals.Signal.disconnect()</span></code> is
removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.db.backends.base.BaseDatabaseOperations.check_aggregate_support()</span></code>
is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.forms.extras</span></code> package is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">assignment_tag</span></code> helper is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">host</span></code> argument to <code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertsRedirects()</span></code> is removed.
The compatibility layer which allows absolute URLs to be considered equal to
relative ones when the path is identical is also removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Field.rel</span></code> and <code class="docutils literal notranslate"><span class="pre">Field.remote_field.to</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">on_delete</span></code> argument for <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> and <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> is now
required in models and migrations. Consider squashing migrations so that you
have fewer of them to update.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.db.models.fields.add_lazy_relation()</span></code> is removed.</p></li>
<li><p>When time zone support is enabled, database backends that don’t support time
zones no longer convert aware datetimes to naive values in UTC anymore when
such values are passed as parameters to SQL queries executed outside of the
ORM, e.g. with <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.auth.tests.utils.skipIfCustomUser()</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">GeoManager</span></code> and <code class="docutils literal notranslate"><span class="pre">GeoQuerySet</span></code> classes are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geoip</span></code> module is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">supports_recursion</span></code> check for template loaders is removed from:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.engine.Engine.find_template()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loader_tags.ExtendsNode.find_template()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.base.Loader.supports_recursion()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.cached.Loader.supports_recursion()</span></code></p></li>
</ul>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">load_template</span></code> and <code class="docutils literal notranslate"><span class="pre">load_template_sources</span></code> template loader methods
are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">template_dirs</span></code> argument for template loaders is removed:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.base.Loader.get_template()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.cached.Loader.cache_key()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.cached.Loader.get_template()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.cached.Loader.get_template_sources()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.filesystem.Loader.get_template_sources()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.base.Loader.__call__()</span></code> is removed.</p></li>
<li><p>Support for custom error views that don’t accept an <code class="docutils literal notranslate"><span class="pre">exception</span></code> parameter
is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">mime_type</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">django.utils.feedgenerator.Atom1Feed</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.utils.feedgenerator.RssFeed</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">app_name</span></code> argument to <code class="docutils literal notranslate"><span class="pre">include()</span></code> is removed.</p></li>
<li><p>Support for passing a 3-tuple (including <code class="docutils literal notranslate"><span class="pre">admin.site.urls</span></code>) as the first
argument to <code class="docutils literal notranslate"><span class="pre">include()</span></code> is removed.</p></li>
<li><p>Support for setting a URL instance namespace without an application namespace
is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Field._get_val_from_obj()</span></code> is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.template.loaders.eggs.Loader</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">current_app</span></code> parameter to the <code class="docutils literal notranslate"><span class="pre">contrib.auth</span></code> function-based views is
removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">callable_obj</span></code> keyword argument to
<code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertRaisesMessage()</span></code> is removed.</p></li>
<li><p>Support for the <code class="docutils literal notranslate"><span class="pre">allow_tags</span></code> attribute on <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> methods is
removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">enclosure</span></code> keyword argument to <code class="docutils literal notranslate"><span class="pre">SyndicationFeed.add_item()</span></code> is
removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.template.loader.LoaderOrigin</span></code> and
<code class="docutils literal notranslate"><span class="pre">django.template.base.StringOrigin</span></code> aliases for
<code class="docutils literal notranslate"><span class="pre">django.template.base.Origin</span></code> are removed.</p></li>
</ul>
<p>See <a class="reference internal" href="../1.10/#deprecated-features-1-10"><span class="std std-ref">Features deprecated in 1.10</span></a> for details on these changes.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--exit</span></code> option is removed.</p></li>
<li><p>Support for direct assignment to a reverse foreign key or many-to-many
relation is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_srid()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_srid()</span></code> methods of
<code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geos.GEOSGeometry</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_x()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_x()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_y()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_y()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_z()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">set_z()</span></code> methods of <code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geos.Point</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">get_coords()</span></code> and <code class="docutils literal notranslate"><span class="pre">set_coords()</span></code> methods of
<code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geos.Point</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cascaded_union</span></code> property of <code class="docutils literal notranslate"><span class="pre">django.contrib.gis.geos.MultiPolygon</span></code>
is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.utils.functional.allow_lazy()</span></code> is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">shell</span> <span class="pre">--plain</span></code> option is removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">django.core.urlresolvers</span></code> module is removed in favor of its new
location, <code class="docutils literal notranslate"><span class="pre">django.urls</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CommaSeparatedIntegerField</span></code> is removed, except for support in historical
migrations.</p></li>
<li><p>The template <code class="docutils literal notranslate"><span class="pre">Context.has_key()</span></code> method is removed.</p></li>
<li><p>Support for the <code class="docutils literal notranslate"><span class="pre">django.core.files.storage.Storage.accessed_time()</span></code>,
<code class="docutils literal notranslate"><span class="pre">created_time()</span></code>, and <code class="docutils literal notranslate"><span class="pre">modified_time()</span></code> methods is removed.</p></li>
<li><p>Support for query lookups using the model name when
<code class="docutils literal notranslate"><span class="pre">Meta.default_related_name</span></code> is set is removed.</p></li>
<li><p>The MySQL <code class="docutils literal notranslate"><span class="pre">__search</span></code> lookup is removed.</p></li>
<li><p>The shim for supporting custom related manager classes without a
<code class="docutils literal notranslate"><span class="pre">_apply_rel_filters()</span></code> method is removed.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">User.is_authenticated()</span></code> and <code class="docutils literal notranslate"><span class="pre">User.is_anonymous()</span></code> as methods
rather than properties is no longer supported.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Model._meta.virtual_fields</span></code> attribute is removed.</p></li>
<li><p>The keyword arguments <code class="docutils literal notranslate"><span class="pre">virtual_only</span></code> in <code class="docutils literal notranslate"><span class="pre">Field.contribute_to_class()</span></code> and
<code class="docutils literal notranslate"><span class="pre">virtual</span></code> in <code class="docutils literal notranslate"><span class="pre">Model._meta.add_field()</span></code> are removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">javascript_catalog()</span></code> and <code class="docutils literal notranslate"><span class="pre">json_catalog()</span></code> views are removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.gis.utils.precision_wkt()</span></code> is removed.</p></li>
<li><p>In multi-table inheritance, implicit promotion of a <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> to a
<code class="docutils literal notranslate"><span class="pre">parent_link</span></code> is removed.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">Widget._format_value()</span></code> is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FileField</span></code> methods <code class="docutils literal notranslate"><span class="pre">get_directory_name()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_filename()</span></code> are
removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">mark_for_escaping()</span></code> function and the classes it uses: <code class="docutils literal notranslate"><span class="pre">EscapeData</span></code>,
<code class="docutils literal notranslate"><span class="pre">EscapeBytes</span></code>, <code class="docutils literal notranslate"><span class="pre">EscapeText</span></code>, <code class="docutils literal notranslate"><span class="pre">EscapeString</span></code>, and <code class="docutils literal notranslate"><span class="pre">EscapeUnicode</span></code> are
removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">escape</span></code> filter now uses <code class="docutils literal notranslate"><span class="pre">django.utils.html.conditional_escape()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Manager.use_for_related_fields</span></code> is removed.</p></li>
<li><p>Model <code class="docutils literal notranslate"><span class="pre">Manager</span></code> inheritance follows MRO inheritance rules. The requirement
to use <code class="docutils literal notranslate"><span class="pre">Meta.manager_inheritance_from_future</span></code> to opt-in to the behavior is
removed.</p></li>
<li><p>Support for old-style middleware using <code class="docutils literal notranslate"><span class="pre">settings.MIDDLEWARE_CLASSES</span></code> is
removed.</p></li>
</ul>
</section>
</section>

    </article>
  

  
    <nav class="browse-horizontal" aria-labelledby="browse-horizontal-header">
      <span id="browse-horizontal-header" class="visuallyhidden">Previous page and next page</span>
      
        <div class="left"><a rel="prev" href="../2.0.1/"><i class="icon icon-chevron-left"></i> Django 2.0.1 release notes</a></div>
      
      
        <div class="right"><a rel="next" href="../1.11.29/">Django 1.11.29 release notes <i class="icon icon-chevron-right"></i></a></div>
      
    </nav>
  


        <a href="#top" class="backtotop"><i class="icon icon-chevron-up"></i> Back to Top</a>
      </main>

      
  <div role="complementary">
    <h2 class="visuallyhidden" id="aside-header">Additional Information</h2>

    


  <div class="fundraising-sidebar">
    <h3>Support Django!</h3>

    <div class="small-heart">
      <img src="https://static.djangoproject.com/img/fundraising-heart.cd6bb84ffd33.svg" alt="Support Django!" />
    </div>

    <div class="small-cta">
      <ul class="list-links-small">
        <li><a href="https://www.djangoproject.com/fundraising/">
          Red Robot Studios Ltd donated to the Django Software Foundation to support Django development. Donate today!
        </a></li>
      </ul>
    </div>
  </div>



    
      <h3>Contents</h3>
      
        <ul>
<li><a class="reference internal" href="#">Django 2.0 release notes</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python compatibility</a></li>
<li><a class="reference internal" href="#third-party-library-support-for-older-version-of-django">Third-party library support for older version of Django</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-2-0">What’s new in Django 2.0</a><ul>
<li><a class="reference internal" href="#simplified-url-routing-syntax">Simplified URL routing syntax</a></li>
<li><a class="reference internal" href="#mobile-friendly-contrib-admin">Mobile-friendly <code class="docutils literal notranslate"><span class="pre">contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#window-expressions">Window expressions</a></li>
<li><a class="reference internal" href="#minor-features">Minor features</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a></li>
<li><a class="reference internal" href="#cache">Cache</a></li>
<li><a class="reference internal" href="#file-storage">File Storage</a></li>
<li><a class="reference internal" href="#forms">Forms</a></li>
<li><a class="reference internal" href="#generic-views">Generic Views</a></li>
<li><a class="reference internal" href="#management-commands">Management Commands</a></li>
<li><a class="reference internal" href="#migrations">Migrations</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#requests-and-responses">Requests and Responses</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#validators">Validators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-2-0">Backwards incompatible changes in 2.0</a><ul>
<li><a class="reference internal" href="#removed-support-for-bytestrings-in-some-places">Removed support for bytestrings in some places</a></li>
<li><a class="reference internal" href="#database-backend-api">Database backend API</a></li>
<li><a class="reference internal" href="#dropped-support-for-oracle-11-2">Dropped support for Oracle 11.2</a></li>
<li><a class="reference internal" href="#default-mysql-isolation-level-is-read-committed">Default MySQL isolation level is read committed</a></li>
<li><a class="reference internal" href="#abstractuser-last-name-max-length-increased-to-150"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AbstractUser.last_name</span></code> <code class="docutils literal notranslate"><span class="pre">max_length</span></code> increased to 150</a></li>
<li><a class="reference internal" href="#queryset-reverse-and-last-are-prohibited-after-slicing"><code class="docutils literal notranslate"><span class="pre">QuerySet.reverse()</span></code> and <code class="docutils literal notranslate"><span class="pre">last()</span></code> are prohibited after slicing</a></li>
<li><a class="reference internal" href="#form-fields-no-longer-accept-optional-arguments-as-positional-arguments">Form fields no longer accept optional arguments as positional arguments</a></li>
<li><a class="reference internal" href="#call-command-validates-the-options-it-receives"><code class="docutils literal notranslate"><span class="pre">call_command()</span></code> validates the options it receives</a></li>
<li><a class="reference internal" href="#indexes-no-longer-accept-positional-arguments">Indexes no longer accept positional arguments</a></li>
<li><a class="reference internal" href="#foreign-key-constraints-are-now-enabled-on-sqlite">Foreign key constraints are now enabled on SQLite</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-2-0">Features deprecated in 2.0</a><ul>
<li><a class="reference internal" href="#context-argument-of-field-from-db-value-and-expression-convert-value"><code class="docutils literal notranslate"><span class="pre">context</span></code> argument of <code class="docutils literal notranslate"><span class="pre">Field.from_db_value()</span></code> and <code class="docutils literal notranslate"><span class="pre">Expression.convert_value()</span></code></a></li>
<li><a class="reference internal" href="#id1">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-removed-in-2-0">Features removed in 2.0</a></li>
</ul>
</li>
</ul>

      
    

    
      <nav aria-labelledby="browse-header">
        <h3 id="browse-header">Browse</h3>
        <ul>
          
            
              <li>Prev: <a rel="prev" href="../2.0.1/">Django 2.0.1 release notes</a></li>
            
            
              <li>Next: <a rel="next" href="../1.11.29/">Django 1.11.29 release notes</a></li>
            
            <li><a href="https://docs.djangoproject.com/en/6.0/contents/">Table of contents</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/genindex/">General Index</a></li>
            
              <li><a href="https://docs.djangoproject.com/en/6.0/py-modindex/">Python Module Index</a></li>
            
          
        </ul>
      </nav>
    

    
      <nav aria-labelledby="breadcrumbs-header">
        <h3 id="breadcrumbs-header">You are here:</h3>
        <ul>
          <li>
            <a href="https://docs.djangoproject.com/en/6.0/">Django 6.0 documentation</a>
            
              <ul><li><a href="../">Release notes</a>
            
            <ul><li>Django 2.0 release notes</li></ul>
            </li></ul>
          </li>
        </ul>
      </nav>
    

    
      <section aria-labelledby="getting-help-sidebar">
        <h3 id="getting-help-sidebar">Getting help</h3>
        <dl class="list-links">
          <dt><a href="https://docs.djangoproject.com/en/6.0/faq/">FAQ</a></dt>
          <dd>Try the FAQ — it's got answers to many common questions.</dd>

          <dt><a href="/en/stable/genindex/">Index</a>, <a href="/en/stable/py-modindex/">Module Index</a>, or <a href="/en/stable/contents/">Table of Contents</a></dt>
          <dd>Handy when looking for specific information.</dd>

          <dt><a href="https://chat.djangoproject.com">Django Discord Server</a></dt>
          <dd>Join the Django Discord Community.</dd>

          <dt><a href="https://forum.djangoproject.com/">Official Django Forum</a></dt>
          <dd>Join the community on the Django Forum.</dd>

          <dt><a href="https://code.djangoproject.com/">Ticket tracker</a></dt>
          <dd>Report bugs with Django or Django documentation in our ticket tracker.</dd>
        </dl>
      </section>
    

    
      <section aria-labelledby="links-wrapper-header">
        <h3 id="links-wrapper-header">Download:</h3>
        <p>
          Offline (Django 6.0):
          <a href="https://media.djangoproject.com/docs/django-docs-6.0-en.zip">HTML</a> |
          <a href="https://media.readthedocs.org/pdf/django/6.0.x/django.pdf">PDF</a> |
          <a href="https://media.readthedocs.org/epub/django/6.0.x/django.epub">ePub</a>
          <br>
          <span class="quiet">
            Provided by <a href="https://readthedocs.org/">Read the Docs</a>.
          </span>
        </p>
      </section>
    

    
  <div class="corporate-members">
    <h3>Diamond and Platinum Members</h3>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://sentry.io/for/django/" title="Sentry">
            <img src="https://media.djangoproject.com/cache/7a/f9/7af9c770dc49465739a82c91a0eb3d51.png" alt="Sentry" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>Sentry</strong></li>
            <li><a href="https://sentry.io/for/django/" title="Sentry">
              Monitor your Django Code
Resolve performance bottlenecks and errors using monitoring, replays, logs and Seer an AI agent for debugging.
            </a></li>
          </ul>
        </div>
      </div>
    
      <div class="clearfix">
        <div class="member-logo">
          <a href="https://jb.gg/ybja10" title="JetBrains">
            <img src="https://media.djangoproject.com/cache/c0/ea/c0ea128467983e64aab91cd27e7918c0.png" alt="JetBrains" />
          </a>
        </div>
        <div class="small-cta">
          <ul class="list-links-small">
            <li><strong>JetBrains</strong></li>
            <li><a href="https://jb.gg/ybja10" title="JetBrains">
              JetBrains delivers intelligent software solutions that make developers more productive by simplifying their challenging tasks, automating the routine, and helping them adopt the best development practices. PyCharm is the Python IDE for Professional Developers by JetBrains providing a complete set of tools for productive Python, Web and scientific development.
            </a></li>
          </ul>
        </div>
      </div>
    
  </div>


  </div>

      

    </div>

     
     

    
    
    

    <!-- SVGs -->
    <svg xmlns="http://www.w3.org/2000/svg">
      <symbol viewBox="0 0 24 24" id="icon-auto"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2V4a8 8 0 1 0 0 16z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-moon"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol>
      <symbol viewBox="0 0 24 24" id="icon-sun"><path d="M0 0h24v24H0z" fill="currentColor"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol>
    </svg>
    <!-- END SVGs -->

    
      

<footer>
  <div class="subfooter">
    <div class="container">
      <h2 class="visuallyhidden">Django Links</h2>
      <div class="column-container">
        <div class="col-learn-more">
          <h3>Learn More</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/start/overview/">About Django</a></li>
            
            <li><a href="https://www.djangoproject.com/start/">Getting Started with Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/teams/">Team Organization</a></li>
            <li><a href="https://www.djangoproject.com/foundation/">Django Software Foundation</a></li>
            <li><a href="https://www.djangoproject.com/conduct/">Code of Conduct</a></li>
            <li><a href="https://www.djangoproject.com/diversity/">Diversity Statement</a></li>
          </ul>
        </div>

        <div class="col-get-involved">
          <h3>Get Involved</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/community/">Join a Group</a></li>
            <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/">Contribute
              to Django</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/">Submit
              a Bug</a></li>
            <li><a
              href="https://docs.djangoproject.com/en/dev/internals/security/#reporting-security-issues">Report
              a Security Issue</a></li>
            <li><a href="https://www.djangoproject.com/foundation/individual-members/">Individual membership</a></li>
          </ul>
        </div>

        <div class="col-get-help">
          <h3>Get Help</h3>
          <ul>
            <li><a href="https://docs.djangoproject.com/en/stable/faq/">Getting Help FAQ</a>
            </li>
            <li><a href="https://chat.djangoproject.com" target="_blank">Django Discord</a></li>
            <li><a href="https://forum.djangoproject.com/" target="_blank">Official Django Forum</a></li>
          </ul>
        </div>

        <div class="col-follow-us">
          <h3>Follow Us</h3>
          <ul>
            <li><a href="https://github.com/django">GitHub</a></li>
            <li><a href="https://x.com/djangoproject">X</a></li>
            <li><a href="https://fosstodon.org/@django" rel="me">Fediverse (Mastodon)</a></li>
            <li><a href="https://bsky.app/profile/djangoproject.com">Bluesky</a></li>
            <li><a href="https://www.linkedin.com/company/django-software-foundation">LinkedIn</a></li>
            <li><a href="https://www.djangoproject.com/rss/weblog/">News RSS</a></li>
          </ul>
        </div>

        <div class="col-support-us">
          <h3>Support Us</h3>
          <ul>
            <li><a href="https://www.djangoproject.com/fundraising/">Sponsor Django</a></li>
            <li><a href="https://www.djangoproject.com/foundation/corporate-membership/">Corporate membership</a></li>
            <li><a href="https://django.threadless.com/" target="_blank">Official merchandise store</a></li>
            <li><a href="https://www.djangoproject.com/foundation/donate/#benevity-giving">Benevity Workplace Giving Program</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/">Django</a>
      </div>
      <ul class="thanks">
        <li>
          <span>Hosting by</span> <a class="in-kind-donors" href="https://www.djangoproject.com/fundraising/#in-kind-donors">In-kind
            donors</a>
        </li>
        <li class="design"><span>Design by</span> <a class="threespot" href="https://www.threespot.com">Threespot</a>
          <span class="ampersand">&amp;</span> <a class="andrevv" href="http://andrevv.com/">andrevv</a></li>
      </ul>
      <p class="copyright">&copy; 2005-2025
        <a href="https://www.djangoproject.com/foundation/"> Django Software
          Foundation</a> and individual contributors. Django is a
        <a href="https://www.djangoproject.com/trademarks/">registered
          trademark</a> of the Django Software Foundation.
      </p>
    </div>
  </div>

</footer>

    

    
  


    
      
      <script>
        function extless(input) {
          return input.replace(/(.*)\.[^.]+$/, '$1');
        }
        var require = {
          shim: {
            'jquery': [],
            'stripe': {
              exports: 'Stripe'
            }
          },
          paths: {
            "jquery": extless("https://static.djangoproject.com/js/lib/jquery.min.5790ead7ad3b.js"),
            "mod/list-collapsing": extless("https://static.djangoproject.com/js/mod/list-collapsing.2d844151b2ec.js"),
            "mod/stripe-change-card": extless("https://static.djangoproject.com/js/mod/stripe-change-card.eaa0afc324e9.js"),
            "mod/switch-dark-mode": extless("https://static.djangoproject.com/js/mod/switch-dark-mode.139625c684db.js"),
            "stripe-checkout": "https://checkout.stripe.com/checkout",
            "stripe": "https://js.stripe.com/v3/?" // ? needed due to require.js
          }
        };
      </script>
      <script data-main="https://static.djangoproject.com/js/main.8677b21133eb.js" src="https://static.djangoproject.com/js/lib/require.177879fbe7dd.js"></script>
      <script src="https://static.djangoproject.com/js/djangoproject.15c016c8c3a7.js"></script>
    
  </body>
</html>
